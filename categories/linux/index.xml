<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Linux on Laurance&#39;s Note</title>
        <link>https://note.laurance.ml/categories/linux/</link>
        <description>Recent content in Linux on Laurance&#39;s Note</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Fri, 03 Mar 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://note.laurance.ml/categories/linux/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Linux 核心 &amp; 系統日誌檔 (local 級別)</title>
        <link>https://note.laurance.ml/p/linux-%E6%A0%B8%E5%BF%83-%E7%B3%BB%E7%B5%B1%E6%97%A5%E8%AA%8C%E6%AA%94-local-%E7%B4%9A%E5%88%A5/</link>
        <pubDate>Fri, 03 Mar 2023 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E6%A0%B8%E5%BF%83-%E7%B3%BB%E7%B5%B1%E6%97%A5%E8%AA%8C%E6%AA%94-local-%E7%B4%9A%E5%88%A5/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E6%A0%B8%E5%BF%83-%E7%B3%BB%E7%B5%B1%E6%97%A5%E8%AA%8C%E6%AA%94-local-%E7%B4%9A%E5%88%A5/100.png" alt="Featured image of post Linux 核心 &amp; 系統日誌檔 (local 級別)" /&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;等級數值&lt;/th&gt;
&lt;th&gt;等級名稱&lt;/th&gt;
&lt;th&gt;說明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;debug&lt;/td&gt;
&lt;td&gt;用來 debug (除錯) 時產生的訊息資料；&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;info&lt;/td&gt;
&lt;td&gt;僅是一些基本的訊息說明而已；&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;notice&lt;/td&gt;
&lt;td&gt;雖然是正常資訊，但比 info 還需要被注意到的一些資訊內容；&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;warning&lt;/td&gt;
&lt;td&gt;警示的訊息，可能有問題，但是還不至於影響到某個 daemon 運作的資訊；&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;err&lt;/td&gt;
&lt;td&gt;一些重大的錯誤訊息，例如設定檔的某些設定值造成該服務服法啟動的資訊說明 ;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;crit&lt;/td&gt;
&lt;td&gt;比 error 還要嚴重的錯誤資訊，這個 crit 是臨界點 (critical) 的縮寫 ;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;alert&lt;/td&gt;
&lt;td&gt;警告警告，已經很有問題的等級，比 crit 還要嚴重！ ;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;emerg&lt;/td&gt;
&lt;td&gt;疼痛等級，意指系統已經幾乎要當機的狀態！ 很嚴重的錯誤資訊了。通常大概只有硬體出問題，導致整個核心無法順利運作 ;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-youtube-dl &amp;&amp; ffmpeg 安裝教學</title>
        <link>https://note.laurance.ml/p/linux-youtube-dl-ffmpeg-%E5%AE%89%E8%A3%9D%E6%95%99%E5%AD%B8/</link>
        <pubDate>Mon, 13 Feb 2023 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-youtube-dl-ffmpeg-%E5%AE%89%E8%A3%9D%E6%95%99%E5%AD%B8/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-youtube-dl-ffmpeg-%E5%AE%89%E8%A3%9D%E6%95%99%E5%AD%B8/100.png" alt="Featured image of post Linux-youtube-dl &amp;&amp; ffmpeg 安裝教學" /&gt;&lt;h1 id=&#34;youtube-dl官方-httpsyoutube-dlorg&#34;&gt;{youtube-dl官方} &lt;a class=&#34;link&#34; href=&#34;https://youtube-dl.org&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://youtube-dl.org&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;ffmpeg官方-httpsffmpegorgdownloadhtml&#34;&gt;{ffmpeg官方} &lt;a class=&#34;link&#34; href=&#34;https://ffmpeg.org/download.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://ffmpeg.org/download.html&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;youtube-dl&#34;&gt;youtube-dl&lt;/h1&gt;
&lt;p&gt;安裝最新穩定版本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/bin/youtube-dl
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;給予權限&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chmod a+rx /usr/bin/youtube-dl
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;查看版本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;youtube-dl --version
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;更新版本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;youtube-dl --update    
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;ffmpeg&#34;&gt;ffmpeg&lt;/h1&gt;
&lt;p&gt;安裝依賴&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install yasm
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;官方載 tar包&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget https://ffmpeg.org/releases/ffmpeg-5.1.2.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;解壓 &amp;amp;&amp;amp; 安裝&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar zxvf ffmpeg-5.1.2.tar.gz

./configure --prefix=/usr/local/ffmpeg --enable-openssl

make &amp;amp;&amp;amp; make install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;建立 Link&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ln -s /usr/local/ffmpeg/bin/ffmpeg /usr/bin/ffmpeg
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;查看版本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ffmpeg -version
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;參考: &lt;a class=&#34;link&#34; href=&#34;https://guopengzhen.com/%E7%BF%BB%E8%AF%91/205/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://guopengzhen.com/%E7%BF%BB%E8%AF%91/205/&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-Rsync 基本設定教學</title>
        <link>https://note.laurance.ml/p/linux-rsync-%E5%9F%BA%E6%9C%AC%E8%A8%AD%E5%AE%9A%E6%95%99%E5%AD%B8/</link>
        <pubDate>Fri, 03 Feb 2023 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-rsync-%E5%9F%BA%E6%9C%AC%E8%A8%AD%E5%AE%9A%E6%95%99%E5%AD%B8/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-rsync-%E5%9F%BA%E6%9C%AC%E8%A8%AD%E5%AE%9A%E6%95%99%E5%AD%B8/100.png" alt="Featured image of post Linux-Rsync 基本設定教學" /&gt;&lt;h1 id=&#34;環境-a--b&#34;&gt;環境: A &amp;raquo;&amp;gt; B&lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;A主機( Server端 ) IP :192.168.1.222

B主機( Clinet端 ) IP :192.168.1.122
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;b主機-clinet端--設定&#34;&gt;B主機( Clinet端 ) 設定&lt;/h1&gt;
&lt;p&gt;安裝服務&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yim install xinetd rsync
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;修改服務設定 xinetd.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/xinetd.d/rsync
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-http&#34; data-lang=&#34;http&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;service rsync
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;        disable         = no
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;        socket_type     = stream
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;        wait            = no
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;        user            = root
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;        server          = /usr/bin/rsync
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;        server_args     = --daemon
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;        log_on_failure  += USERID
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;修改服務設定 rsyncd.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/rsyncd.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-http&#34; data-lang=&#34;http&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;[update]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;path =          /
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;auth users =    update
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;hosts allow =   XX.XX.XX.XX  //來源IP
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;uid =           root
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;gid =           root
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;secrets file =  /etc/rsync.secrets
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;read only =     no
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;設定帳號密碼&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/rsync.secrets
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-http&#34; data-lang=&#34;http&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;update:123abc
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;啟動服務&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;systemctl start xinetd
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;a主機-server端-設定&#34;&gt;A主機 (Server端) 設定&lt;/h1&gt;
&lt;p&gt;設定密碼即可&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim rsync.secrets
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-http&#34; data-lang=&#34;http&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;123abc
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;語法:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rsync -aHSz  --delete --contimeout=5 --password-file=/etc/rsync.secrets /hugoserver update@XX.XX.XX.XX::update
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-使用 locate 尋找檔案教學與範例</title>
        <link>https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-locate-%E5%B0%8B%E6%89%BE%E6%AA%94%E6%A1%88%E6%95%99%E5%AD%B8%E8%88%87%E7%AF%84%E4%BE%8B/</link>
        <pubDate>Wed, 01 Feb 2023 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-locate-%E5%B0%8B%E6%89%BE%E6%AA%94%E6%A1%88%E6%95%99%E5%AD%B8%E8%88%87%E7%AF%84%E4%BE%8B/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-locate-%E5%B0%8B%E6%89%BE%E6%AA%94%E6%A1%88%E6%95%99%E5%AD%B8%E8%88%87%E7%AF%84%E4%BE%8B/100.png" alt="Featured image of post Linux-使用 locate 尋找檔案教學與範例" /&gt;&lt;p&gt;安裝 locate 工具&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install mlocate
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;更新 locate 資料庫&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;updatedb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;預設的 locate 資料庫檔案位置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ls -l /var/lib/mlocate/mlocate.db
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;快速尋找檔案&#34;&gt;快速尋找檔案&lt;/h1&gt;
&lt;p&gt;尋找含有 .bashrc 關鍵字的檔案&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;locate .bashrc
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;計算含有 .bashrc 關鍵字的檔案數量&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;locate -c .bashrc
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;不分大小寫&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;locate -i my.txt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;查看 locate 資料庫狀態&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;locate -S
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>CentOS-如何將安裝包及其依賴包下載到本地</title>
        <link>https://note.laurance.ml/p/centos-%E5%A6%82%E4%BD%95%E5%B0%87%E5%AE%89%E8%A3%9D%E5%8C%85%E5%8F%8A%E5%85%B6%E4%BE%9D%E8%B3%B4%E5%8C%85%E4%B8%8B%E8%BC%89%E5%88%B0%E6%9C%AC%E5%9C%B0/</link>
        <pubDate>Thu, 26 Jan 2023 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/centos-%E5%A6%82%E4%BD%95%E5%B0%87%E5%AE%89%E8%A3%9D%E5%8C%85%E5%8F%8A%E5%85%B6%E4%BE%9D%E8%B3%B4%E5%8C%85%E4%B8%8B%E8%BC%89%E5%88%B0%E6%9C%AC%E5%9C%B0/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/centos-%E5%A6%82%E4%BD%95%E5%B0%87%E5%AE%89%E8%A3%9D%E5%8C%85%E5%8F%8A%E5%85%B6%E4%BE%9D%E8%B3%B4%E5%8C%85%E4%B8%8B%E8%BC%89%E5%88%B0%E6%9C%AC%E5%9C%B0/100.png" alt="Featured image of post CentOS-如何將安裝包及其依賴包下載到本地" /&gt;&lt;h1 id=&#34;通過-yum-命令的-downloadonly-插件下載-rpm-軟件包及其所有依賴包&#34;&gt;通過 yum 命令的 Downloadonly 插件下載 RPM 軟件包及其所有依賴包&lt;/h1&gt;
&lt;p&gt;安裝工具包&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install yum-plugin-downloadonly yum-utils -y
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;將 *.repo 安裝到指定目錄下&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install --downloadonly + --downloaddir=軟件包位置[可選] + 軟件包名(可加上版本號，指定版本)

yum install --downloadonly --downloaddir=/root/mysql517_repo/ mysql-server mysql-client mysql-devel*
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos-%E5%A6%82%E4%BD%95%E5%B0%87%E5%AE%89%E8%A3%9D%E5%8C%85%E5%8F%8A%E5%85%B6%E4%BE%9D%E8%B3%B4%E5%8C%85%E4%B8%8B%E8%BC%89%E5%88%B0%E6%9C%AC%E5%9C%B0/101.png&#34;
	width=&#34;1893&#34;
	height=&#34;315&#34;
	srcset=&#34;https://note.laurance.ml/p/centos-%E5%A6%82%E4%BD%95%E5%B0%87%E5%AE%89%E8%A3%9D%E5%8C%85%E5%8F%8A%E5%85%B6%E4%BE%9D%E8%B3%B4%E5%8C%85%E4%B8%8B%E8%BC%89%E5%88%B0%E6%9C%AC%E5%9C%B0/101_hu5328d310b51f9e52871505ca1905498b_33729_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos-%E5%A6%82%E4%BD%95%E5%B0%87%E5%AE%89%E8%A3%9D%E5%8C%85%E5%8F%8A%E5%85%B6%E4%BE%9D%E8%B3%B4%E5%8C%85%E4%B8%8B%E8%BC%89%E5%88%B0%E6%9C%AC%E5%9C%B0/101_hu5328d310b51f9e52871505ca1905498b_33729_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;600&#34;
		data-flex-basis=&#34;1442px&#34;
	
&gt;&lt;/p&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Rsyslog日誌遠端集中式管理</title>
        <link>https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/</link>
        <pubDate>Wed, 21 Dec 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/100.png" alt="Featured image of post Rsyslog日誌遠端集中式管理" /&gt;&lt;p&gt;查看相關配置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rpm -qc rsyslog
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   /etc/logrotate.d/syslog
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   /etc/rsyslog.conf
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   /etc/sysconfig/rsyslog
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;查看版本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rsyslogd -v
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rsyslogd 8.24.0-57.el7_9.3, compiled with:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	PLATFORM:				x86_64-redhat-linux-gnu
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	PLATFORM (lsb_release -d):		
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	FEATURE_REGEXP:				Yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	GSSAPI Kerberos 5 support:		Yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	FEATURE_DEBUG (debug build, slow code):	No
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	32bit Atomic operations supported:	Yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	64bit Atomic operations supported:	Yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	memory allocator:			system default
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	Runtime Instrumentation (slow code):	No
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	uuid support:				Yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	Number of Bits in RainerScript integers: 64
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;更改 rsyslog 參數 (-c 後為版本號 , -r 為開啟遠端接收)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/sysconfig/rsyslog
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/0001.png&#34;
	width=&#34;853&#34;
	height=&#34;136&#34;
	srcset=&#34;https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/0001_hu97d3ce02cec2e47fbf39b2a9e3c0feff_7020_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/0001_hu97d3ce02cec2e47fbf39b2a9e3c0feff_7020_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;627&#34;
		data-flex-basis=&#34;1505px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;##CLIENT&lt;/p&gt;
&lt;p&gt;RSYSLOG設定檔配置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/rsyslog.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-v&#34; data-lang=&#34;v&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;rsyslog&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;configuration&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;For&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;more&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;information&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;see&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;usr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;share&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;doc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;rsyslog&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-*/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;rsyslog_conf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;html&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;If&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;you&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;experience&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;problems&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;see&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//www.rsyslog.com/doc/troubleshoot.html
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;####&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MODULES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;####&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;The&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imjournal&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;module&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;bellow&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;now&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;used&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;instead&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imuxsock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imuxsock&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;provides&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;support&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;local&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;system&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;logging&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;via&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;logger&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imjournal&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;provides&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;access&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;systemd&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;journal&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imklog&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;reads&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;kernel&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;messages&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;same&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;are&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;read&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;journald&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;immark&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;provides&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;MARK&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;capability&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imfile&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Provides&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;UDP&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;syslog&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;reception&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imudp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;UDPServerRun&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;514&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Provides&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TCP&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;syslog&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;reception&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imtcp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;InputTCPServerRun&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;514&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;####&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;GLOBAL&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;DIRECTIVES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;####&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Where&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;place&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;auxiliary&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;files&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;WorkDirectory&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;lib&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;rsyslog&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Use&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;default&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;timestamp&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;format&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ActionFileDefaultTemplate&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;RSYSLOG_TraditionalFileFormat&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;File&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;syncing&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;capability&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;disabled&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;by&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;This&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;feature&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;usually&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;required&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;useful&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;an&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;extreme&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;performance&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;hit&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ActionFileEnableSync&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;on&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Include&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;all&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;files&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;rsyslog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;IncludeConfig&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;rsyslog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;conf&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Turn&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;off&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;reception&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;via&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;local&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;log&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;local&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;messages&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;are&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;retrieved&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;through&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imjournal&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;OmitLocalLogging&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;on&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;File&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;position&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;journal&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;IMJournalStateFile&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imjournal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;state&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;####&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;RULES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;####&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Log&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;all&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;kernel&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;messages&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Logging&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;much&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;clutters&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;up&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;screen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#kern.*                                                 /dev/console&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Log&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;anything&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;mail&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;info&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;higher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Don&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;t log private authentication messages!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;*.info;mail.none;authpriv.none;cron.none                /var/log/messages
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# The authpriv file has restricted access.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;authpriv.*                                              /var/log/secure.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Log all the mail messages in one place.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;mail.*                                                  -/var/log/maillog.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Log cron stuff
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;cron.*                                                  /var/log/cron.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Everybody gets emergency messages
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;*.emerg                                                 :omusrmsg:*
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Save news errors of level crit and higher in a special file.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;uucp,news.crit                                          /var/log/spooler.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Save boot messages also to boot.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;local7.*                                                /var/log/boot.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#*.* 							                        @@172.16.0.223:514
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;:msg, contains, &amp;#34;PHP&amp;#34;					                @172.16.0.223       #紀錄在messages裡有&amp;#34;PHP&amp;#34;關鍵字的LOG
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#include(file=&amp;#34;/etc/rsyslog.d/*.conf&amp;#34;)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#:programname,isequal,&amp;#34;dhclient&amp;#34;                         /var/log/dhclient.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#:programname,isequal,&amp;#34;ec2net&amp;#34;                           /var/log/dhclient.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# ### begin forwarding rule ###
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# The statement between the begin ... end define a SINGLE forwarding
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# rule. They belong together, do NOT split them. If you create multiple
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# forwarding rules, duplicate the whole block!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Remote Logging (we use TCP for reliable delivery)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# An on-disk queue is created for this action. If the remote host is
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# down, messages are spooled to disk and sent when it is up again.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ActionQueueFileName&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; fwdRule1 # unique name prefix for spool files
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ActionQueueMaxDiskSpace&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; 1g   # 1gb space limit (use as much as possible)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ActionQueueSaveOnShutdown&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; on # save messages to disk on shutdown
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ActionQueueType&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; LinkedList   # run asynchronously
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ActionResumeRetryCount&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; -1    # infinite retries if host is down
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# remote host is: name/ip:port, e.g. 192.168.0.1:514, port optional
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#*.* @@remote-host:514
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# ### end of the forwarding rule ###
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;IncludeConfig&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; /etc/rsyslog.d/*.conf
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;RSYSLOG 服務重啟&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;systemctl restart rsyslog
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;NGINX 設定檔配置 (web-server-log)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;server {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    listen 1515;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    listen [::]:1515;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    server_name note.laurance.com;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        location  / {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#       auth_basic      &amp;#34;authentication&amp;#34;;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#       auth_basic_user_file conf/mypasswords/.hugopass.dev;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_set_header X-Real-IP $remote_addr;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_redirect off;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_http_version 1.1;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_pass http://127.0.0.1:1313;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_set_header X_FORWARDED_HOST $host;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_set_header Host $http_host;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_ignore_client_abort on;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_read_timeout 300;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_ignore_headers &amp;#34;Cache-Control&amp;#34;;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        add_header X-Cache &amp;#34;$upstream_cache_status from $server_addr&amp;#34;;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        add_header Cache-Control  max-age=60;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_cache_valid  304 1m;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#       proxy_cache two;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        proxy_cache_key $host$uri$is_args$args;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#    auth_basic      &amp;#34;authentication&amp;#34;;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;#    auth_basic_user_file conf/mypasswords/.hugopass.dev;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    access_log logs/hugo-server/hugo-server.acc access;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    access_log  syslog:server=172.16.0.223:514,tag=note_laurance_orz  access;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;NGINX 服務重啟&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/usr/local/web/nginx/sbin/nginx -t

/usr/local/web/nginx/sbin/nginx -s reload
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;PHP設定檔配置 (定義 error_log 位置及層級)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /usr/local/web/php/etc/php-fpm.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/0002.png&#34;
	width=&#34;1907&#34;
	height=&#34;835&#34;
	srcset=&#34;https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/0002_hu7cf8313bc3f1c050dc1ee18f476eb5df_57002_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/0002_hu7cf8313bc3f1c050dc1ee18f476eb5df_57002_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;228&#34;
		data-flex-basis=&#34;548px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;##SERVER&lt;/p&gt;
&lt;p&gt;RSYSLOG設定檔配置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/rsyslog.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-v&#34; data-lang=&#34;v&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;rsyslog&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;configuration&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;For&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;more&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;information&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;see&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;usr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;share&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;doc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;rsyslog&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-*/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;rsyslog_conf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;html&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;If&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;you&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;experience&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;problems&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;see&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//www.rsyslog.com/doc/troubleshoot.html
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;####&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;MODULES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;####&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;The&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imjournal&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;module&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;bellow&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;now&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;used&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;source&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;instead&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imuxsock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imuxsock&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;provides&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;support&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;local&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;system&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;logging&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;via&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;logger&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imjournal&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;provides&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;access&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;systemd&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;journal&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imklog&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;reads&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;kernel&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;messages&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;same&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;are&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;read&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;journald&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;immark&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;provides&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;MARK&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;capability&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Provides&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;UDP&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;syslog&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;reception&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imudp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;UDPServerRun&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;514&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Provides&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TCP&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;syslog&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;reception&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ModLoad&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imtcp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;InputTCPServerRun&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;514&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;####&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;GLOBAL&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;DIRECTIVES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;####&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Where&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;place&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;auxiliary&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;files&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;WorkDirectory&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;lib&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;rsyslog&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Use&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;default&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;timestamp&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;format&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ActionFileDefaultTemplate&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;RSYSLOG_TraditionalFileFormat&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;File&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;syncing&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;capability&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;disabled&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;by&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;This&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;feature&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;usually&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;required&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;useful&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;an&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;extreme&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;performance&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;hit&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;ActionFileEnableSync&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;on&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Include&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;all&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;config&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;files&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;rsyslog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;IncludeConfig&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;rsyslog&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;conf&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Turn&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;off&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;reception&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;via&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;local&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;log&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;local&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;messages&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;are&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;retrieved&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;through&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imjournal&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;OmitLocalLogging&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;on&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;File&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;position&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;journal&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nc&#34;&gt;IMJournalStateFile&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;imjournal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;state&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;####&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;RULES&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;####&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Log&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;all&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;kernel&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;messages&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Logging&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;much&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;clutters&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;up&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;the&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;screen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#kern.*                                                 /dev/console&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Log&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;anything&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;mail&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;info&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;higher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Don&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;t log private authentication messages!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;*.info;mail.none;authpriv.none;cron.none                /var/log/messages
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# The authpriv file has restricted access.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;authpriv.*                                              /var/log/secure
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Log all the mail messages in one place.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;mail.*                                                  -/var/log/maillog
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Log cron stuff
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;cron.*                                                  /var/log/cron
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Everybody gets emergency messages
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;*.emerg                                                 :omusrmsg:*
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Save news errors of level crit and higher in a special file.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;uucp,news.crit                                          /var/log/spooler
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Save boot messages also to boot.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#local7.*                                                /var/log/boot.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#:programname,isequal,&amp;#34;dhclient&amp;#34;                         /var/log/dhclient.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#:programname,isequal,&amp;#34;ec2net&amp;#34;                           /var/log/dhclient.log
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# ### begin forwarding rule ###
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# The statement between the begin ... end define a SINGLE forwarding
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# rule. They belong together, do NOT split them. If you create multiple
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# forwarding rules, duplicate the whole block!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# Remote Logging (we use TCP for reliable delivery)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# An on-disk queue is created for this action. If the remote host is
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# down, messages are spooled to disk and sent when it is up again.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ActionQueueFileName&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; fwdRule1 # unique name prefix for spool files
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ActionQueueMaxDiskSpace&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; 1g   # 1gb space limit (use as much as possible)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ActionQueueSaveOnShutdown&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; on # save messages to disk on shutdown
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ActionQueueType&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; LinkedList   # run asynchronously
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ActionResumeRetryCount&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; -1    # infinite retries if host is down
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# remote host is: name/ip:port, e.g. 192.168.0.1:514, port optional
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;#*.* @@remote-host:514
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;# ### end of the forwarding rule ###
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;IncludeConfig&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; /etc/rsyslog.d/*.conf
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;##在rsyslog.d目錄下建立 xxx.conf 定義 Client 端 log 的標籤及路徑&lt;/p&gt;
&lt;p&gt;vim /etc/rsyslog.d/note_laurance.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:syslogtag, contains, &amp;quot;note_laurance_orz&amp;quot; /home/note-laurance-log/note.laurance.log
&amp;amp; stop
.
.
.
.
.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;vim /etc/rsyslog.d/php_error.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if  $msg contains &#39;PHP&#39;  then /home/note-laurance-log/php_errors.acc
&amp;amp; stop
.
.
.
.
.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;RSYSLOG 服務重啟&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;systemctl restart rsyslog
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;##驗證:&lt;/p&gt;
&lt;p&gt;訪問 note.laurance.com:1515 可以看到 LOG 被同步寫進指定位置了&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/0003.png&#34;
	width=&#34;1901&#34;
	height=&#34;836&#34;
	srcset=&#34;https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/0003_hub0b268acf61b4225420db1a0076db6ea_113326_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/0003_hub0b268acf61b4225420db1a0076db6ea_113326_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;227&#34;
		data-flex-basis=&#34;545px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;##建立每天排程LOG輪詢&lt;/p&gt;
&lt;p&gt;建立排程 shell&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /root/logrotate/logrotate.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/usr/sbin/logrotate -f /root/logrotate/weblog
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;vim /root/logrotate/weblog
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/home/note-laurance-log/*.log {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           daily
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           rotate 30
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           create
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           sharedscripts
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           postrotate
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           /bin/systemctl restart rsyslog.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           endscript
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/home/note-laurance-log/*.acc {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           daily
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           rotate 30
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           create
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           sharedscripts
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           postrotate
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           /bin/systemctl restart rsyslog.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           endscript
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;crontab -e

10 05 * * * sh /root/logrotate/logrotate.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crontab -l 確認&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.rsyslog.com/doc/v8-stable/index.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Rsyslog 官方文件&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>CentOS7-使用certbot半自動更新SSL憑證</title>
        <link>https://note.laurance.ml/p/centos7-%E4%BD%BF%E7%94%A8certbot%E5%8D%8A%E8%87%AA%E5%8B%95%E6%9B%B4%E6%96%B0ssl%E6%86%91%E8%AD%89/</link>
        <pubDate>Sat, 10 Dec 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/centos7-%E4%BD%BF%E7%94%A8certbot%E5%8D%8A%E8%87%AA%E5%8B%95%E6%9B%B4%E6%96%B0ssl%E6%86%91%E8%AD%89/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/centos7-%E4%BD%BF%E7%94%A8certbot%E5%8D%8A%E8%87%AA%E5%8B%95%E6%9B%B4%E6%96%B0ssl%E6%86%91%E8%AD%89/100.png" alt="Featured image of post CentOS7-使用certbot半自動更新SSL憑證" /&gt;&lt;p&gt;下載 certbot 腳本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget https://raw.githubusercontent.com/certbot/certbot/7f0fa18c570942238a7de73ed99945c3710408b4/letsencrypt-auto-source/letsencrypt-auto -O /root/certbot-auto
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;給予權限&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chmod 755 /root/certbot-auto
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;使用 certbot-auto 簽發三個月憑證&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(保護 domain 及 sub domain)

./certbot-auto certonly -d “*.域名”-d “域名” --manual --preferred-challenges dns

(只保護 sub domain) 

./certbot-auto certonly -d *.域名 --manual --preferred-challenges dns
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;驗證解析&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;nslookup -type=TXT _acme-challenge.XXXXX.net 8.8.8.8
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;驗證過後會有4隻pem 路徑: /etc/letsencrypt/archive/&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp fullchain1.pem /usr/local/web/nginx/conf/key/las/XXXXX.net.crt

cp privkey1.pem /usr/local/web/nginx/conf/key/las/XXXXX.net.key
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;NGINX 重啟&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/usr/local/web/nginx/sbin/nginx  -t

/usr/local/web/nginx/sbin/nginx  -s reload
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-history命令保存的最大數</title>
        <link>https://note.laurance.ml/p/linux-history%E5%91%BD%E4%BB%A4%E4%BF%9D%E5%AD%98%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B8/</link>
        <pubDate>Sat, 10 Dec 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-history%E5%91%BD%E4%BB%A4%E4%BF%9D%E5%AD%98%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B8/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-history%E5%91%BD%E4%BB%A4%E4%BF%9D%E5%AD%98%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B8/100.png" alt="Featured image of post Linux-history命令保存的最大數" /&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;~/.bash_history 裡面紀錄的是上一次登出的歷史紀錄 (默認保存1000條)&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;查看目前保留配置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;echo $HISTSIZE
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;修改環境變量 (永久配置)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sed -i &#39;s/^HISTSIZE=1000/HISTSIZE=100000/&#39; /etc/profile
source /etc/profile
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-使用 SSH 配合憑證來遠端複製檔案 (scp)</title>
        <link>https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-ssh-%E9%85%8D%E5%90%88%E6%86%91%E8%AD%89%E4%BE%86%E9%81%A0%E7%AB%AF%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88-scp/</link>
        <pubDate>Sat, 10 Dec 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-ssh-%E9%85%8D%E5%90%88%E6%86%91%E8%AD%89%E4%BE%86%E9%81%A0%E7%AB%AF%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88-scp/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-ssh-%E9%85%8D%E5%90%88%E6%86%91%E8%AD%89%E4%BE%86%E9%81%A0%E7%AB%AF%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88-scp/100.png" alt="Featured image of post Linux-使用 SSH 配合憑證來遠端複製檔案 (scp)" /&gt;&lt;p&gt;來源 A機建立公鑰及私鑰&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh-keygen -t dsa
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;到家目錄的 .ssh裡面看，會多出 id_rsa 和 id_rsa.pub 這兩個檔案&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-ssh-%E9%85%8D%E5%90%88%E6%86%91%E8%AD%89%E4%BE%86%E9%81%A0%E7%AB%AF%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88-scp/005.png&#34;
	width=&#34;1902&#34;
	height=&#34;351&#34;
	srcset=&#34;https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-ssh-%E9%85%8D%E5%90%88%E6%86%91%E8%AD%89%E4%BE%86%E9%81%A0%E7%AB%AF%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88-scp/005_hu0ed622ea7dfb0c4fc882937b8694ee14_22610_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-ssh-%E9%85%8D%E5%90%88%E6%86%91%E8%AD%89%E4%BE%86%E9%81%A0%E7%AB%AF%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88-scp/005_hu0ed622ea7dfb0c4fc882937b8694ee14_22610_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;541&#34;
		data-flex-basis=&#34;1300px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;將 id_dsa.pub 的內容複製到 目的B機 並命名為 authorized_keys - 限制600權限&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat id_rsa.pub (A機) &amp;gt; authorized_keys (B機)

chmod 600 authorized_keys
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;驗證測試&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;來源到目的使用 ssh , scp 免密碼
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;PS. 若是有多個  id_rsa.pub 需要設定 (注意!!! 需要在第一步選擇路徑)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh-keygen -t rsa
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;第一步需填寫路徑 其餘 ENTER 即可&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Enter file in which to save the key (/root/.ssh/id_rsa): /root/.ssh/id_rsa_root
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-ssh-%E9%85%8D%E5%90%88%E6%86%91%E8%AD%89%E4%BE%86%E9%81%A0%E7%AB%AF%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88-scp/006.png&#34;
	width=&#34;940&#34;
	height=&#34;304&#34;
	srcset=&#34;https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-ssh-%E9%85%8D%E5%90%88%E6%86%91%E8%AD%89%E4%BE%86%E9%81%A0%E7%AB%AF%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88-scp/006_hu88a478b89d8e9f7f65391f2959997dac_17975_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-ssh-%E9%85%8D%E5%90%88%E6%86%91%E8%AD%89%E4%BE%86%E9%81%A0%E7%AB%AF%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88-scp/006_hu88a478b89d8e9f7f65391f2959997dac_17975_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;309&#34;
		data-flex-basis=&#34;742px&#34;
	
&gt;&lt;/p&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-利用ipset建立iptables集合 [實現封鎖國家IP] </title>
        <link>https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/</link>
        <pubDate>Mon, 05 Dec 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/100.jpg" alt="Featured image of post Linux-利用ipset建立iptables集合 [實現封鎖國家IP] " /&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.ipdeny.com/ipblocks/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DENY - 國家IP&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum -y install ipset
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;下載日本IP文件檔&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget http://www.ipdeny.com/ipblocks/data/aggregated/jp-aggregated.zone
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;建立一個放日本IP的集合&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ipset create jpip hash:net maxelem 65536
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;建立一支shell來抓取文件檔中的IP&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim jpip.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/001.png&#34;
	width=&#34;669&#34;
	height=&#34;313&#34;
	srcset=&#34;https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/001_huc001fa32ffad83dd0c2afb80b19d0cb3_9744_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/001_huc001fa32ffad83dd0c2afb80b19d0cb3_9744_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;213&#34;
		data-flex-basis=&#34;512px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;查看目前集合中IP為0&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ipset list jpip
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/002.png&#34;
	width=&#34;1901&#34;
	height=&#34;423&#34;
	srcset=&#34;https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/002_hu285a36b630b12aff3bc1cdf8cf2003e7_27663_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/002_hu285a36b630b12aff3bc1cdf8cf2003e7_27663_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;449&#34;
		data-flex-basis=&#34;1078px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;執行shell之後集合中的IP為2946&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ipset list jpip |head -n 8
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/003.png&#34;
	width=&#34;1901&#34;
	height=&#34;430&#34;
	srcset=&#34;https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/003_hu054f40f57982834dbe83eef72986c690_28984_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/003_hu054f40f57982834dbe83eef72986c690_28984_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;442&#34;
		data-flex-basis=&#34;1061px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;查看list-jpip中有多少個IP (從第九行開始算)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ipset list jpip |tail -n +9 |wc -l
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;對照文檔中的IP數量是否一致&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat jp-aggregated.zone |wc -l
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;最後使用iptables將此集合中IP進來的封包 DROP掉&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;iptables -I INPUT -m set --match-set jpip src -j DROP 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/004.png&#34;
	width=&#34;1903&#34;
	height=&#34;445&#34;
	srcset=&#34;https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/004_hud7aabbc837f38049541c2cc4c763bd2a_28331_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/004_hud7aabbc837f38049541c2cc4c763bd2a_28331_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;427&#34;
		data-flex-basis=&#34;1026px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.ipdeny.com/ipblocks/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;IPSET 官網&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;src 表示源地址，dst表示目標地址&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;hash:net 用什麼進行hash ，也可以是hash:ip 就只能ip不能網段 hash:ip,port ip+port進行hash&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;也可以有timeout 數字 這種參數，指定這個集合裏默認的超時時間單位s，超時後會自動把裏面的對象刪除&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;[常用語法]&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ipset del yoda x.x.x.x    # 從 yoda 集合中刪除內容  

ipset list yoda           # 查看 yoda 集合內容  

ipset list                # 查看所有集合的內容  

ipset flush yoda          # 清空 yoda 集合  

ipset flush               # 清空所有集合  

ipset destroy yoda        # 銷毀 yoda 集合  

ipset destroy             # 銷毀所有集合  

ipset save yoda           # 輸出 yoda 集合內容到標準輸出  

ipset save                # 輸出所有集合內容到標準輸出  

ipset restore             # 根據輸入內容恢復集合內容  
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-Iptables-清除所有規則</title>
        <link>https://note.laurance.ml/p/linux-iptables-%E6%B8%85%E9%99%A4%E6%89%80%E6%9C%89%E8%A6%8F%E5%89%87/</link>
        <pubDate>Fri, 18 Nov 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-iptables-%E6%B8%85%E9%99%A4%E6%89%80%E6%9C%89%E8%A6%8F%E5%89%87/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-iptables-%E6%B8%85%E9%99%A4%E6%89%80%E6%9C%89%E8%A6%8F%E5%89%87/100.jpg" alt="Featured image of post Linux-Iptables-清除所有規則" /&gt;&lt;pre&gt;&lt;code&gt;# 清除預設表 filter 中，所有規則鏈中的規則    
iptables -F

# 清除預設表 filter 中，使用者自訂鏈中的規則   
iptables -X

# 將所有的 chain 的計數與流量統計都歸零 
iptables -Z

# 允許所有輸入的封包
iptables -P INPUT  ACCEPT

# 允許所有輸出的封包
iptables -P OUTPUT  ACCEPT

# 允許所有轉發的封包
iptables -P FORWARD  ACCEPT
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-Iptables-移除某一條規則</title>
        <link>https://note.laurance.ml/p/linux-iptables-%E7%A7%BB%E9%99%A4%E6%9F%90%E4%B8%80%E6%A2%9D%E8%A6%8F%E5%89%87/</link>
        <pubDate>Fri, 18 Nov 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-iptables-%E7%A7%BB%E9%99%A4%E6%9F%90%E4%B8%80%E6%A2%9D%E8%A6%8F%E5%89%87/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-iptables-%E7%A7%BB%E9%99%A4%E6%9F%90%E4%B8%80%E6%A2%9D%E8%A6%8F%E5%89%87/100.jpg" alt="Featured image of post Linux-Iptables-移除某一條規則" /&gt;&lt;pre&gt;&lt;code&gt;將規則用號碼列出,並篩出該IP
iptables -nL --line-number |grep 52.52.52.52

將該chain裡的第41行砍掉
iptables -D deny 41
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-Iptables-轉發PORT</title>
        <link>https://note.laurance.ml/p/linux-iptables-%E8%BD%89%E7%99%BCport/</link>
        <pubDate>Thu, 20 Oct 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-iptables-%E8%BD%89%E7%99%BCport/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-iptables-%E8%BD%89%E7%99%BCport/100.jpg" alt="Featured image of post Linux-Iptables-轉發PORT" /&gt;&lt;p&gt;&lt;strong&gt;將 80 PROT 轉向 8000 PORT&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8000
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;利用 OUTPUT 的規則，從本機連到自己&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;iptables -t nat -A OUTPUT -p tcp -d localhost --dport 80 -j REDIRECT --to-ports 8000
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Centos-啟動網路時出現 bring up interface ip address is already in use for device eth0</title>
        <link>https://note.laurance.ml/p/centos-%E5%95%9F%E5%8B%95%E7%B6%B2%E8%B7%AF%E6%99%82%E5%87%BA%E7%8F%BE-bring-up-interface-ip-address-is-already-in-use-for-device-eth0/</link>
        <pubDate>Fri, 07 Oct 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/centos-%E5%95%9F%E5%8B%95%E7%B6%B2%E8%B7%AF%E6%99%82%E5%87%BA%E7%8F%BE-bring-up-interface-ip-address-is-already-in-use-for-device-eth0/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/centos-%E5%95%9F%E5%8B%95%E7%B6%B2%E8%B7%AF%E6%99%82%E5%87%BA%E7%8F%BE-bring-up-interface-ip-address-is-already-in-use-for-device-eth0/100.png" alt="Featured image of post Centos-啟動網路時出現 bring up interface ip address is already in use for device eth0" /&gt;&lt;p&gt;重啟網路報錯
Bringing up interface eth0:  Determining if ip address 172.16.0.224 is already in use for device eth0&amp;hellip;&lt;/p&gt;
&lt;p&gt;加上 ARPCHECK=no 重啟網路就好了&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vi /etc/sysconfig/network-scripts/ifcfg-eth0
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;DEVICE=eth0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;HWADDR=XX:XX:XX:XX:XX:XX
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;TYPE=Ethernet
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;UUID=5248d5f6-7d7b-42ee-9443-e2f627c73677
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ONBOOT=yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NM_CONTROLLED=yes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;BOOTPROTO=static
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;IPADDR=172.16.0.224
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;GATEWAY=172.16.0.1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NETMASK=255.255.0.0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;DNS1=8.8.8.8
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;DNS2=9.9.9.9
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ARPCHECK=no
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;

</description>
        </item>
        <item>
        <title>shell-script-建立 SVN-CO 排程並sync至雲端</title>
        <link>https://note.laurance.ml/p/shell-script-%E5%BB%BA%E7%AB%8B-svn-co-%E6%8E%92%E7%A8%8B%E4%B8%A6sync%E8%87%B3%E9%9B%B2%E7%AB%AF/</link>
        <pubDate>Mon, 03 Oct 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/shell-script-%E5%BB%BA%E7%AB%8B-svn-co-%E6%8E%92%E7%A8%8B%E4%B8%A6sync%E8%87%B3%E9%9B%B2%E7%AB%AF/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/shell-script-%E5%BB%BA%E7%AB%8B-svn-co-%E6%8E%92%E7%A8%8B%E4%B8%A6sync%E8%87%B3%E9%9B%B2%E7%AB%AF/100.png" alt="Featured image of post shell-script-建立 SVN-CO 排程並sync至雲端" /&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#!/bin/bash&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;SendLine&lt;span class=&#34;o&#34;&gt;(){&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nv&#34;&gt;LineToken&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nv&#34;&gt;logdate&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;date +%Y-%m-%d&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nv&#34;&gt;datee&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;date +%Y/%m/%d-%H:%M:%S&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nv&#34;&gt;sourced&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;source &amp;gt;&amp;gt; Laurance-222&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nv&#34;&gt;purposed&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;purpose &amp;gt;&amp;gt; hateformis&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nv&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SVN-DUMP上傳成功&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	curl https://notify-api.line.me/api/notify -H &lt;span class=&#34;s2&#34;&gt;&amp;#34;Authorization: Bearer &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;LineToken&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; -d &lt;span class=&#34;s2&#34;&gt;&amp;#34;message=%0D%0A&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;sourced&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;%0D%0Ai&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;purposed&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;%0D%0A&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;datee&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;%0D%0A&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; -d &lt;span class=&#34;s2&#34;&gt;&amp;#34;stickerPackageId=8525&amp;#34;&lt;/span&gt; -d &lt;span class=&#34;s2&#34;&gt;&amp;#34;stickerId=16581290&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;SDIR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/home/svn/blogtocloud
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;NOWDATEE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;date +%Y-%m-%d&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;NOWTIME&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;date +%Y/%m/%d-%H:%M:%S&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;PROJECT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;nowblog-&lt;span class=&#34;nv&#34;&gt;$NOWDATEE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;SDIR2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$SDIR&lt;/span&gt;/nowblog-&lt;span class=&#34;nv&#34;&gt;$NOWDATEE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;PROJECT2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;public-&lt;span class=&#34;nv&#34;&gt;$NOWDATEE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;LOGFILE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$SDIR&lt;/span&gt;/cloud-svn.log
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;PATH&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; PATH
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;do_rclone&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	rclone purge google-drive:&lt;span class=&#34;nv&#34;&gt;$PROJECT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	rclone mkdir google-drive:&lt;span class=&#34;nv&#34;&gt;$PROJECT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	rclone sync &lt;span class=&#34;nv&#34;&gt;$SDIR&lt;/span&gt;/&lt;span class=&#34;nv&#34;&gt;$PROJECT&lt;/span&gt; google-drive:&lt;span class=&#34;nv&#34;&gt;$PROJECT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	sleep &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$?&lt;/span&gt; -eq &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;###########################&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$PROJECT&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;在&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;NOWTIME&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;上傳成功&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;###########################&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	    &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$PROJECT&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;在&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;NOWTIME&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;上傳失敗&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	rclone purge google-drive:&lt;span class=&#34;nv&#34;&gt;$PROJECT2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	rclone mkdir google-drive:&lt;span class=&#34;nv&#34;&gt;$PROJECT2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	rclone sync &lt;span class=&#34;nv&#34;&gt;$SDIR2&lt;/span&gt;/&lt;span class=&#34;nv&#34;&gt;$PROJECT2&lt;/span&gt; google-drive:&lt;span class=&#34;nv&#34;&gt;$PROJECT2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	sleep &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$?&lt;/span&gt; -eq &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;###########################&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$PROJECT2&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;在&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;NOWTIME&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;上傳成功&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;###########################&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$PROJECT2&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;在&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;NOWTIME&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;上傳失敗&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class=&#34;nv&#34;&gt;$LOGFILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;do_rclone
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sleep &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;SendLine
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;

</description>
        </item>
        <item>
        <title>centos7 內核3.10.0-957 iptables 使用geoip過濾國家</title>
        <link>https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/</link>
        <pubDate>Thu, 08 Sep 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/100.jpg" alt="Featured image of post centos7 內核3.10.0-957 iptables 使用geoip過濾國家" /&gt;&lt;pre&gt;&lt;code&gt;安裝必要套件
yum install xz gcc make wget unzip kernel-devel-$(uname -r) iptablesdevel.$(uname -p) perl-Text-CSV_XS

確認目前的kernel版本
uname -r

確認底下的目錄名稱必須要跟上個步驟的版號完全相同，若不同時請確認yum安裝的kerneldevel套件版本，對不上時有下列幾種做法
ls /usr/src/kernels/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/01.png&#34;
	width=&#34;622&#34;
	height=&#34;143&#34;
	srcset=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/01_hu7728b59a0f89a7c2cd75280faf811204_7623_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/01_hu7728b59a0f89a7c2cd75280faf811204_7623_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;434&#34;
		data-flex-basis=&#34;1043px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1) 一般、非客制化Linux版本，請參照下述

移除目前裝的版本
rpm -e kernel-devel

至 rpm包網站 http://rpm.pbone.net 下載與kernel相同版號的 kernel-devel
wget *.rpm
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/02.png&#34;
	width=&#34;903&#34;
	height=&#34;509&#34;
	srcset=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/02_huf269c4bc051504ca1d92d556515a4667_46140_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/02_huf269c4bc051504ca1d92d556515a4667_46140_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;177&#34;
		data-flex-basis=&#34;425px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;解壓kernel-devel套件
rpm -hiv *.rpm

確認目前的kernel版本
ls /usr/src/kernels/

確認套件版本
uname -r
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;2) Aamzon EC2請參照下述

移除目前裝的版本
rpm -e kernel-devel

kernel版本升級
yum install kernel

重開機
reboot

確認目前的kernel版本
uname -r

再次yum安裝kernel-devel套件
yum install kernel-devel-$(uname -r)

確認套件版本
ls /usr/src/kernels/

確認iptables版本
iptables -V

下載與iptables相對應的套件版本
wget xtables-addons-*.tar.xz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://sourceforge.net/projects/xtables-addons/files/Xtablesaddons/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Iptables套件載點&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#iptables 1.47請用 xtables-addons-1.47.tar.xz
#aws-ec2 請用 xtables-addons-3.0.tar.xz

tar Jxf xtables-addons-1.47.tar.xz
cd xtables-addons-1.47
./configure
make
make install
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;編譯遇到以下錯誤
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/03.png&#34;
	width=&#34;635&#34;
	height=&#34;61&#34;
	srcset=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/03_huc86695b5205f7d13779edf61321cfcf5_4459_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/03_huc86695b5205f7d13779edf61321cfcf5_4459_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;1040&#34;
		data-flex-basis=&#34;2498px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum -y install iptables-devel

其中若有遇到問題，可調整mconfig中的模組留geoip即可。
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;若遇到 xtnu_ipv6_find_hdr&#39; 錯誤處理程序如下
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/04.png&#34;
	width=&#34;1099&#34;
	height=&#34;390&#34;
	srcset=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/04_hu662da645d3a70b261e54ae9d4a07b6e3_225698_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/04_hu662da645d3a70b261e54ae9d4a07b6e3_225698_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;281&#34;
		data-flex-basis=&#34;676px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;使用/* */注解此行
vim /lib/modules/`uname -r`/build/include/linux/autoconf.h
#define CONFIG_IP6_NF_IPTABLES_MODULE 1 #

或是進入extensions資料夾執行
sed -i &#39;/define WITH_IPV6/d&#39; compat_xtables.c xt_psd.c xt_length2.c xt_TARPIT.c xt_SYSRQ.c xt_RAWNAT.c
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/05.png&#34;
	width=&#34;1059&#34;
	height=&#34;358&#34;
	srcset=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/05_hu10076990fd8f0b4d445ab908313f56ef_241181_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/05_hu10076990fd8f0b4d445ab908313f56ef_241181_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;295&#34;
		data-flex-basis=&#34;709px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;若鍽譯時遇到 /lib/modules/XXXX.x86_64/build/ 路徑錯誤時
重新連結到正確的目錄

cd /lib/modules/XXXX.x86_64/
rm -rf build
ln -s ../../../usr/src/kernels/XXX.x86_64/ build  
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;開始建立IP資料庫
cd geoip

若是使用付費版的GeoIP2 Databases源
./xt_geoip_dl
./xt_geoip_build GeoIPCountryWhois.csv

若是使用免費版的GeoLite2 Databases源

需要先注冊一個 maxmind.com 帳號後即可生成一個 License Key
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.maxmind.com/en/geolite2/signup?lang=en&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;註冊maxmind.com帳號&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;下載轉格式工具程式GeoLite2xtables
wget https://github.com/mschmitt/GeoLite2xtables/archive/master.zip

unzip master.zip

cd GeoLite2xtables-master

echo &amp;quot;YOUR_LICENSE_KEY=&#39;你的金鑰&#39;&amp;quot; &amp;gt;&amp;gt; geolite2.license

echo &amp;quot;YOUR_LICENSE_KEY=&#39;tBobMt3HrPTWVJKP&#39;&amp;quot; &amp;gt;&amp;gt; geolite2.license

./00_download_geolite2

./10_download_countryinfo

cat /tmp/GeoLite2-Country-Blocks-IPv4.csv | ./20_convert_geolite2 /tmp/CountryInfo.txt &amp;gt; ../GeoIPCountryWhois.csv

cd ..

./xt_geoip_build GeoIPCountryWhois.csv   
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;若是遇到下圖錯誤表示perl缺少模組
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/06.png&#34;
	width=&#34;1379&#34;
	height=&#34;399&#34;
	srcset=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/06_hu5f171235978fd8f2acaa07e1d6afa820_298286_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/06_hu5f171235978fd8f2acaa07e1d6afa820_298286_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;345&#34;
		data-flex-basis=&#34;829px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install *YAML* perl-CPAN

perl -MCPAN -e shell

#預設回答yes即可

cpan[1]&amp;gt; install NetAddr::IP

cpan[1]&amp;gt; exit   
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;mkdir /usr/share/xt_geoip

mv BE LE /usr/share/xt_geoip/

確認是否有安裝成功
lsmod|grep geoip
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/07.png&#34;
	width=&#34;1068&#34;
	height=&#34;73&#34;
	srcset=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/07_hu830e06e2b630e52252ded4e9f4896f42_40290_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/07_hu830e06e2b630e52252ded4e9f4896f42_40290_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;1463&#34;
		data-flex-basis=&#34;3511px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;一行命令中最多可以使用10個國家
iptables -I INPUT -m geoip --src-cc PH,KR -j DROP

只允許中國IP的TCP80連線
iptables -A except -p TCP --dport 80 -m geoip --src-cc CN -j ACCEPT

只允許中國IP的TCP80、443連線
iptables -A except -p TCP -m multiport --dports 80,443 -m geoip --src-cc CN -j ACCEPT

若是要加進火牆shell請用這組
iptables -A pig -m geoip --src-cc tw -j DROP

確認規則是不是有吃到
iptables -n --list INPUT
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/08.png&#34;
	width=&#34;910&#34;
	height=&#34;157&#34;
	srcset=&#34;https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/08_hu2d70219d79b450cdb3aab81d51a95067_76664_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/08_hu2d70219d79b450cdb3aab81d51a95067_76664_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;579&#34;
		data-flex-basis=&#34;1391px&#34;
	
&gt;&lt;/p&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-Iptables-永久關閉指令</title>
        <link>https://note.laurance.ml/p/linux-iptables-%E6%B0%B8%E4%B9%85%E9%97%9C%E9%96%89%E6%8C%87%E4%BB%A4/</link>
        <pubDate>Thu, 08 Sep 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-iptables-%E6%B0%B8%E4%B9%85%E9%97%9C%E9%96%89%E6%8C%87%E4%BB%A4/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-iptables-%E6%B0%B8%E4%B9%85%E9%97%9C%E9%96%89%E6%8C%87%E4%BB%A4/100.jpg" alt="Featured image of post Linux-Iptables-永久關閉指令" /&gt;&lt;pre&gt;&lt;code&gt;查看防火牆狀態
service iptables status

永久性生效 (重啟不復原)
chkconfig iptables on   (開啟)
chkconfig iptables off  (關閉)

即時性生效 (重啟後復原)
service iptables start  (開啟)
service iptables stop   (關閉)

設置後重啟
reboot
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>CentOS8-找不到源</title>
        <link>https://note.laurance.ml/p/centos8-%E6%89%BE%E4%B8%8D%E5%88%B0%E6%BA%90/</link>
        <pubDate>Fri, 19 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/centos8-%E6%89%BE%E4%B8%8D%E5%88%B0%E6%BA%90/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/centos8-%E6%89%BE%E4%B8%8D%E5%88%B0%E6%BA%90/100.png" alt="Featured image of post CentOS8-找不到源" /&gt;&lt;pre&gt;&lt;code&gt;dnf --disablerepo &#39;*&#39; --enablerepo=extras swap centos-linux-repos centos-stream-repos
dnf distro-sync
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-History增加時間顯示</title>
        <link>https://note.laurance.ml/p/linux-history%E5%A2%9E%E5%8A%A0%E6%99%82%E9%96%93%E9%A1%AF%E7%A4%BA/</link>
        <pubDate>Tue, 16 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-history%E5%A2%9E%E5%8A%A0%E6%99%82%E9%96%93%E9%A1%AF%E7%A4%BA/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-history%E5%A2%9E%E5%8A%A0%E6%99%82%E9%96%93%E9%A1%AF%E7%A4%BA/100.png" alt="Featured image of post Linux-History增加時間顯示" /&gt;&lt;pre&gt;&lt;code&gt;臨時添加
exprt HISTTIMEFORMAT=’%F %T ’

永久套用
vim .bashrc
HISTTIMEFORMAT=&amp;quot;%F %T &amp;quot;
source .bashrc

寫入 /etc/profile 達到全體套用
…
HISTTIMEFORMAT=&amp;quot;%F %T &amp;quot;
source /etc/profile

Shell 執行的方法
echo &#39;HISTTIMEFORMAT=&amp;quot;%F %T &amp;quot;&#39; &amp;gt;&amp;gt; /etc/profile
source /etc/profile
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>XenServer-安装教學</title>
        <link>https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/</link>
        <pubDate>Mon, 15 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/100.png" alt="Featured image of post XenServer-安装教學" /&gt;&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/1.png&#34;
	width=&#34;637&#34;
	height=&#34;485&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/1_hu976d8f29bddc15b5b96d60c0a0f75123_77671_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/1_hu976d8f29bddc15b5b96d60c0a0f75123_77671_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;131&#34;
		data-flex-basis=&#34;315px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/2.png&#34;
	width=&#34;720&#34;
	height=&#34;403&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/2_hu9d6276a6cd554611898f8a5d65a99042_14850_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/2_hu9d6276a6cd554611898f8a5d65a99042_14850_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;178&#34;
		data-flex-basis=&#34;428px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/3.png&#34;
	width=&#34;723&#34;
	height=&#34;402&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/3_hub1be98bfc8fcc9859e87d8f1a268bc8c_19040_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/3_hub1be98bfc8fcc9859e87d8f1a268bc8c_19040_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;179&#34;
		data-flex-basis=&#34;431px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/4.png&#34;
	width=&#34;723&#34;
	height=&#34;400&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/4_huf8647b639c7d4c5e136e2f9a0c28b0f7_25982_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/4_huf8647b639c7d4c5e136e2f9a0c28b0f7_25982_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;180&#34;
		data-flex-basis=&#34;433px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/5.png&#34;
	width=&#34;725&#34;
	height=&#34;403&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/5_huedb377b15a312da8ca8bb336c0d27633_19552_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/5_huedb377b15a312da8ca8bb336c0d27633_19552_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;179&#34;
		data-flex-basis=&#34;431px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/6.png&#34;
	width=&#34;723&#34;
	height=&#34;404&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/6_hu7bebc8dc01495acb5e6a9f7bdbc54868_20091_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/6_hu7bebc8dc01495acb5e6a9f7bdbc54868_20091_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;178&#34;
		data-flex-basis=&#34;429px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/7.png&#34;
	width=&#34;723&#34;
	height=&#34;402&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/7_hu78f5a63a4932f466331335c4706b75d5_14170_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/7_hu78f5a63a4932f466331335c4706b75d5_14170_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;179&#34;
		data-flex-basis=&#34;431px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/8.png&#34;
	width=&#34;724&#34;
	height=&#34;401&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/8_hu00c3c4139a92a5be1f952fb46f733fae_14154_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/8_hu00c3c4139a92a5be1f952fb46f733fae_14154_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;180&#34;
		data-flex-basis=&#34;433px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/9.png&#34;
	width=&#34;724&#34;
	height=&#34;406&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/9_hu96fb44b3c812fe6d34b709c4e4e66f88_15115_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/9_hu96fb44b3c812fe6d34b709c4e4e66f88_15115_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;178&#34;
		data-flex-basis=&#34;427px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/10.png&#34;
	width=&#34;724&#34;
	height=&#34;403&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/10_hu8076f883c946df253d2547f637a49d14_15820_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/10_hu8076f883c946df253d2547f637a49d14_15820_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;179&#34;
		data-flex-basis=&#34;431px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/11.png&#34;
	width=&#34;724&#34;
	height=&#34;403&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/11_hu15898c9a9a78cb1ebed7a71189cc4f2e_14556_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/11_hu15898c9a9a78cb1ebed7a71189cc4f2e_14556_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;179&#34;
		data-flex-basis=&#34;431px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/12.png&#34;
	width=&#34;728&#34;
	height=&#34;409&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/12_hucaf7b761a393494aa278f9fdee0f99ef_11385_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/12_hucaf7b761a393494aa278f9fdee0f99ef_11385_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;177&#34;
		data-flex-basis=&#34;427px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/13.png&#34;
	width=&#34;653&#34;
	height=&#34;392&#34;
	srcset=&#34;https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/13_huefb8a9a37ae576bce4003422015eb13a_18502_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/13_huefb8a9a37ae576bce4003422015eb13a_18502_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;166&#34;
		data-flex-basis=&#34;399px&#34;
	
&gt;&lt;/p&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>XenServer-透過虛擬機做NFS-Server </title>
        <link>https://note.laurance.ml/p/xenserver-%E9%80%8F%E9%81%8E%E8%99%9B%E6%93%AC%E6%A9%9F%E5%81%9Anfs-server/</link>
        <pubDate>Fri, 12 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/xenserver-%E9%80%8F%E9%81%8E%E8%99%9B%E6%93%AC%E6%A9%9F%E5%81%9Anfs-server/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/xenserver-%E9%80%8F%E9%81%8E%E8%99%9B%E6%93%AC%E6%A9%9F%E5%81%9Anfs-server/100.png" alt="Featured image of post XenServer-透過虛擬機做NFS-Server " /&gt;&lt;pre&gt;&lt;code&gt;yum -y install nfs-utils nfs-utils-lib
mkdir -p /data2/nfs
chmod 777 /data2/nfs

允許172.16.0.0/16網段的機器掛載  /data2/nfs
echo ‘data2/nfs 172.16.0.0/24(rw,sync,no_root_squash,no_all_squash)’ &amp;gt;&amp;gt; /etc/exports
service nfs start

使用XenServer–170 匯出174的xva映像檔
mkdir -p /data2/export
mount -t nfs 172.16.0.222:/data2/nfs /data2/export
xe vm-list name-label=174	(查看174的uuid)
xe vm-export filename=/data2/export/174.xva vm=8fa16dde-c06d-726c-56da-c0fe47cf3d06	(使用174的uuid 製作映像檔)

XenServer – 180 匯入174的xva映像檔
mkdir -p /data2/export
mount -t nfs 172.16.0.222:/data2/nfs /data2/export
xe vm-import filename=/data2/export/174.xva

匯入完成之後在XenServer – 180底下會自動生成184
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-系統重啟 &amp; 檢視日誌及歷史紀錄</title>
        <link>https://note.laurance.ml/p/linux-%E7%B3%BB%E7%B5%B1%E9%87%8D%E5%95%9F-%E6%AA%A2%E8%A6%96%E6%97%A5%E8%AA%8C%E5%8F%8A%E6%AD%B7%E5%8F%B2%E7%B4%80%E9%8C%84/</link>
        <pubDate>Thu, 11 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E7%B3%BB%E7%B5%B1%E9%87%8D%E5%95%9F-%E6%AA%A2%E8%A6%96%E6%97%A5%E8%AA%8C%E5%8F%8A%E6%AD%B7%E5%8F%B2%E7%B4%80%E9%8C%84/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E7%B3%BB%E7%B5%B1%E9%87%8D%E5%95%9F-%E6%AA%A2%E8%A6%96%E6%97%A5%E8%AA%8C%E5%8F%8A%E6%AD%B7%E5%8F%B2%E7%B4%80%E9%8C%84/100.png" alt="Featured image of post Linux-系統重啟 &amp; 檢視日誌及歷史紀錄" /&gt;&lt;pre&gt;&lt;code&gt;/var/log/message ---------------------------------------系統啟動後的資訊和錯誤日誌

/var/log/secure ------------------------------------------與安全相關的日誌資訊

/var/log/maillog ------------------------------------------與郵件相關的日誌資訊

/var/log/cron ----------------------------------------------與定時任務相關的日誌資訊

/var/log/spooler ------------------------------------------與UUCP和news裝置相關的日誌資訊

/var/log/boot.log -----------------------------------------守護程序啟動和停止相關的日誌訊息

/var/log/wtmp ---------------------------------------------永久記錄每個使用者登入、登出及系統的啟動、停機的事件

/var/run/utmp ---------------------------------------------記錄當前正在登入系統的使用者資訊；

/var/log/btmp ----------------------------------------------記錄失敗的登入嘗試資訊。

####################################################################################################################

Linux 系統查詢機器最近重啟時間命令

last reboot -----------------------------------------------------------檢視所有重啟日誌資訊

last reboot | head -1 -------------------------------------------------檢視最近的一條

####################################################################################################################

last -x|grep shutdown | head -1 ---------------------------------------顯示上次關機的日期和時間

uptime -s -------------------------------------------------------------檢視系統正常的執行時間
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Centos7-更改Yum源(HiNet)</title>
        <link>https://note.laurance.ml/p/centos7-%E6%9B%B4%E6%94%B9yum%E6%BA%90hinet/</link>
        <pubDate>Wed, 10 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/centos7-%E6%9B%B4%E6%94%B9yum%E6%BA%90hinet/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/centos7-%E6%9B%B4%E6%94%B9yum%E6%BA%90hinet/100.png" alt="Featured image of post Centos7-更改Yum源(HiNet)" /&gt;&lt;pre&gt;&lt;code&gt;# CentOS-Base.repo
#
# The mirror system uses the connecting IP address of the client and the
# update status of each mirror to pick mirrors that are updated to and
# geographically close to the client. You should use this for CentOS updates
# unless you are manually picking other mirrors.
#
# If the mirrorlist= does not work for you, as a fall back you can try the 
# remarked out baseurl= line instead.
#
#

[base]
name=CentOS-$releasever – Base
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;amp;arch=$basearch&amp;amp;repo=os
baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/os/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7

#released updates 
[updates]
name=CentOS-$releasever – Updates
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;amp;arch=$basearch&amp;amp;repo=updates
baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/updates/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7

#additional packages that may be useful
[extras]
name=CentOS-$releasever – Extras
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;amp;arch=$basearch&amp;amp;repo=extras
baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/extras/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7

#additional packages that extend functionality of existing packages
[centosplus]
name=CentOS-$releasever – Plus
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;amp;arch=$basearch&amp;amp;repo=centosplus
baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/centosplus/$basearch/
gpgcheck=1
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7

#contrib – packages by Centos Users
[contrib]
name=CentOS-$releasever – Contrib
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;amp;arch=$basearch&amp;amp;repo=contrib
baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/contrib/$basearch/
gpgcheck=1
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7


#按Esc，打入 :wq 即寫入檔案，

#完成後更新資料
yum clean all
yum update -y
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-建立開機畫面motd文字</title>
        <link>https://note.laurance.ml/p/linux-%E5%BB%BA%E7%AB%8B%E9%96%8B%E6%A9%9F%E7%95%AB%E9%9D%A2motd%E6%96%87%E5%AD%97/</link>
        <pubDate>Wed, 10 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E5%BB%BA%E7%AB%8B%E9%96%8B%E6%A9%9F%E7%95%AB%E9%9D%A2motd%E6%96%87%E5%AD%97/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E5%BB%BA%E7%AB%8B%E9%96%8B%E6%A9%9F%E7%95%AB%E9%9D%A2motd%E6%96%87%E5%AD%97/100.png" alt="Featured image of post Linux-建立開機畫面motd文字" /&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;建立開機畫面motd文字
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;使用 vim, 替換 ^[ 為“轉義”字符
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;在 vim 內按 :
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;輸入以下內容 %s/\^\[/ (不要點擊Enter)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;輸入 Ctrl+v 然後點擊 Esc 轉換字符
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;最後輸入 /g ，點擊 Enter 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;如果操作正確 ^[ 則從灰色變為藍色，如果沒有點擊 u 返回
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;另一種方法 (使用echo)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;echo $&amp;#39;\e[1;37m&amp;#39; &amp;gt; myfile&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;pre&gt;&lt;code&gt;各符號意思:

%s	搜索

/	第一項

\^\[	轉義版本^[

/	第二項，使用鍵盤插入實際Esc

/g	重複所有出現
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Centos-更改系統語言</title>
        <link>https://note.laurance.ml/p/centos-%E6%9B%B4%E6%94%B9%E7%B3%BB%E7%B5%B1%E8%AA%9E%E8%A8%80/</link>
        <pubDate>Sun, 07 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/centos-%E6%9B%B4%E6%94%B9%E7%B3%BB%E7%B5%B1%E8%AA%9E%E8%A8%80/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/centos-%E6%9B%B4%E6%94%B9%E7%B3%BB%E7%B5%B1%E8%AA%9E%E8%A8%80/100.png" alt="Featured image of post Centos-更改系統語言" /&gt;&lt;pre&gt;&lt;code&gt;更改系統引數

vim /etc/locale.conf		# CentOS 7
LANG=“zh_CN.UTF-8”
source  /etc/locale.conf

vim /etc/sysconfig/i18n	        # CentOS6
LANG=“zh_CN.UTF-8”
source /etc/sysconfig/i18n

重啟系統
reboot
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>CentOS-安装speedtest-cli</title>
        <link>https://note.laurance.ml/p/centos-%E5%AE%89%E8%A3%85speedtest-cli/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/centos-%E5%AE%89%E8%A3%85speedtest-cli/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/centos-%E5%AE%89%E8%A3%85speedtest-cli/100.png" alt="Featured image of post CentOS-安装speedtest-cli" /&gt;&lt;pre&gt;&lt;code&gt;wget https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py

vim speedtest.py &amp;gt;&amp;gt; (第一行#改python3)

chmod a+rx speedtest.py

mv speedtest.py /usr/local/bin/speedtest-cli

chown root:root /usr/local/bin/speedtest-cli

命令後追加 --share 可以得到測試信息圖片
speedtest-cli --share

追加 --list 可以得到所有的測試服務器
speedtest-cli --list

使用 – server 測試指定服務器的下載或上傳速度
speedtest-cli --server 41009 (站点ID可通過 --list 獲取)
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>CentOS-根目錄磁區擴充</title>
        <link>https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/100.png" alt="Featured image of post CentOS-根目錄磁區擴充" /&gt;&lt;pre&gt;&lt;code&gt;安裝xfsdump工具
yum install xfsdump -y

備份/home磁區的掛載內容 (一路按ENTER)
xfsdump -f /home.xfsdump /home
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0001.png&#34;
	width=&#34;1917&#34;
	height=&#34;834&#34;
	srcset=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0001_hub08483849e95de621bb053a7bd70646e_54183_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0001_hub08483849e95de621bb053a7bd70646e_54183_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;229&#34;
		data-flex-basis=&#34;551px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;這時候會再跟目錄出現剛剛備份的 /home &amp;gt;&amp;gt; home.xfsdump
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0002.png&#34;
	width=&#34;1915&#34;
	height=&#34;241&#34;
	srcset=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0002_hu96b56a738934441af73b6ef57a30dd5a_16573_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0002_hu96b56a738934441af73b6ef57a30dd5a_16573_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;794&#34;
		data-flex-basis=&#34;1907px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;成功備份後，將/home磁區移除掛載 (必須以root身分登入才能執行)
umount /home
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0003.png&#34;
	width=&#34;1917&#34;
	height=&#34;573&#34;
	srcset=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0003_hu3eec93602d7d2b4098a1403407aab693_40697_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0003_hu3eec93602d7d2b4098a1403407aab693_40697_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;334&#34;
		data-flex-basis=&#34;802px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;將/home磁區大小定義為50G
lvreduce -L 50G /dev/mapper/centos-home
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0004.png&#34;
	width=&#34;1915&#34;
	height=&#34;289&#34;
	srcset=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0004_hua8835cbf6b7f7fb57d73381ca3b524a7_22391_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0004_hua8835cbf6b7f7fb57d73381ca3b524a7_22391_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;662&#34;
		data-flex-basis=&#34;1590px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;將其餘空間擴充到根目錄底下
lvextend -l +100%FREE /dev/mapper/centos-root
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0005.png&#34;
	width=&#34;1916&#34;
	height=&#34;182&#34;
	srcset=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0005_hu985ada5fd73a9124f1b32d9a1c3f3f68_14525_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0005_hu985ada5fd73a9124f1b32d9a1c3f3f68_14525_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;1052&#34;
		data-flex-basis=&#34;2526px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;使根目錄擴充生效
xfs_growfs /dev/mapper/centos-root
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0006.png&#34;
	width=&#34;1917&#34;
	height=&#34;462&#34;
	srcset=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0006_hud7d997200f5ff198882a93bf921ea029_33543_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0006_hud7d997200f5ff198882a93bf921ea029_33543_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;414&#34;
		data-flex-basis=&#34;995px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;格式化/home掛載對應的磁區
mkfs.xfs -f /dev/mapper/centos-home
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0007.png&#34;
	width=&#34;1917&#34;
	height=&#34;353&#34;
	srcset=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0007_hu403507625d2d680908567b558c8aa7c3_26335_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0007_hu403507625d2d680908567b558c8aa7c3_26335_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;543&#34;
		data-flex-basis=&#34;1303px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;重新掛載/home
mount /home
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0008.png&#34;
	width=&#34;1917&#34;
	height=&#34;364&#34;
	srcset=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0008_hua0fe5688704e454d0b602b2df2e9fcc5_25188_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0008_hua0fe5688704e454d0b602b2df2e9fcc5_25188_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;526&#34;
		data-flex-basis=&#34;1263px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;將原本備份的內容寫入/home
xfsrestore -f /home.xfsdump /home
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0009.png&#34;
	width=&#34;1918&#34;
	height=&#34;511&#34;
	srcset=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0009_hue3412b3132bca76765f52a8c12347b5d_40541_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/0009_hue3412b3132bca76765f52a8c12347b5d_40541_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;375&#34;
		data-flex-basis=&#34;900px&#34;
	
&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;可以看倒已將磁區容量擴充
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/00010.png&#34;
	width=&#34;1914&#34;
	height=&#34;411&#34;
	srcset=&#34;https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/00010_hu16cea63d6bef484da412835ec0ac8bd0_25358_480x0_resize_box_3.png 480w, https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/00010_hu16cea63d6bef484da412835ec0ac8bd0_25358_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;465&#34;
		data-flex-basis=&#34;1117px&#34;
	
&gt;&lt;/p&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>CentOS-目錄沒顯示顏色</title>
        <link>https://note.laurance.ml/p/centos-%E7%9B%AE%E9%8C%84%E6%B2%92%E9%A1%AF%E7%A4%BA%E9%A1%8F%E8%89%B2/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/centos-%E7%9B%AE%E9%8C%84%E6%B2%92%E9%A1%AF%E7%A4%BA%E9%A1%8F%E8%89%B2/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/centos-%E7%9B%AE%E9%8C%84%E6%B2%92%E9%A1%AF%E7%A4%BA%E9%A1%8F%E8%89%B2/100.png" alt="Featured image of post CentOS-目錄沒顯示顏色" /&gt;&lt;pre&gt;&lt;code&gt;yum install coreutils --allowerasing &amp;amp;&amp;amp; or dnf install
scp DIR_COLORS root@172.17.0.2:~
mv DIR_COLORS ~/.dir_colors
reboot
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>CentOS6-修改yum源</title>
        <link>https://note.laurance.ml/p/centos6-%E4%BF%AE%E6%94%B9yum%E6%BA%90/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/centos6-%E4%BF%AE%E6%94%B9yum%E6%BA%90/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/centos6-%E4%BF%AE%E6%94%B9yum%E6%BA%90/100.png" alt="Featured image of post CentOS6-修改yum源" /&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;sed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;s/^mirrorlist=http:\/\/mirrorlist.centos.org/#mirrorlist=http:\/\/mirrorlist.centos.org/g&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;yum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;repos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CentOS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Base&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;repo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;sed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;s/^#baseurl=http:\/\/mirror.centos.org/baseurl=http:\/\/vault.centos.org/g&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;yum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;repos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CentOS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Base&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;repo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-Crontab實現以秒為單位排程</title>
        <link>https://note.laurance.ml/p/linux-crontab%E5%AF%A6%E7%8F%BE%E4%BB%A5%E7%A7%92%E7%82%BA%E5%96%AE%E4%BD%8D%E6%8E%92%E7%A8%8B/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-crontab%E5%AF%A6%E7%8F%BE%E4%BB%A5%E7%A7%92%E7%82%BA%E5%96%AE%E4%BD%8D%E6%8E%92%E7%A8%8B/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-crontab%E5%AF%A6%E7%8F%BE%E4%BB%A5%E7%A7%92%E7%82%BA%E5%96%AE%E4%BD%8D%E6%8E%92%E7%A8%8B/100.png" alt="Featured image of post Linux-Crontab實現以秒為單位排程" /&gt;&lt;pre&gt;&lt;code&gt;方法一	(設置crontab)

EX:	(每10秒執行一次)
#* * * * * php /root/test/php/crontab/tolog.php
#* * * * * sleep 10; php /root/test/php/crontab/tolog.php
#* * * * * sleep 20; php /root/test/php/crontab/tolog.php
#* * * * * sleep 30; php /root/test/php/crontab/tolog.php
#* * * * * sleep 40; php /root/test/php/crontab/tolog.php
#* * * * * sleep 50; php /root/test/php/crontab/tolog.php

方法二 	(設置腳本shell)

EX:	(最多每2秒執行)

#/bin/bash

step=2 #間隔的秒數
for (( i=0; i &amp;lt; 60; i=(i+step) )); do

XXX

sleep $step
done

exit 0
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-Iptables參數</title>
        <link>https://note.laurance.ml/p/linux-iptables%E5%8F%83%E6%95%B8/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-iptables%E5%8F%83%E6%95%B8/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-iptables%E5%8F%83%E6%95%B8/100.jpg" alt="Featured image of post Linux-Iptables參數" /&gt;&lt;pre&gt;&lt;code&gt;參數說明：

-F ：清除所有的已訂定的規則；

-X ：殺掉所有使用者建立的 tables ；

-Z ：將所有的 chain 的計數與流量統計都歸零 

-N ：建立新的規則鏈(chain)

-E ：更改指定的規則鏈(chain)名稱

-A ：追加規則:新增規則到某個規則鏈中，該規則將會成為規則鏈中的最後一條規則

-R ：修改規則--&amp;gt;iptables -R INPUT 1 -s 192.168.12.0 -j DROP 取代現行規則，順序不變(1是位置)

-I ：插入規則--&amp;gt;iptables -I INPUT 1 --dport 80 -j ACCEPT 插入一條規則，原本位置上的規則將會往後移動一個順位

-L ：查看規則--&amp;gt;iptables -L INPUT 列出規則鏈中的所有規則

-P ：policy , 定義過濾政策。 也就是未符合過濾條件之封包，預設的處理方式

-t ：參數後跟上要單獨查看的表名 $IPTABLES -F -t nat (清空nat表)

-p ：協定：tcp、upd、icmp...

-m ：模組：state、mac、limit、owner、multiport...

-m state --state :

新的（NEW） — 某個封包請求開啟新的連線，例如 HTTP 請求。

已建立（ESTABLISHED） — 屬於某個現有連線的封包。

相關的（RELATED） — 屬於現有連線的封包，請求開啟一個新的連線，例如被動式 FTP 的連線，其連接埠為 20；但資料傳輸埠則是 1024 以上，未使用的連接埠。

無效的（INVALID） — 在連結追蹤表中，不屬於任何連線的封包。

lo  : 只要是本机进程内相互访问的，都会去到lo这张网卡上，所以在外部IP时对于iptables选择的是eth0这样的网卡，要捕获本机时是lo这个网卡

-o ：網路介面：-o 為 out 網路介面就填 eth0... (用於 POSTROUTING、OUTPUT、FORWARD)

-i ：網路介面：-i 為 in 網路介面就填 eth0... (用於 PREROUTING、INPUT、FORWARD)

-s ：來源：可為 IP Address、IP 網段、網域名稱

--sport：指定封包來源 Port、Port Range (配合 -p tcp、-p udp)

-d ：目的地：可為 IP、IP 網段、網域名稱

--dport：指定封包目的地 Port、Port Range (配合 -p tcp、-p udp)

-j ：政策 / 目標：ACCEPT、DROP、REJECT、SNAT、DNAT、MASQUERADE、REDIRECT、RETURN...
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-Iptables常用語法</title>
        <link>https://note.laurance.ml/p/linux-iptables%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-iptables%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-iptables%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/100.jpg" alt="Featured image of post Linux-Iptables常用語法" /&gt;&lt;pre&gt;&lt;code&gt;iptables -A [規則] [-s 要動作的IP] [-d 目的地IP] [-p 協定] [-j 動作]

查看目前設定
iptables -nL

清除所有規則鏈中的規則
iptables -F	(不能透過SSH操作,不然會鎖住)

清除使用者自訂鏈中的規則
iptables -X	(不能透過SSH操作,不然會鎖住)

清除mangle表中，所有規則鏈中的規則
iptables -F -t mangle	(不能透過SSH操作,不然會鎖住)


查看IP鎖了幾個
iptables -n --list pig|wc -l

查看此IP有沒有被鎖在裡面
iptables -nL |grep XXX

增加規則except允許此IP 80 port通過
iptables -A except -p tcp -s XXX/32 --dport 80 -j ACCEPT

刪除規則pig此IP
iptables -D pig -s XXX -j DROP

查看INPUT裡的規則此IP
iptables -L INPUT -n --line-numbers |grep &amp;quot;XXX&amp;quot;

以數字的方式顯示pig的總數
iptables -n --list pig|wc -l

新建機器執行增加火牆規則
./root/iptables/ipfish.sh

iptables 刪除某行規則
增加此行規則

iptables -A INPUT -s 123.123.123.123 -j DROP # 將 123.123.123.123 全部擋掉
列出所有規則，前面加上行號

iptables -L INPUT -n --line-numbers
要刪除某一行的規則

iptables -D INPUT 1 # 若只有上述那行，那就是 1
iptables -D INPUT 3 # 若有多行，只要刪除第三行

保存iptables規則
iptables-save &amp;gt;rules-0
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-Logrotate 參數</title>
        <link>https://note.laurance.ml/p/linux-logrotate-%E5%8F%83%E6%95%B8/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-logrotate-%E5%8F%83%E6%95%B8/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-logrotate-%E5%8F%83%E6%95%B8/100.png" alt="Featured image of post Linux-Logrotate 參數" /&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;daily ：指定轉儲週期爲每天
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;weekly ：指定轉儲週期爲每週
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;monthly ：指定轉儲週期爲每月
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rotate count ：指定日誌文件刪除之前轉儲的次數，0 指沒有備份，5 指保留 5 個備份
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tabooext [+] list：讓 logrotate 不轉儲指定擴展名的文件，缺省的擴展名是：.rpm-orig, .rpmsave, v, 和～
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;missingok：在日誌輪循期間，任何錯誤將被忽略，例如 “文件無法找到” 之類的錯誤。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;size size：當日志文件到達指定的大小時才轉儲，bytes (缺省) 及 KB (sizek) 或 MB (sizem)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;compress： 通過 gzip 壓縮轉儲以後的日誌
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nocompress： 不壓縮
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;copytruncate：用於還在打開中的日誌文件，把當前日誌備份並截斷
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nocopytruncate： 備份日誌文件但是不截斷
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;create mode owner group ： 轉儲文件，使用指定的文件模式創建新的日誌文件
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nocreate： 不建立新的日誌文件
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;delaycompress： 和 compress 一起使用時，轉儲的日誌文件到下一次轉儲時才壓縮
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nodelaycompress： 覆蓋 delaycompress 選項，轉儲同時壓縮。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;errors address ： 專儲時的錯誤信息發送到指定的 Email 地址
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ifempty ：即使是空文件也轉儲，這個是 logrotate 的缺省選項。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;notifempty ：如果是空文件的話，不轉儲
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mail address ： 把轉儲的日誌文件發送到指定的 E-mail 地址
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nomail ： 轉儲時不發送日誌文件
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;olddir directory：儲後的日誌文件放入指定的目錄，必須和當前日誌文件在同一個文件系統
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;noolddir： 轉儲後的日誌文件和當前日誌文件放在同一個目錄下
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;prerotate/endscript： 在轉儲以前需要執行的命令可以放入這個對，這兩個關鍵字必須單獨成行
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    EX: log保留三天,執行完以上重啟
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    /usr/local/web/nginx/logs/*.acc {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        daily
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        rotate 3
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        create
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        sharedscripts
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        postrotate
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;             /usr/local/web/nginx/sbin/nginx -s reload
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        endscript
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-Nodejs-安裝</title>
        <link>https://note.laurance.ml/p/linux-nodejs-%E5%AE%89%E8%A3%9D/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-nodejs-%E5%AE%89%E8%A3%9D/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-nodejs-%E5%AE%89%E8%A3%9D/100.png" alt="Featured image of post Linux-Nodejs-安裝" /&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yum install epel-release
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yum install nodejs
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget https://nodejs.org/download/release/v8.9.4/node-v8.9.4-linux-x64.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tar --strip-components 1 -xzvf node-v* -C /usr/local
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;node -v
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;npm -v&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-Telegraf-蒐集資料至InfluxDB</title>
        <link>https://note.laurance.ml/p/linux-telegraf-%E8%92%90%E9%9B%86%E8%B3%87%E6%96%99%E8%87%B3influxdb/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-telegraf-%E8%92%90%E9%9B%86%E8%B3%87%E6%96%99%E8%87%B3influxdb/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-telegraf-%E8%92%90%E9%9B%86%E8%B3%87%E6%96%99%E8%87%B3influxdb/100.png" alt="Featured image of post Linux-Telegraf-蒐集資料至InfluxDB" /&gt;&lt;pre&gt;&lt;code&gt;新增yum源

tee  /etc/yum.repos.d/influxdb.repo &amp;lt;&amp;lt;-&#39;EOF&#39;
[influxdb]
name = InfluxDB Repository - RHEL \$releasever
baseurl = https://repos.influxdata.com/rhel/6Server/x86_64/stable
enabled = 1
gpgcheck = 1
gpgkey = https://repos.influxdata.com/influxdb.key
EOF


安裝telegraf服務
yum -y install telegraf

安裝telnet測試連線
yum -y install telnet

修改設定
vim /etc/telegraf/telegraf.conf

[[outputs.influxdb]]
  urls = [&amp;quot;http://XXX.XXX.XXX.XXX:8086&amp;quot;]
  database = &amp;quot;XXX&amp;quot;
  username = &amp;quot;XXX&amp;quot;
  password = &amp;quot;XXX&amp;quot;
  
  增加監控模組
[[inputs.net]]
[[inputs.netstat]]

確認telegraf-server 的 8086 port有通
telnet XXX.XXX.XXX.XXX 8086 
-----------------------------------------------------------------------
啟動 telegraf
service telegraf start
--------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-VIM常用指令</title>
        <link>https://note.laurance.ml/p/linux-vim%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-vim%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-vim%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/100.png" alt="Featured image of post Linux-VIM常用指令" /&gt;&lt;pre&gt;&lt;code&gt;vim /etc/vimrc 標註行數 
第 10 行加上 set nu

###############################################################################################

1. 選定文字塊。使用v進入可視模式,移動游標鍵選定內容。 

 

2.複製的命令是y,即yank(提起) ,常用的命令如下: 

    y      在使用v模式選定了某一塊的時候,複製選定塊到緩衝區用; 

    yy    複製整行(nyy或者yny ,複製n行,n為數字); 

    y^   複製當前到行頭的內容; 

    y$    複製當前到行尾的內容; 

    yw   複製一個word (nyw或者ynw,複製n個word,n為數字); 

    yG    複製至檔尾(nyG或者ynG,複製到第n行,例如1yG或者y1G,複製到檔尾)  

    

3. 剪下的命令是d,即delete,d與y命令基本類似,所以兩個命令用法一樣,包括含有數字的用法.  

    d      剪下選定塊到緩衝區; 

    dd    剪下整行 

    d^    剪下至行首 

    d$     剪下至行尾 

    dw    剪下一個word 

    dG     剪下至檔尾  

    

4. 貼上的命令式p,即put(放下) 

    p      小寫p代表貼至遊標後(下),因為遊標是在具體字元的位置上,所以實際是在該字元的後面 

    P      大寫P代表貼至遊標前(上) 

    整行的複製貼上在遊標的上(下)一行,非整行的複製則是貼上在遊標的前(後)

 

注: 

     在正則表示式中,^表示匹配字串的開始位置,$表示匹配字串的結束位置。 

     命令前面加數字表示重複的次數,加字母表示使用的緩衝區名稱。使用英文句號&amp;quot;.&amp;quot;可以重複上一個命令。 

     在複製貼上時,另一組常用的命令是u(撤銷操作),U(撤銷某一行最近所有修改),Ctrl+R(重做),這些功能主要是vim中的,vi中略有差別

###############################################################################################
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-刪除殭屍程序</title>
        <link>https://note.laurance.ml/p/linux-%E5%88%AA%E9%99%A4%E6%AE%AD%E5%B1%8D%E7%A8%8B%E5%BA%8F/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E5%88%AA%E9%99%A4%E6%AE%AD%E5%B1%8D%E7%A8%8B%E5%BA%8F/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E5%88%AA%E9%99%A4%E6%AE%AD%E5%B1%8D%E7%A8%8B%E5%BA%8F/100.png" alt="Featured image of post Linux-刪除殭屍程序" /&gt;&lt;p&gt;找出殭屍程序&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ps -Al | grep -w Z
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;從找到的程序資訊中，分析出 pid&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ps -Al | grep -w Z | awk &#39;{print $4}&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;將分析出來的 pid 串連成一個陣列&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ps -Al | grep -w Z | awk &#39;{print $4}&#39; | xargs
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;將陣列中的每一個 pid 的程序，利用 kill 來終止、刪除它們&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ps -Al | grep -w Z | awk &#39;{print $4}&#39; | xargs sudo kill -9
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;若再跑一次 ps -Al | grep -w Z 還是看到有 zombie process&lt;/p&gt;
&lt;p&gt;先確認父程序資訊&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ps -Al | grep -w Z | awk &#39;{print $5}&#39; | xargs ps -lp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;再確認相依的子程序資訊&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ps -Al | grep -w Z | awk &#39;{print $5}&#39; | xargs ps -l --ppid
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果其中沒有重要程序或是其他正在執行中程序的話，就可以安心地將父程序給刪除掉&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ps -Al | grep -w Z | awk &#39;{print $5}&#39; | xargs sudo kill -9
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-安裝telegraf-agent實現監控</title>
        <link>https://note.laurance.ml/p/linux-%E5%AE%89%E8%A3%9Dtelegraf-agent%E5%AF%A6%E7%8F%BE%E7%9B%A3%E6%8E%A7/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E5%AE%89%E8%A3%9Dtelegraf-agent%E5%AF%A6%E7%8F%BE%E7%9B%A3%E6%8E%A7/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E5%AE%89%E8%A3%9Dtelegraf-agent%E5%AF%A6%E7%8F%BE%E7%9B%A3%E6%8E%A7/100.png" alt="Featured image of post Linux-安裝telegraf-agent實現監控" /&gt;&lt;pre&gt;&lt;code&gt;新增yum源
tee  /etc/yum.repos.d/influxdb.repo &amp;lt;&amp;lt;-&#39;EOF&#39;
[influxdb]
name = InfluxDB Repository - RHEL \$releasever
baseurl = https://repos.influxdata.com/rhel/6Server/x86_64/stable
enabled = 1
gpgcheck = 1
gpgkey = https://repos.influxdata.com/influxdb.key
EOF

安裝telegraf服務
yum -y install telegraf
yum -y install telnet


修改設定
vim /etc/telegraf/telegraf.conf

[[outputs.influxdb]]
  urls = [&amp;quot;http://172.15.1.251:8086&amp;quot;]
  database = &amp;quot;telegraf&amp;quot;
  username = &amp;quot;telegraf&amp;quot;
  password = &amp;quot;metrics&amp;quot;
[[inputs.net]]
[[inputs.netstat]]


確認telegraf-server 的 8086 port有通
telnet 172.15.1.251 8086 
-----------------------------------------------------------------------
啟動 telegraf
service telegraf start
--------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-新增SWAP記憶體</title>
        <link>https://note.laurance.ml/p/linux-%E6%96%B0%E5%A2%9Eswap%E8%A8%98%E6%86%B6%E9%AB%94/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E6%96%B0%E5%A2%9Eswap%E8%A8%98%E6%86%B6%E9%AB%94/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E6%96%B0%E5%A2%9Eswap%E8%A8%98%E6%86%B6%E9%AB%94/100.png" alt="Featured image of post Linux-新增SWAP記憶體" /&gt;&lt;pre&gt;&lt;code&gt;解決RAM不足問題 - 在 LINUX 新增 SWAP 虛擬記憶體

以一台 1Gb 記憶體的主機而言，我們在這裡建立 2G的 Swap 虛擬記憶體儲存空間

cd /
fallocate -l 2G swapfile
chmod 600 swap-sda1

初始化 Swap 空間

透過 mkswap 將 /swapfile 建立為 Linux 交換區，讓這個資料夾被分割為一個磁碟區

mkswap /swapfile

啟動交換區

swapon /swapfile

開機啟動

swapon -s

如果不使用，可透過以下指令終止：

sudo swapoff /swapfile

如果想先主要以實體記憶體為主，swap 為輔，可以透過 swappiness 來設定分配方式

sysctl vm.swappiness=10 &amp;gt;&amp;gt; 預設通常會是 60 （值越高，表示會越優先使用 swap，範圍 0~100）

開機自動設定

echo &amp;quot;vm.swappiness=10&amp;quot; &amp;gt;&amp;gt; /etc/sysctl.conf&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-查看當前文件目錄大小</title>
        <link>https://note.laurance.ml/p/linux-%E6%9F%A5%E7%9C%8B%E7%95%B6%E5%89%8D%E6%96%87%E4%BB%B6%E7%9B%AE%E9%8C%84%E5%A4%A7%E5%B0%8F/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E6%9F%A5%E7%9C%8B%E7%95%B6%E5%89%8D%E6%96%87%E4%BB%B6%E7%9B%AE%E9%8C%84%E5%A4%A7%E5%B0%8F/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E6%9F%A5%E7%9C%8B%E7%95%B6%E5%89%8D%E6%96%87%E4%BB%B6%E7%9B%AE%E9%8C%84%E5%A4%A7%E5%B0%8F/100.png" alt="Featured image of post Linux-查看當前文件目錄大小" /&gt;&lt;pre&gt;&lt;code&gt;查看当前文件目录各个文件夹大小
du -h --max-depth=1 |sort -hr (排序)

查看指定目錄  
du -h --max-depth=1 /path

查看當層目錄
du -h - .

深入到第一層目錄
--max-depth=1

查看當前目錄下user目錄的大小，并不想看其他目錄以及其子目錄
du -sh user

要通過以1024字節為單位顯示一個目錄樹及其每個子樹的磁盤使用情况
du -k /home/linux

以MB為單位顯示一個目錄樹及其每個子樹的磁盤使用情况
du -m /home/linux

以GB為單位顯示一個目錄樹及其每個子樹的磁盤使用情况
du -g /home/linux

列出當前目錄中的目錄名不包括xyz字符串的目錄的大小
du -h --exclude=&#39;*xyz*&#39;

只顯示一個目錄樹的全部磁盤使用情况
du -s /home/linux
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-機器登入二階段認證MFA</title>
        <link>https://note.laurance.ml/p/linux-%E6%A9%9F%E5%99%A8%E7%99%BB%E5%85%A5%E4%BA%8C%E9%9A%8E%E6%AE%B5%E8%AA%8D%E8%AD%89mfa/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E6%A9%9F%E5%99%A8%E7%99%BB%E5%85%A5%E4%BA%8C%E9%9A%8E%E6%AE%B5%E8%AA%8D%E8%AD%89mfa/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E6%A9%9F%E5%99%A8%E7%99%BB%E5%85%A5%E4%BA%8C%E9%9A%8E%E6%AE%B5%E8%AA%8D%E8%AD%89mfa/100.png" alt="Featured image of post Linux-機器登入二階段認證MFA" /&gt;&lt;pre&gt;&lt;code&gt;手機先下載APP

app store: Twilio Authy
googleplay store: Twilio Authy 2-Factor Authentication
------------------------------------------------------------ 
輸入使用要設定的帳號輸入
su - nadal
$ google-authenticator &amp;gt; 按y按到結束 &amp;gt;帳號家目錄下面會有一支 .google_authenticator
#mkdir /home/gauth/username/
將 .google_authenticator 移動到/home/gauth/username/ 下面
#mv  /home/username/.google_authenticator /home/gauth/username/
權限改給root 
#chown root.root /home/gauth/username/.google_authenticator

再將上面顯示的網址
輸入到瀏覽器即可得到一張QR Code
再使用APP掃瞄那張QR Code即可成功加入設定
------------------------------------------------------------
使用XShell登入時
選擇下面的 keyboard Interactive 登入
第一次輸入密碼 第二次輸入 APP顯示的六位數字 即可登入


機器服務安裝教學:
https://shenyu.me/2016/09/05/centos-google-authenticator.html
---------------------------------------------------------------------------------------------------
機器服務安裝步驟
安裝依賴套件
yum -y install gcc make pam-devel libpng-devel libtool wget git

直接安裝EPEL源RPM包
#CentOS 6
rpm -Uvh http://mirrors.ustc.edu.cn/fedora/epel/epel-release-latest-6.noarch.rpm
# CentOS 7
rpm -Uvh http://mirrors.ustc.edu.cn/fedora/epel/epel-release-latest-7.noarch.rpm

安裝Qrencode，谷歌身份驗證器需要調用該程序生成二維碼並顯示
yum install -y qrencode

安裝谷歌身份驗證器
git clone https://github.com/google/google-authenticator-libpam.git
cd google-authenticator-libpam/

編譯並安裝
./bootstrap.sh
./configure --prefix=/usr/local/google-authenticator
make &amp;amp;&amp;amp; make install

複製google身份驗證器pam模塊到系統下
cp /usr/local/google-authenticator/lib/security/pam_google_authenticator.so /lib64/security/

建立指令連結到環境變數
ln -s /usr/local/google-authenticator/bin/google-authenticator  /usr/bin/

配置/etc/pam.d/sshd
在 auth       substack     password-auth 下面
新增
auth       required     pam_google_authenticator.so user=root secret=/home/gauth/${USER}/.google_authenticator  nullok

配置SSH服務
vim /etc/ssh/sshd_config
修改以下參數
ChallengeResponseAuthentication yes
PasswordAuthentication no
PubkeyAuthentication yes
UsePAM yes

重啟ssh服務
service sshd restart
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>Linux-設定logrotate 輪詢</title>
        <link>https://note.laurance.ml/p/linux-%E8%A8%AD%E5%AE%9Alogrotate-%E8%BC%AA%E8%A9%A2/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/linux-%E8%A8%AD%E5%AE%9Alogrotate-%E8%BC%AA%E8%A9%A2/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/linux-%E8%A8%AD%E5%AE%9Alogrotate-%E8%BC%AA%E8%A9%A2/100.png" alt="Featured image of post Linux-設定logrotate 輪詢" /&gt;&lt;p&gt;建立 &lt;code&gt;logrotate&lt;/code&gt; 目錄&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /root/logrotate/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;建立 shell&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /root/logrotate/logrotate.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;ch&#34;&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;ch&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;/usr/sbin/logrotate -f /root/logrotate/weblog&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;建立要輪詢的設定檔&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /root/logrotate/weblog
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;/usr/local/web/nginx/logs/*.acc {&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;daily&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;rotate&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;create&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;sharedscripts&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;postrotate&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;             &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;usr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;local&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;web&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;nginx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sbin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;nginx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;reload&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;endscript&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;   
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;建立排程&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;crontab -e
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;05&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sh&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;logrotate&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;logrotate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;參數&lt;/th&gt;
&lt;th&gt;說明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;daily&lt;/td&gt;
&lt;td&gt;表示每日一份&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;create&lt;/td&gt;
&lt;td&gt;輪替之後，自動建立新的記錄檔&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;minsize&lt;/td&gt;
&lt;td&gt;大小超過100k，才會發生滾動，即使時間沒到下一個滾動週期內，也不會發生滾動&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;maxsize&lt;/td&gt;
&lt;td&gt;大小超過100k，即使時間沒到下一個滾動週期內，也會發生滾動&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;dateext&lt;/td&gt;
&lt;td&gt;%Y%m%d作為字尾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;rotate 5&lt;/td&gt;
&lt;td&gt;保留最近的5個備份&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;compress&lt;/td&gt;
&lt;td&gt;切換之後壓縮.tar.gz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;create 644 root root&lt;/td&gt;
&lt;td&gt;權限壓644 root&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sharedscripts&lt;/td&gt;
&lt;td&gt;整個日誌組執行一次&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;postrotate&lt;/td&gt;
&lt;td&gt;在與 endscript 的區間內是 rotate 結束後會執行的指令&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;endscript&lt;/td&gt;
&lt;td&gt;同上&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;copytruncate&lt;/td&gt;
&lt;td&gt;用於還在打開中的日誌文件，把當前日誌備份並截斷&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;missingok&lt;/td&gt;
&lt;td&gt;大小超過100k，才會發生滾動，即使時間沒到下一個滾動週期內，也不會發生滾動&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;參數&lt;/th&gt;
&lt;th&gt;說明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-d, &amp;ndash;debug&lt;/td&gt;
&lt;td&gt;debug 模式，測試配置文件是否有錯誤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-f, &amp;ndash;force&lt;/td&gt;
&lt;td&gt;強制轉儲文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-m, &amp;ndash;mail=command&lt;/td&gt;
&lt;td&gt;壓縮日誌後，發送日誌到指定郵箱&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-s, &amp;ndash;state=statefile&lt;/td&gt;
&lt;td&gt;使用指定的狀態文件&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v, &amp;ndash;verbose&lt;/td&gt;
&lt;td&gt;顯示轉儲過程&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;查看執行狀態

cat /var/lib/logrotate/logrotate.status
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>shell script-偵測telegraf服務</title>
        <link>https://note.laurance.ml/p/shell-script-%E5%81%B5%E6%B8%ACtelegraf%E6%9C%8D%E5%8B%99/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/shell-script-%E5%81%B5%E6%B8%ACtelegraf%E6%9C%8D%E5%8B%99/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/shell-script-%E5%81%B5%E6%B8%ACtelegraf%E6%9C%8D%E5%8B%99/100.png" alt="Featured image of post shell script-偵測telegraf服務" /&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;l&#34;&gt;step=2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#間隔的秒數&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TOKEN=&amp;#34;XXX&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;message=&amp;#34;%0D%0A TEST-222 Telegraf offline&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;l_process=`ps aux |grep telegraf |grep -v &amp;#39;grep&amp;#39;|awk &amp;#39;{print $2}&amp;#39;`&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;curl -i -XPOST &amp;#39;http://localhost:8086/query?db=telegraf&amp;#39;   --data-urlencode &amp;#34;q=drop series  FROM &amp;#34;live&amp;#34;  where &amp;#34;host&amp;#34;=&amp;#39;222&amp;#39; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;for (( i=0; i &amp;lt; 60; i=(i+step) )); do&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;if [ ! -n &amp;#34;$l_process&amp;#34; ]; then&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;curl -i -XPOST &amp;#39;http://localhost:8086/write?db=telegraf&amp;#39;   --data-binary &amp;#39;live,host=222 value=0&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;curl https://notify-api.line.me/api/notify -H &amp;#34;Authorization: Bearer ${TOKEN}&amp;#34; -d &amp;#34;message=${message}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;curl -i -XPOST &amp;#39;http://localhost:8086/write?db=telegraf&amp;#39;   --data-binary &amp;#39;live,host=222 value=1&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;fi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sleep $step&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;exit 0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;

</description>
        </item>
        <item>
        <title>shell script-抓youtube影片腳本</title>
        <link>https://note.laurance.ml/p/shell-script-%E6%8A%93youtube%E5%BD%B1%E7%89%87%E8%85%B3%E6%9C%AC/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/shell-script-%E6%8A%93youtube%E5%BD%B1%E7%89%87%E8%85%B3%E6%9C%AC/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/shell-script-%E6%8A%93youtube%E5%BD%B1%E7%89%87%E8%85%B3%E6%9C%AC/100.png" alt="Featured image of post shell script-抓youtube影片腳本" /&gt;&lt;h1 id=&#34;抓影片腳本-youtubepornhhub-&#34;&gt;抓影片腳本 (youtube,pornhhub &amp;hellip;&amp;hellip;)&lt;/h1&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;#!/bin/bash&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#date=`date +%Y%m%d`&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;binpath=&amp;#34;/usr/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;savedpath=&amp;#34;/home/videorecord&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;youtubedl=&amp;#34;$binpath/python $savedpath/youtube_dl/__main__.py&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;while [ &amp;#34;$anser&amp;#34; != &amp;#34;y&amp;#34; -a &amp;#34;$anser&amp;#34; != &amp;#34;Y&amp;#34; ]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;do&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;while &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;do&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;		&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;while &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;do&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;			&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;while &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;			&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;do&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;				&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;while &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;				&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;do&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;    &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;read -p &amp;#34;請輸入要下載或裁切影片的日期   ex:20230226: &amp;#34; datee&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo $datee | egrep -q &amp;#39;^[[:digit:]]{8}$&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;if [ &amp;#34;$?&amp;#34; == &amp;#34;0&amp;#34; ]; then&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;						&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;						&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;						&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;日期輸入錯誤 please try again...&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;						&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;fi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;				&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;				&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;if [ ! -f &amp;#34;${datee}NSV.mp4&amp;#34; ]; then&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;read -p &amp;#34;請輸入要下載影片的 &amp;#34;m3u8&amp;#34; : &amp;#34; m3u8&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;$youtubedl -F $m3u8&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;if [ &amp;#34;$?&amp;#34; != &amp;#34;0&amp;#34; ];then&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;						&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;exit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;fi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;read -p &amp;#34;請輸入要下載影片的 format code : &amp;#34; formatcode&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;$youtubedl $m3u8 -f $formatcode -o $savedpath/${datee}NSV.mp4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;code3=&amp;#34;$?&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;				&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;code3=&amp;#34;666&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;${datee}NSV.mp4 已存在 , 準備裁切影片&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;				&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;fi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;			&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;			&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;			&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;case $code3 in&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;				&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;				&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;666&amp;#34;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;			&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;*)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;				&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;exit 1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;					&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;			&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;esac&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;			&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;		
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;		&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;        &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;read -p &amp;#34;請輸入開始裁切時間   ex:00:00:00 : &amp;#34; starting&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;read -p &amp;#34;請輸入結束裁切時間   ex:00:00:00 : &amp;#34; ending&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo $starting | egrep -q &amp;#39;^[[:digit:]]{2}\:[[:digit:]]{2}\:[[:digit:]]{2}$&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;code1=&amp;#34;$?&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo $ending | egrep -q &amp;#39;^[[:digit:]]{2}\:[[:digit:]]{2}\:[[:digit:]]{2}$&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;code2=&amp;#34;$?&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#		echo &amp;#34;$code1&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#		echo &amp;#34;$code2&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;if [ &amp;#34;$code1&amp;#34; -a &amp;#34;$code2&amp;#34; == &amp;#34;0&amp;#34; ]; then&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;			&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;時間格式輸入錯誤 please try again...&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;			&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;continue&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;fi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;===========================================&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;     請確認開始裁切時間為:   $starting&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;     請確認結束裁切時間為:   $ending&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;===========================================&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;read -p &amp;#34;are you sure [y or n] :&amp;#34; anser&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;endd=$(date -d &amp;#34;$ending&amp;#34; +%s)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;startt=$(date -d &amp;#34;$starting&amp;#34; +%s)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;second=$(($endd-$startt))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;if [ &amp;#34;$second&amp;#34; -gt &amp;#34;0&amp;#34; ]; then&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;$binpath/ffmpeg -i $savedpath/${datee}NSV.mp4 -ss $starting -t $second -c copy $savedpath/${datee}TBL.mp4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo -e &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;======================================================================&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo -e &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo -e &amp;#34;請確認影片是否上傳: &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo -e &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo -e &amp;#34;$VIDEOURL/$dateeTBL.mp4&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo -e &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;======================================================================&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo -e &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;錄製時間輸入錯誤 please try again...&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;	&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34; &amp;#34;	&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;fi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;

</description>
        </item>
        <item>
        <title>shell script-新增使用者</title>
        <link>https://note.laurance.ml/p/shell-script-%E6%96%B0%E5%A2%9E%E4%BD%BF%E7%94%A8%E8%80%85/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/shell-script-%E6%96%B0%E5%A2%9E%E4%BD%BF%E7%94%A8%E8%80%85/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/shell-script-%E6%96%B0%E5%A2%9E%E4%BD%BF%E7%94%A8%E8%80%85/100.png" alt="Featured image of post shell script-新增使用者" /&gt;&lt;pre&gt;&lt;code&gt;#!/bin/bash

while [ &amp;quot;i&amp;quot; != &amp;quot;1&amp;quot; ]
do
echo -n new user name:

read name

useradd $name

echo &amp;quot;123456&amp;quot; | passwd --stdin $name

echo finish new user name is:$name
done


sed -i &amp;quot;s/GSSAPIAuthentication yes/GSSAPIAuthentication no/g&amp;quot; /etc/ssh/sshd_config
sed -i &amp;quot;s/#UseDNS yes/UseDNS no/g&amp;quot; /etc/ssh/sshd_config
service sshd restart
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>shell script-清除內部解析暫存</title>
        <link>https://note.laurance.ml/p/shell-script-%E6%B8%85%E9%99%A4%E5%85%A7%E9%83%A8%E8%A7%A3%E6%9E%90%E6%9A%AB%E5%AD%98/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/shell-script-%E6%B8%85%E9%99%A4%E5%85%A7%E9%83%A8%E8%A7%A3%E6%9E%90%E6%9A%AB%E5%AD%98/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/shell-script-%E6%B8%85%E9%99%A4%E5%85%A7%E9%83%A8%E8%A7%A3%E6%9E%90%E6%9A%AB%E5%AD%98/100.png" alt="Featured image of post shell script-清除內部解析暫存" /&gt;&lt;pre&gt;&lt;code&gt;#!/bin/bash

rndc flush
service named restart
rndc flush
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>shell-script-偵測 mysql 服務是否正常運作</title>
        <link>https://note.laurance.ml/p/shell-script-%E5%81%B5%E6%B8%AC-mysql-%E6%9C%8D%E5%8B%99%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%E9%81%8B%E4%BD%9C/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/shell-script-%E5%81%B5%E6%B8%AC-mysql-%E6%9C%8D%E5%8B%99%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%E9%81%8B%E4%BD%9C/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/shell-script-%E5%81%B5%E6%B8%AC-mysql-%E6%9C%8D%E5%8B%99%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%E9%81%8B%E4%BD%9C/100.png" alt="Featured image of post shell-script-偵測 mysql 服務是否正常運作" /&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;#!/bin/bash&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;step=2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#間隔的秒數&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TOKEN=&amp;#34;XXX&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#LINE TOKEN&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;MESSAGE1=&amp;#34;Mysql Connection Failed!! TCP:3306 offline.&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;MESSAGE2=&amp;#34;Mysql Connection Failed!! TCP:3307 offline.&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;for (( i=0;i&amp;lt;60;i=(i+step) )); do&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;quit&amp;#34; | telnet 127.0.0.1 3306 | grep &amp;#34;Escape character is&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;code1=&amp;#34;$?&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;quit&amp;#34; | telnet 127.0.0.1 3307 | grep &amp;#34;Escape character is&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;code2=&amp;#34;$?&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;if [ &amp;#34;$code1&amp;#34; -ne 0 ]; then&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;`date +%H:%M:%S` - TCP:3306 offline.&amp;#34; &amp;gt;&amp;gt; /root/line/mysql/mysql-error.txt&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;curl -X POST https://notify-api.line.me/api/notify -H &amp;#34;Authorization: Bearer ${TOKEN}&amp;#34; -d &amp;#34;message=${MESSAGE1}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                        
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;elif [ &amp;#34;$code2&amp;#34; -ne 0 ]; then&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo &amp;#34;`date +%H:%M:%S` - TCP:3307 offline.&amp;#34; &amp;gt;&amp;gt; /root/line/mysql/mysql-error.txt&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;curl -X POST https://notify-api.line.me/api/notify -H &amp;#34;Authorization: Bearer ${TOKEN}&amp;#34; -d &amp;#34;message=${MESSAGE2}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;fi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sleep $step&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;exit 0                           &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;

</description>
        </item>
        <item>
        <title>XenServer-擴充root磁區</title>
        <link>https://note.laurance.ml/p/xenserver-%E6%93%B4%E5%85%85root%E7%A3%81%E5%8D%80/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/xenserver-%E6%93%B4%E5%85%85root%E7%A3%81%E5%8D%80/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/xenserver-%E6%93%B4%E5%85%85root%E7%A3%81%E5%8D%80/100.png" alt="Featured image of post XenServer-擴充root磁區" /&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;XEN-center &amp;gt;&amp;gt; storage &amp;gt;&amp;gt; ADD disk 新增30G
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;查看各區硬碟
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;df -h
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;查看總硬碟有無新增30G
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;fdisk -l
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;檢視已經存在的pv（物理卷）
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;pvdisplay
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;檢視當前已經存在的vg（邏輯卷組）
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vgdisplay
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;檢視已經存在的lv（邏輯卷）
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;lvdisplay
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;把/dev/xvdb加入與/目錄相同的vg（邏輯卷組）
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vgextend centos /dev/xvdb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;擴容lv（邏輯卷）
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;lvextend -L +30.0GB -n /dev/mapper/centos-root
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;使其生效
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;xfs_growfs /dev/mapper/centos-root 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;df -h&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

</description>
        </item>
        <item>
        <title>XenServer-無法傳ISO映像檔</title>
        <link>https://note.laurance.ml/p/xenserver-%E7%84%A1%E6%B3%95%E5%82%B3iso%E6%98%A0%E5%83%8F%E6%AA%94/</link>
        <pubDate>Wed, 03 Aug 2022 00:00:00 +0000</pubDate>
        
        <guid>https://note.laurance.ml/p/xenserver-%E7%84%A1%E6%B3%95%E5%82%B3iso%E6%98%A0%E5%83%8F%E6%AA%94/</guid>
        <description>&lt;img src="https://note.laurance.ml/p/xenserver-%E7%84%A1%E6%B3%95%E5%82%B3iso%E6%98%A0%E5%83%8F%E6%AA%94/100.png" alt="Featured image of post XenServer-無法傳ISO映像檔" /&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;開啟windoes元件 &lt;span class=&#34;err&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;samba&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;

</description>
        </item>
        
    </channel>
</rss>
