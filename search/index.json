[{"content":"HTTP API 下面使用 GET 請求 查詢 CPU (帶 user : password)\ncurl -G \u0026#39;http://172.16.0.222:8086/query?pretty=true\u0026#39; --data-urlencode \u0026#34;db=telegraf\u0026#34; -u telegraf:telegraf --data-urlencode \u0026#34;q=SELECT * FROM \u0026#34;cpu\u0026#34; limit 1\u0026#34; 下面使用 POST 請求 創建資料庫\ncurl -i -XPOST \u0026#39;http://172.16.0.222:8086/query?pretty=true\u0026#39; -u laurance:telegraf --data-urlencode \u0026#34;q=CREATE DATABASE testdb\u0026#34; HTTP/1.1 200 OK Content-Type: application/json Request-Id: aeee08da-cc97-11ed-8be8-92b84f18e45a X-Influxdb-Build: OSS X-Influxdb-Version: 1.8.10 X-Request-Id: aeee08da-cc97-11ed-8be8-92b84f18e45a Date: Mon, 27 Mar 2023 12:05:36 GMT Transfer-Encoding: chunked { \u0026quot;results\u0026quot;: [ { \u0026quot;statement_id\u0026quot;: 0 } ] } 下面使用 POST 請求 將數據寫入 DB\ncurl -i -XPOST \u0026#39;http://172.16.0.222:8086/write?db=testdb\u0026#39; -u laurance:kiwi888 --data-binary \u0026#39;cpu_load_short,host=server01,region=us-west value=0.64 1434055562000000000\u0026#39; HTTP/1.1 204 No Content Content-Type: application/json Request-Id: 5dedeb7d-cc98-11ed-8cda-92b84f18e45a X-Influxdb-Build: OSS X-Influxdb-Version: 1.8.10 X-Request-Id: 5dedeb7d-cc98-11ed-8cda-92b84f18e45a Date: Mon, 27 Mar 2023 12:10:30 GMT 下面使用 POST 請求 將數據一起寫入 DB\ncurl -i -XPOST \u0026#39;http://172.16.0.222:8086/write?db=testdb\u0026#39; -u laurance:kiwi888 --data-binary \u0026#39;cpu_load_short,host=server01,region=us-west value=0.64 1434055562000000000 \u0026gt; cpu_load_short,host=server02,region=us-west value=0.55 1422568543702900257 \u0026gt; cpu_load_short,direction=in,host=server01,region=us-west value=2.0 1422568543702900257\u0026#39; HTTP/1.1 204 No Content Content-Type: application/json Request-Id: ccf012f8-cc98-11ed-8d78-92b84f18e45a X-Influxdb-Build: OSS X-Influxdb-Version: 1.8.10 X-Request-Id: ccf012f8-cc98-11ed-8d78-92b84f18e45a Date: Mon, 27 Mar 2023 12:13:36 GMT 下面使用 POST 請求 將文件 TXT 寫入 DB\ncurl -i -XPOST \u0026#39;http://172.16.0.222:8086/write?db=testdb\u0026#39; -u laurance:kiwi888 --data-binary @influxdb.txt HTTP/1.1 204 No Content Content-Type: application/json Request-Id: 29a9ebda-cc99-11ed-8dfa-92b84f18e45a X-Influxdb-Build: OSS X-Influxdb-Version: 1.8.10 X-Request-Id: 29a9ebda-cc99-11ed-8dfa-92b84f18e45a Date: Mon, 27 Mar 2023 12:16:11 GMT 返回代碼 說明 2xx 如果你寫了數據後收到HTTP 204 No Content，說明寫入成功了！ 4xx 表示InfluxDB不知道你發的是什麼鬼。 5xx 系統過載或是應用受損。 ","date":"2023-03-23T00:00:00Z","image":"https://note.laurance.ml/p/influxdb-http-crud-%E8%AA%9E%E6%B3%95/100_hu3943a49f3cf3881293921668d3732a89_68244_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/influxdb-http-crud-%E8%AA%9E%E6%B3%95/","title":"InfluxDB-http CRUD 語法"},{"content":"InfluxDB 預設是沒有密碼的,使用 influx 進入介面操作即可\n[root@laurance ~]# influx Connected to http://localhost:8086 version 1.8.10 InfluxDB shell version: 1.8.10 \u0026gt; \u0026gt; 建立使用者及密碼\nCREATE USER telegraf WITH PASSWORD \u0026#39;telegraf\u0026#39; CREATE USER \u0026lt;username\u0026gt; WITH PASSWORD \u0026#39;\u0026lt;password\u0026gt;\u0026#39; 給予讀的權限\nGRANT READ ON telegraf TO laurance GRANT [READ,WRITE,ALL] ON \u0026lt;database_name\u0026gt; TO \u0026lt;username\u0026gt; 查看使用者\nSHOW USERS 查看權限\nSHOW GRANTS FOR laurance 拔除 root 權限\nREVOKE ALL PRIVILEGES FROM telegraf 給予 root 權限\nGRANT ALL PRIVILEGES TO laurance 重新設置密碼\nSET PASSWORD FOR laurance = \u0026#39;influxdb4ever\u0026#39; 刪除使用者\nDROP USER laurance 將密碼驗證打開 (ps 一定要有 \u0026lsquo;\u0026lsquo;ROOT\u0026rsquo; 才能登入) 編輯設定檔 vim /etc/influxdb/influxdb.conf\n將 [http] 模快下的 [auth-enabled] 改為 true\n改完設定重啟 DB\nsystemctl restart influxdb 帶密碼登入\ninflux -username laurance -password influxdb4ever 進入介面登入\n[root@laurance ~]# influx Connected to http://localhost:8086 version 1.8.10 InfluxDB shell version: 1.8.10 \u0026gt; auth username: laurance password: \u0026gt; ","date":"2023-03-23T00:00:00Z","image":"https://note.laurance.ml/p/influxdb-%E5%BB%BA%E7%AB%8B%E4%BD%BF%E7%94%A8%E8%80%85%E5%AF%86%E7%A2%BC%E5%8F%8A%E6%AC%8A%E9%99%90/100_hu3943a49f3cf3881293921668d3732a89_68244_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/influxdb-%E5%BB%BA%E7%AB%8B%E4%BD%BF%E7%94%A8%E8%80%85%E5%AF%86%E7%A2%BC%E5%8F%8A%E6%AC%8A%E9%99%90/","title":"InfluxDB-建立使用者密碼及權限"},{"content":"建立與設定線上即時性資料庫 Firebase Realtime database https://console.firebase.google.com/u/0/\n點選 Go to console\n點選 建立專案\n輸入 專案名稱及打勾協議\n取消勾選與 Google Analytics 建立關聯，可以直接建立專案\n( 建立關聯可以透過 Google Analytics 進行數據分析統計，但如果只是要單純使用資料庫，可以不必建立關聯 )\n建立 Realtime Database 資料庫 專案建立完成後就會進入專案畫面，從左側選擇 建構 \u0026gt; Realtime Database\n選擇後，點擊建立資料庫\n資料庫的位置選擇美國 繼續下一步\n使用鎖定模式啟用 ( 鎖定模式表示這個資料庫禁止存取，啟用後會再修改設定使資料庫可以存取資料 )\n建立好的畫面\n修改 Realtime Database 存取權限 進入規則頁籤，將規則從 false 修改為 ture 點擊發布，就能將資料庫改成所有人都可以存取的狀態\n建立 GCP-Cloud Functions # requirements.txt # Function dependencies, for example: # package\u0026gt;=version line-bot-sdk requests openai git+https://github.com/ozgur/python-firebase # main.py from linebot import LineBotApi, WebhookHandler from linebot.models import TextSendMessage, StickerSendMessage, ImageSendMessage, LocationSendMessage import requests, json import openai openai.api_key = \u0026#39;XXXXXXXXXXXXXXXXXXXX\u0026#39; from firebase import firebase token = \u0026#39;XXXXXXXXX\u0026#39; secret = \u0026#39;XXXXXXXXX\u0026#39; def linebot(request): body = request.get_data(as_text=True) json_data = json.loads(body) try: line_bot_api = LineBotApi(token) handler = WebhookHandler(secret) signature = request.headers[\u0026#39;X-Line-Signature\u0026#39;] handler.handle(body, signature) tk = json_data[\u0026#39;events\u0026#39;][0][\u0026#39;replyToken\u0026#39;] timestamp = json_data[\u0026#39;events\u0026#39;][0][\u0026#39;timestamp\u0026#39;] msg_type = json_data[\u0026#39;events\u0026#39;][0][\u0026#39;message\u0026#39;][\u0026#39;type\u0026#39;] if msg_type == \u0026#39;text\u0026#39;: msg = json_data[\u0026#39;events\u0026#39;][0][\u0026#39;message\u0026#39;][\u0026#39;text\u0026#39;] url = \u0026#39;XXXXXXXXXXXXXX.firebaseio.com\u0026#39; fdb = firebase.FirebaseApplication(url, None) chatgpt = fdb.get(\u0026#39;/\u0026#39;,\u0026#39;chatgpt\u0026#39;) if chatgpt == None: messages = [] else: messages = chatgpt if msg == \u0026#39;!reset\u0026#39;: reply_msg = TextSendMessage(text=\u0026#39;對話歷史紀錄已經清空！\u0026#39;) line_bot_api.reply_message(tk,reply_msg) fdb.delete(\u0026#39;/\u0026#39;,\u0026#39;chatgpt\u0026#39;) else: messages.append({\u0026#34;role\u0026#34;:\u0026#34;user\u0026#34;,\u0026#34;content\u0026#34;:msg}) response = openai.ChatCompletion.create( model=\u0026#34;gpt-3.5-turbo\u0026#34;, max_tokens=640, temperature=0.5, messages=messages ) ai_msg = response.choices[0].message.content.replace(\u0026#39;\\n\u0026#39;,\u0026#39;\u0026#39;) messages.append({\u0026#34;role\u0026#34;:\u0026#34;assistant\u0026#34;,\u0026#34;content\u0026#34;:ai_msg}) reply_msg = TextSendMessage(text=ai_msg) line_bot_api.reply_message(tk,reply_msg) fdb.put_async(\u0026#39;/\u0026#39;,\u0026#39;chatgpt\u0026#39;,messages) else: reply_msg = TextSendMessage(text=\u0026#39;你傳的不是文字訊息啦\u0026#39;) line_bot_api.reply_message(tk,reply_msg) except Exception as e: detail = e.args[0] print(detail) return \u0026#39;OK\u0026#39; 建立好 Function 後 , 將 觸發網址 貼入 Line Developers Webhook URL 並點選 Verify 驗證\n進入 Firebase Realtime database 也能看到歷史紀錄的資料\n","date":"2023-03-22T00:00:00Z","image":"https://note.laurance.ml/p/gcp-chatgpt-%E4%B8%B2%E6%8E%A5-firebase%E5%8F%8Alinebot/100_hu955ca03f846527c7d15132e3291bde7f_39307_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/gcp-chatgpt-%E4%B8%B2%E6%8E%A5-firebase%E5%8F%8Alinebot/","title":"GCP-ChatGPT 串接 Firebase及Linebot"},{"content":"安裝依賴套件\nyum install gcc gcc-c++ readline-devel zlib-devel openssl openssl-devel 下載安裝 cmake編譯器\nwget -t 0 https://github.com/Kitware/CMake/releases/download/v3.23.1/cmake-3.23.1.tar.gz tar zxf cmake-3.23.1.tar.gz cd cmake-3.23.1 ./bootstrap \u0026amp;\u0026amp; gmake \u0026amp;\u0026amp; gmake install cmake --version 下載 postgresql-14.7 tar包\nwget https://ftp.postgresql.org/pub/source/v14.7/postgresql-14.7.tar.gz --no-check-certificate tar zxf postgresql-14.7.tar.gz cd postgresql-14.7 ./configure --prefix=/var/lib/postgresql make \u0026amp;\u0026amp; make install 新增 postgres 使用者來執行DB\nuseradd postgres 建立存放資料及LOG的位置並給予權限 for postgres\ncd /var/lib/postgresql/ mkdir data mkdir log chown -R postgres.postgres /var/lib/postgresql 添加 psql環境變數\nsu - postgres -c \u0026#34;vim ~/.bash_profile\u0026#34; $\texport PGHOME=/var/lib/postgresql $\texport PGDATA=/var/lib/postgresql/data $\texport PATH=$PATH:$JAVA_HOME/bin:$PGHOME/bin 初始化資料庫及指定存放資料位置\nsu - postgres -c \u0026#34;/var/lib/postgresql/bin/initdb -D /var/lib/postgresql/data/\u0026#34; 更改設定檔 \u0026amp;\u0026amp; 設定監聽位置\nvim /var/lib/postgresql/data/postgresql.conf listen_addresses = \u0026#39;*\u0026#39; port = 5432 設定使用者及IP段\nvim /var/lib/postgresql/data/pg_hba.conf host all rd 10.140.0.0/16 password 切換使用者 \u0026amp;\u0026amp; 啟動 PostgreSQL\nsu - postgres -c \u0026#34;/var/lib/postgresql/bin/pg_ctl start -l /var/lib/postgresql/log/pg_server.log\u0026#34; 切換使用者 \u0026amp;\u0026amp; 重啟 PostgreSQL\nsu - postgres -c \u0026#34;/var/lib/postgresql/bin/pg_ctl restart\u0026#34; 切換使用者 \u0026amp;\u0026amp; 建立 超級使用者帳號\nsu - postgres -c \u0026#34;createuser -s -i -d -l -r king\u0026#34; -s , --superuser 新使用者將是超級使用者 -i , --inherit 新角色將自動繼承其所屬角色的權限。這是預設值。 -d , --createdb 將允許新使用者建立資料庫。 -l , --login 將允許新使用者登入（即，使用者名稱可以用作初始連線使用者）。這是預設值。 -r , --createrole 將允許新使用者建立新角色（即，此使用者將具有 CREATEROLE 權限）。 切換使用者 \u0026amp;\u0026amp; 建立 普通使用者\nsu - postgres -c \u0026#34;createuser -d -l -P rd\u0026#34; -p , --pwprompt 如果有此選項，createuser 將發出新使用者密碼的提示。如果您不打算使用密碼身份驗證，則毌須執行此操作。 切換使用者 \u0026amp;\u0026amp; 進入 psql cmd\nsu - postgres -c \u0026#34;psql\u0026#34; 設定使用者 rd 對 public 新 Sequences 的預設權限\n$\tALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON SEQUENCES TO rd; 設定使用者 rd 對 public 新 表 的預設權限\n$\tALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON TABLES TO rd; PS. 要先建立 database 才能用使用者連線\n官方 yum 安裝: https://jovepater.com/article/centos-7-postgresql-14-installation/\n參考: https://pjchender.dev/database/psql-roles-privilege/\n參考: https://blog.csdn.net/zou8944/article/details/121528128\n","date":"2023-03-21T00:00:00Z","image":"https://note.laurance.ml/p/postgresql-install-postgresql-14.7-on-centos7/100_hu33d5a232e6145cf3db53180f3ae836a8_4639_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/postgresql-install-postgresql-14.7-on-centos7/","title":"Postgresql-install postgresql-14.7 on centos7"},{"content":"連接到 POSTGRESQL 資料庫 su - postgres -c \u0026#39;psql\u0026#39; 本地使用者連接 POSTGRESQL 資料庫 添加環境變數 才能用 psql 連接\npsql -d postgres -U user 連接到另一台SERVER上的資料庫 psql -h 172.16.0.223 -U test1 -d testdb 建立使用者 新建立的使用者預設只會繼承 public 角色中所開放的權限，其餘權限都沒有開放\nCREATE USER test WITH PASSWORD \u0026#39;test\u0026#39;; 禁止使用者登入 ALTER ROLE username WITH NOLOGIN; 設定使用者test擁有public預設權限 並有讀取、插入、修改、刪除新表的 預設權限 ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO test; 設定使用者test擁有public預設權限 並有使用新sequences的 預設權限 ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON SEQUENCES TO test; 把所有角色的 USAGE 權限收回 REVOKE USAGE ON SCHEMA public FROM PUBLIC; 建立資料庫 testdb CREATE DATABASE testdb; 移除資料庫每個使用者都能登入的權限 REVOKE CONNECT ON DATABASE testdb FROM public; 指定可以登入的使用者 pguser1, pguser2, pgreader GRANT CONNECT ON DATABASE testdb TO pguser1, pguser2, pgreader; 顯示最大連接數 show max_connections; 查看 alter default privileges 預設權限 \\ddp 列出有效的 schema \\dn 查看表結構 \\d table_name 列出當前資料庫所有表 \\dt 離開 \\q 參考:\nhttp://www.enmalvi.com/2022/04/03/postgresql-sql/\n","date":"2023-03-21T00:00:00Z","image":"https://note.laurance.ml/p/postgresql-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/100_hu33d5a232e6145cf3db53180f3ae836a8_4639_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/postgresql-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/","title":"Postgresql-常用指令"},{"content":"Windows 10 專業版金鑰啟用方法 {Step 1} 叫出 PSW (使用管理者身分)\nWIN + X + A {Step 2} 輸入已下指令\nslmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX slmgr /skms kms.03k.org slmgr /ato 啟用成功 ","date":"2023-03-20T00:00:00Z","image":"https://note.laurance.ml/p/windows-win10%E5%B0%88%E6%A5%AD%E7%89%88%E9%87%91%E9%91%B0/100_hue86d16e89f42e1cd25cf83156a3f9032_45736_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/windows-win10%E5%B0%88%E6%A5%AD%E7%89%88%E9%87%91%E9%91%B0/","title":"Windows-win10專業版金鑰"},{"content":"Xshell 7 - v7.0.0001 install (Cracked version) 載點 https://github.com/dingbangli/xshell7/raw/master/XshellPlus.rar\n將桌面右下角系統時間修改為 2018 年 否則會跳ERROR\n點擊安裝檔安裝版本 v7.0.0001\n安裝完成後並不能直接開啟,須覆蓋一隻檔案才能開啟\n將包裡的 nslicense.dll 覆蓋至預設路徑 C:\\Program Files (x86)\\NetSarang\\Xshell 7\n關閉自動檢查更新\n工具 \u0026gt; 選項 \u0026gt; 更新\n將天數改為最大值並取消勾勾\n最後將時間條回來即可\n查看金鑰已過的狀態\n","date":"2023-03-20T00:00:00Z","image":"https://note.laurance.ml/p/xshell-7-v7.0.0001-install/100_hue325434b9abad1332e770d87639ae219_31220_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/xshell-7-v7.0.0001-install/","title":"Xshell 7 - v7.0.0001 install"},{"content":"Xshell 7-匯出及匯入 將 工作階段 匯出成 .xts\n開啟 全新的 Xshell 將 .xts 匯入\n","date":"2023-03-20T00:00:00Z","image":"https://note.laurance.ml/p/xshell-7-%E5%8C%AF%E5%87%BA%E5%8F%8A%E5%8C%AF%E5%85%A5/100_hue325434b9abad1332e770d87639ae219_31220_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/xshell-7-%E5%8C%AF%E5%87%BA%E5%8F%8A%E5%8C%AF%E5%85%A5/","title":"Xshell 7-匯出及匯入"},{"content":"安裝編譯環境\nyum -y install pcre pcre-devel openssl openssl-devel gcc gcc-c++ zlib zlib-devel 在 Nginx 安裝包裡 下載 echo模組安裝包 \u0026amp;\u0026amp; 解壓縮\ncd /root/installation/nginx-1.21.6/ wget https://github.com/openresty/echo-nginx-module/archive/v0.61.tar.gz tar zxvf v0.61.tar.gz 查看原本的編譯參數\n/usr/local/web/nginx/sbin/nginx -V 重新編譯一次\n./configure --user=nginx --group=nginx --prefix=/usr/local/web/nginx --sbin-path=/usr/local/web/nginx/sbin/nginx --conf-path=/usr/local/web/nginx/conf/nginx.conf --error-log-path=/usr/local/web/nginx/logs/error.log --http-log-path=/usr/local/web/nginx/logs/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/lock/subsys/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-pcre --with-http_realip_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_secure_link_module --with-http_v2_module --with-http_stub_status_module --with-http_sub_module --add-module=/usr/local/incubator-pagespeed-ngx-1.13.35.2-stable/ --add-module=/usr/local/nginx-http-concat/ --with-http_geoip_module --add-module=/root/installation/nginx-1.21.6/echo-nginx-module-0.61 make #不要 make install 會重複安裝 停 nginx 服務\n/usr/local/web/nginx/sbin/nginx -s stop 將原本的執行檔備份為 nginx.bak\ncp /usr/local/web/nginx/sbin/nginx /usr/local/web/nginx/sbin/nginx.bak 將新的執行檔複製到執行路徑裡\ncp /root/installation/nginx-1.21.6/objs/nginx /usr/local/web/nginx/sbin/nginx 再次查看已編譯進去了\n/usr/local/web/nginx/sbin/nginx -V echo 模組用法: location /test { echo \u0026#34;uri = $uri\u0026#34;; echo \u0026#34;request_uri = $request_uri\u0026#34;; } ","date":"2023-03-13T00:00:00Z","image":"https://note.laurance.ml/p/nginx-%E6%B7%BB%E5%8A%A0-echo-%E6%A8%A1%E7%B5%84/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-%E6%B7%BB%E5%8A%A0-echo-%E6%A8%A1%E7%B5%84/","title":"Nginx-添加 echo 模組"},{"content":"新增搜索模塊 Algolia 配置在 hugo 上,實現本地搜索 Algolia 官方網址: https://www.algolia.com/\n{Step 1} 新建 application 及 index\n{Step 2} 紀錄 Keys 等等會用到 ( Application ID, Search-Only API Key, Admin API Key )\n{Step 3} 修改 config.yaml 主要生成 Algolia 索引\noutputFormats: Algolia: baseName: algolia isPlainText: true mediaType: application/json notAlternative: true outputs: home: [\u0026#34;HTML\u0026#34;, \u0026#34;RSS\u0026#34;, \u0026#34;Algolia\u0026#34;] params.algolia: appId: \u0026#34;Application ID\u0026#34; indexName: \u0026#34;Index name\u0026#34; searchOnlyKey: \u0026#34;Admin API Key\u0026#34; {Step 4} 在目錄下 layouts/_default 新建 list.algolia.json 文件\n{{/* 生成Algolia搜索索引文件 */}} {{- $.Scratch.Add \u0026#34;index\u0026#34; slice -}} {{/* content/posts或content/post目錄下的博文才生成索引 */}} {{- range where (where .Site.Pages \u0026#34;Type\u0026#34; \u0026#34;in\u0026#34; (slice \u0026#34;posts\u0026#34; \u0026#34;post\u0026#34;)) \u0026#34;IsPage\u0026#34; true -}} {{- if and (not .Draft) (not .Params.private) -}} {{- $.Scratch.Add \u0026#34;index\u0026#34; (dict \u0026#34;objectID\u0026#34; .File.UniqueID \u0026#34;url\u0026#34; .Permalink \u0026#34;content\u0026#34; (.Summary | plainify) \u0026#34;tags\u0026#34; .Params.Tags \u0026#34;lvl0\u0026#34; .Title \u0026#34;lvl1\u0026#34; .Params.Categories \u0026#34;lvl2\u0026#34; \u0026#34;摘要\u0026#34;) -}} {{- end -}} {{- end -}} {{- $.Scratch.Get \u0026#34;index\u0026#34; | jsonify -}} {Step 5} 目錄下執行 hugo 命令後,在 public/ 下會生成 algolia.json\n{Step 6} 將上述生成的 algolia.json 上傳至 Algolia\n{Step 7} 安裝 Atomic-Algolia (目的: 自動上傳)\n在根目錄下語法\n註：這裡需要用到 npm 套件工具，所以需要安裝 node js\nnpm init (這裡直接一直 ENTER) npm install atomic-algolia --save 修改根目錄下的 Package.Json\n\u0026#34;scripts\u0026#34;: { \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;Error: no test specified\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34;, \u0026#34;algolia\u0026#34;: \u0026#34;atomic-algolia\u0026#34; }, 到根目錄下的 package.json 內，在 scripts 下添加\nJson 格式記得要加逗號,不然會跳 ERROR\n建立 .ENV 檔\nALGOLIA_APP_ID=你的Application ID ALGOLIA_INDEX_NAME=你的索引名字 ALGOLIA_INDEX_FILE=public/algolia.json ALGOLIA_ADMIN_KEY=你的Admin API Key 上傳索引文件\n可以在 local 端執行 `npm run algolia` 這行指令查看效果 參考: https://edward852.github.io/post/hugo%E6%B7%BB%E5%8A%A0algolia%E6%90%9C%E7%B4%A2%E6%94%AF%E6%8C%81/#%E7%94%9F%E6%88%90%E7%B4%A2%E5%BC%95%E6%96%87%E4%BB%B6\n","date":"2023-03-10T00:00:00Z","image":"https://note.laurance.ml/p/hugo-%E6%B7%BB%E5%8A%A0-algolia-%E6%90%9C%E7%B4%A2%E6%94%AF%E6%8C%81/100_hu1eca35fab2be5a61a943c0c4f6a621a8_107137_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/hugo-%E6%B7%BB%E5%8A%A0-algolia-%E6%90%9C%E7%B4%A2%E6%94%AF%E6%8C%81/","title":"HUGO 添加 Algolia 搜索支持"},{"content":"global 設定 (全域) global log 127.0.0.1 local5 chroot /usr/local/haproxy pidfile /var/run/haproxy.pid maxconn 5000 user haproxy group haproxy daemon stats socket /etc/haproxy/haproxy.sock mode 600 level admin stats timeout 2m #----------------------------------------------------------------------------------------------- log 設定至本機 syslog 預設位置 (級別為 local5 notice)\nchroot 設定為 haproxy 主要運行位置\npidfile 設定為 haproxy 進程\nmaxconn 設定每個 haproxy 進程可以接受的最大併發連接數\ndaemon 設定為背景執行\ndefault 設定 (設定能用來配置套用到 frontend、backend、listen 等配置) defaults mode tcp log global option httplog option dontlognull option log-health-checks retries 3 timeout http-request 30s timeout queue 300s timeout connect 600s timeout client 10m timeout server 10m timeout http-keep-alive 30s timeout check 600s maxconn 4000 #----------------------------------------------------------------------------------------------- mode 指定了 HAProxy instance 所使用的通訊協定\nlog 指定 LOG 將寫入的位址 global 值參照了 global 一節中的 log 參數中所指定的 HAProxy instance\noption httplog 能紀錄 HTTP session 的多種值，包括 HTTP 請求、session 狀態、連線數、來源位址、以及連線計數器等等\noption dontlognull 停用了對 null 連線之記錄，表示 HAProxy 不會記錄未傳遞任何資料的連線\noption log-health-checks 記錄健康檢查日誌\nretries 指定了在無法第一次就連上時，真實伺服器會重試連線的次數\ntimeout http-request http請求超時時間\ntimeout queue 排隊超時\ntimeout connect 設置成功連接到一臺服務器的最長等待時間，默認單位是毫秒\ntimeout client 設置連接客戶端發送數據時的成功連接最長等待時間，默認單位是毫秒\ntimeout server 設置服務器端迴應客戶度數據發送的最長等待時間，默認單位是毫秒\ntimeout http-keep-alive 設置長連接時間\ntimeout check 設置超時時間\nmaxconn 最大連接數\nlisten stats 設定 (監聽狀態) listen stats bind XX:XX:XX:XX:8080 (內網IP) mode http log 127.0.0.1 local0 err stats uri /hastats stats auth admin:admin stats refresh 10s stats hide-version stats admin if TRUE #----------------------------------------------------------------------------------------------- bind 設定 IP , PORT\nfrontend 設定 (設定會配置伺服器聆聽來自用戶端連線請求的聆聽 socket) frontend ha86 bind *:3386 mode tcp option tcplog default_backend mysqlha86 option tcplog 允許記錄tcp連接的狀態和時間\nbackend 設定 (設定會指定真實伺服器的 IP 位址，以及負載平衡程式的排程演算法) backend mysqlha86 balance leastconn server db86 XX:XX:XX:XX:3306 check port 3306 rise 1 fall 2 maxconn 2000 weight 100 #----------------------------------------------------------------------------------------------- balance 指定負載平衡程式的排程演算法，此範例中使用的乃最少連線排程法 leastconn\nserver 指定了後端可以使用的伺服器 db86\ncheck 設置定期「健康檢查」的伺服器，以確保伺服器的可用性\nrise 1 表示 1 次檢查結果正確則認爲服務器可用\nfall 2 表示檢測結果失敗 2 次則認爲服務器不可用\nweight 權重\n演算法說明 演算法名稱 設置參數 說明 循環法 roundrobin 將請求依序發給集區中的伺服器。使用此演算法則時，所有真實伺服器不管能力為何，都會被視為平等 靜態循環法 static-rr 一般地在一組伺服器之間循序性地分散各項請求，不過不允許動態式配置伺服器的權重。然而，基於伺服器權重的靜態本質，後端中不會有伺服器啟用數量上的限制 最少連線排程法 leastconn 將請求分散至連線數較少的真實伺服器。當處於一個動態式且包含各種 session 或是連線長度的環境中，對管理員來說這個排程器可能會較適合其環境 來源 source 透過雜湊請求的來源 IP 位址，並除以所有運作中的伺服器的權重，以判斷哪個伺服器將會收到請求 URI uri 透過雜湊整個 URI（或是 URI 的可配置部分）並除以所有運作中的伺服器的權重，以判斷哪個伺服器將會收到請求 URL 參數 url_param 藉由在來源 URL 請求中找尋特定參數字串，並執行一項雜湊計算除以所有運作中的伺服器的權重，以將請求分散至伺服器上 表頭名稱 hdr 透過選取各個來源 HTTP 請求中的特定表頭名稱來將請求發佈至伺服器上，並進行一項雜湊計算然後除以所有運作中伺服器的權重 RDP Cookie rdp-cookie 透過查詢每項 TCP 請求的 RDP cookie 來將請求發佈至伺服器上，並執行一項雜湊計算然後除以所有運作中伺服器的權重 參考: https://access.redhat.com/documentation/zh-tw/red_hat_enterprise_linux/7/html/load_balancer_administration/s1-haproxy-setup-global\n","date":"2023-03-09T00:00:00Z","image":"https://note.laurance.ml/p/haproxy-%E8%A8%AD%E5%AE%9A%E6%AA%94%E8%A7%A3%E6%9E%90/100_hud764e26bdedecaeaa848d66344e0dcef_67009_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/haproxy-%E8%A8%AD%E5%AE%9A%E6%AA%94%E8%A7%A3%E6%9E%90/","title":"haproxy 設定檔解析"},{"content":"Grafana系統搭配GCP Monitoring資訊做監控 GCP {STEP 1} 啟用API服務 Stackdriver Monitoring API\n{STEP 2} 啟用API服務 Cloud Resource Manager API\n{STEP 3} 點選 API和服務 建立服務帳號憑證\n{STEP 4} 設定服務帳號名稱及設定該帳號權限\n{STEP 5} 設定 授權此帳號的使用者\n{STEP 6} 點選剛建立的監控服務帳號 monitor-grafana 並建立 JSON 金鑰\n{STEP 7} 添加監控權限 For Monitor\n添加 授權使用者\n新增主體: 剛建立的監控服務帳號 XXX.gmail\n指派角色: 監控檢視者\nGrafana {STEP 8} 新增 Data source 資料來源 Google Cloud Monitoring\n{STEP 9} 將 STEP 6 新增的 JSON 金鑰 上傳 \u0026amp;\u0026amp; Save \u0026amp; test\n選擇 Google JWT File\n點選 Upload service account key file\n{STEP 10} 成果驗收\n","date":"2023-03-06T00:00:00Z","image":"https://note.laurance.ml/p/gcp-google-cloud-monitoring-by-grafana/100_hu955ca03f846527c7d15132e3291bde7f_39307_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/gcp-google-cloud-monitoring-by-grafana/","title":"GCP-Google Cloud Monitoring by Grafana"},{"content":" 等級數值 等級名稱 說明 7 debug 用來 debug (除錯) 時產生的訊息資料； 6 info 僅是一些基本的訊息說明而已； 5 notice 雖然是正常資訊，但比 info 還需要被注意到的一些資訊內容； 4 warning 警示的訊息，可能有問題，但是還不至於影響到某個 daemon 運作的資訊； 3 err 一些重大的錯誤訊息，例如設定檔的某些設定值造成該服務服法啟動的資訊說明 ; 2 crit 比 error 還要嚴重的錯誤資訊，這個 crit 是臨界點 (critical) 的縮寫 ; 1 alert 警告警告，已經很有問題的等級，比 crit 還要嚴重！ ; 0 emerg 疼痛等級，意指系統已經幾乎要當機的狀態！ 很嚴重的錯誤資訊了。通常大概只有硬體出問題，導致整個核心無法順利運作 ; ","date":"2023-03-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E6%A0%B8%E5%BF%83-%E7%B3%BB%E7%B5%B1%E6%97%A5%E8%AA%8C%E6%AA%94-local-%E7%B4%9A%E5%88%A5/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E6%A0%B8%E5%BF%83-%E7%B3%BB%E7%B5%B1%E6%97%A5%E8%AA%8C%E6%AA%94-local-%E7%B4%9A%E5%88%A5/","title":"Linux 核心 \u0026 系統日誌檔 (local 級別)"},{"content":"{Step 1} 安裝 Studio 3T for 2019.3.0 exe執行檔\nps. 記住安裝包路徑 ex: C:\\Program Files\\3T Software Labs\\Studio 3T {Step 2} 安裝完成後前面會跳 建議要更新 , 不用理他按 OK\n{Step 3} 點選 I agree 即可\n{Step 4} 此時會跳出需要驗證的環節\n{Step 5} 將 Crack 底下的 data-man-mongodb-XXX 移至安裝包路徑\n{Step 6} 再次打開已跳過驗證環節\nstudio 3T for 2019 019.3.0\n","date":"2023-03-03T00:00:00Z","image":"https://note.laurance.ml/p/mongod-studio-3t-for-mongodb-2019-019.3.0/100_hu5573e9113ac5ca93c9830f3619376466_35662_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mongod-studio-3t-for-mongodb-2019-019.3.0/","title":"Mongod-Studio 3T for MongoDB 2019 019.3.0"},{"content":"bat 處理腳本如下 @echo off ECHO 正在重置 Studio 3T 的使用日期... FOR /f \u0026#34;tokens=1,2,* \u0026#34; %%i IN (\u0026#39;reg query \u0026#34;HKEY_CURRENT_USER\\Software\\JavaSoft\\Prefs\\3t\\mongochef\\enterprise\u0026#34; ^| find /V \u0026#34;installation\u0026#34; ^| find /V \u0026#34;HKEY\u0026#34;\u0026#39;) DO ECHO yes | reg add \u0026#34;HKEY_CURRENT_USER\\Software\\JavaSoft\\Prefs\\3t\\mongochef\\enterprise\u0026#34; /v %%i /t REG_SZ /d \u0026#34;\u0026#34; ECHO 重置完成, 按任意键退出...... pause\u0026gt;nul exit CMD 執行腳本時出現亂碼\n解決方法 將 bat執行檔 另存為 ANSI編碼格式\n再次運行,亂碼問題已解決\n","date":"2023-03-02T00:00:00Z","image":"https://note.laurance.ml/p/windows-bat%E6%89%B9%E8%99%95%E7%90%86%E8%85%B3%E6%9C%AC%E4%B8%AD%E6%96%87%E4%BA%82%E7%A2%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E6%B1%BA/100_hue86d16e89f42e1cd25cf83156a3f9032_45736_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/windows-bat%E6%89%B9%E8%99%95%E7%90%86%E8%85%B3%E6%9C%AC%E4%B8%AD%E6%96%87%E4%BA%82%E7%A2%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E6%B1%BA/","title":"Windows-bat批處理腳本中文亂碼問題解決"},{"content":"環境: Win10 , Powershell 版本: 5.1.19041.1682 Powershell 查看 PSVersion 版本\n$psversiontable Name Value ---- ----- PSVersion 5.1.19041.1682 PSEdition Desktop PSCompatibleVersions {1.0, 2.0, 3.0, 4.0...} BuildVersion 10.0.19041.1682 CLRVersion 4.0.30319.42000 WSManStackVersion 3.0 PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 在 powershell 中輸入以下指令下載 Chocolatey\nSet-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1')) 下載完成可用指令查看 help\nchoco -? 使用 choco 下載 yt-dlp\nchoco install yt-dlp ","date":"2023-03-02T00:00:00Z","image":"https://note.laurance.ml/p/windows-%E5%AE%89%E8%A3%9D%E7%A8%8B%E5%BC%8F--chocolatey-%E5%AE%89%E8%A3%9D-yt-dlp/100_hue86d16e89f42e1cd25cf83156a3f9032_45736_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/windows-%E5%AE%89%E8%A3%9D%E7%A8%8B%E5%BC%8F--chocolatey-%E5%AE%89%E8%A3%9D-yt-dlp/","title":"Windows-安裝程式--Chocolatey (安裝 yt-dlp)"},{"content":"按指定順序檢查文件是否存在，並使用第一個找到的文件進行請求處理 配置\ntry_files $uri $uri/ /index.html; $uri 這個是nginx的一個變量，存放著用戶訪問的地址,\nEX： http://www.xxx.com/index.html 那麼 $uri 就是 /index.html\n$uri/ 代表訪問的是一個目錄\nEX： http://www.xxx.com/hello/test/ 那麼 $uri/ 就是 /hello/test/\n比如用戶訪問這個網地址 http://www.xxx.com/test.html try_files 首先會判斷他是文件，還是一個目錄，結果發現他是文件，與第一個參數 $uri 變量匹配 然後去到網站目錄下去查找 test.html 文件是否存在，如果存在直接讀取返回。如果不存在就跳去匹配 $uri/ 如果 $uri/ 不存在則匹配原路徑底下 /index.html ","date":"2023-02-19T00:00:00Z","image":"https://note.laurance.ml/p/nginx-%E5%8F%83%E6%95%B8%E9%85%8D%E7%BD%AE-tri_files-uri/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-%E5%8F%83%E6%95%B8%E9%85%8D%E7%BD%AE-tri_files-uri/","title":"Nginx-參數配置 tri_files $uri"},{"content":"LINE BOT + OpenAI 程式，讓 AI 回覆訊息 讓程式判斷「Hi AI:」開頭的文字，當文字的開頭出現「Hi AI:」的字串時，就讓 OpenAI 進行回覆，否則就仍然回傳相同的字串。\n{Step 1} 到 OpenAI 申請一組帳號及API keys\nOpen AI API KEY : https://platform.openai.com/account/api-keys\n{Step 2} 登入GCP選取專案 (這邊使用新專案測試)\n右側選取 API和服務 \u0026gt; 程式庫 程式庫搜尋 build api\n點選 啟用API\n點選 建立函式 就能開始建立第一支 Cloud Functions 的程式\n點選建立函式後，設定基本資訊，環境選擇 第一代 asia-east1 (台灣)\n觸發條件選擇 HTTP 勾選 允許未經驗證的叫用 透過 request POST 或 GET 的方法進行叫用\n其他保留預設值即可\n編輯 main.py requiements.txt 加入 LINE BOT 和 OpenAI 函式庫\n{Step 3} 完成後部署程式，專案名稱前方出現綠色勾勾表示部署完成，複製觸發的網址\n將網址填入 LINE BOT 的 Message API 裡 Webhook URL，點擊 Edit 貼上剛剛觸發網址\n接者按 Verify 驗證，出現 Success 表示 Webhook URL 已經順利串接\n若出現 ERROR-403 則是沒有給予呼叫的權限\n解決方法:\n選取剛建立的 function 編輯權限 選取 新增主體\n主體選擇 allUsers 泛指匿名使用者\n指派角色選擇 Cloud Functions \u0026gt; Cloud Functions 叫用者\n{Step 4} 驗收 Line bot\n參考:\nhttps://steam.oxxostudio.tw/category/python/example/line-bot-openai-2.html\nhttps://blog.wawajohn.net/11369.html\n","date":"2023-02-16T00:00:00Z","image":"https://note.laurance.ml/p/gcp-cloud-functions-%E9%83%A8%E5%B1%AC-line-bot--openai/100_hu955ca03f846527c7d15132e3291bde7f_39307_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/gcp-cloud-functions-%E9%83%A8%E5%B1%AC-line-bot--openai/","title":"GCP-Cloud Functions 部屬 LINE BOT + OpenAI"},{"content":"kiosk 去除全部邊框 http://172.17.0.1:3000/d/UDdpyzz7z/prometheus-2-0-stats?orgId=1\u0026amp;refresh=1m\u0026amp;kiosk kiosk=tv去除左側功能欄，頂部不去除 http://172.17.0.1:3000/d/UDdpyzz7z/prometheus-2-0-stats?orgId=1\u0026amp;refresh=1m\u0026amp;kiosk=tv ","date":"2023-02-16T00:00:00Z","image":"https://note.laurance.ml/p/grafana-iframe-%E5%8E%BB%E9%99%A4-bar-%E5%B7%A5%E5%85%B7%E6%A2%9D/100_hu620c7a524b6dcb360e250bc73a09da7c_32448_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/grafana-iframe-%E5%8E%BB%E9%99%A4-bar-%E5%B7%A5%E5%85%B7%E6%A2%9D/","title":"Grafana-Iframe 去除 bar 工具條"},{"content":"Windows 安裝 youtube-dl 紀錄 官方網站 http://ytdl-org.github.io/youtube-dl/download.html\n〔Step 1〕官網安裝套件\nWindows 需安裝 Microsoft Visual C++ 2010 Service Pack 1 Redistributable Package (x86) 、 Windows exe (youtube-dl for windows)\n〔Step 2〕將 \u0026ldquo;youtube-dl.exe\u0026rdquo; 移至路徑 %USERPROFILE%\\AppData\\Local\\Microsoft\\WindowsApps 裡\n%USERPROFILE%\\AppData\\Local\\Microsoft\\WindowsApps Windows 預設環境變數路徑 〔Step 3〕確認上述路徑有在 PATH 中\n〔Step 4〕驗證: 打開 CMD 輸入 youtube-dl \u0026ndash;version\n〔Step 5〕下載影片:\n直接下載\nyoutube-dl u5ZsoP8FZUQ 查詢影片可下載的畫質清單\nyoutube-dl -F u5ZsoP8FZUQ 上述指令找到 format code 後，使用下列指令下載指定的畫質影片\nyoutube-dl -f 401 u5ZsoP8FZUQ 下載成音樂 --audio-format 指定輸出格式，預設值為 best\nyoutube-dl -x --audio-format mp4 u5ZsoP8FZUQ ","date":"2023-02-15T00:00:00Z","image":"https://note.laurance.ml/p/windows-%E5%AE%89%E8%A3%9D%E5%BD%B1%E7%89%87%E4%B8%8B%E8%BC%89%E5%B7%A5%E5%85%B7-youtube-dl/100_hue86d16e89f42e1cd25cf83156a3f9032_45736_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/windows-%E5%AE%89%E8%A3%9D%E5%BD%B1%E7%89%87%E4%B8%8B%E8%BC%89%E5%B7%A5%E5%85%B7-youtube-dl/","title":"Windows-安裝影片下載工具 youtube-dl"},{"content":"Windows FFmpeg 安裝紀錄 官方網站 https://ffmpeg.org/download.html#build-windows\n〔Step 1〕先去官網下載 FFmpeg\n〔Step 2〕將載好的 zip包解壓縮\n裡面應該要有這些檔案 〔Step 3〕進去到 ./bin 這層目錄並將路徑複製到環境變數中\n〔Step 4〕打開控制台 \u0026gt; 系統及安全性 \u0026gt; 系統 \u0026gt; 進階系統設定\n〔Step 5〕打開環境變數 \u0026gt; 系統變數 \u0026gt; Path \u0026gt; 編輯 \u0026gt; 新增\n將 〔Step 3〕 複製的路徑貼入 〔Step 6〕驗證: 打開 CMD 輸入: ffmpeg -version\n〔Step 7〕將 mp4 轉成 mov\n","date":"2023-02-15T00:00:00Z","image":"https://note.laurance.ml/p/windows-%E5%AE%89%E8%A3%9D%E8%BD%89%E6%AA%94%E5%B7%A5%E5%85%B7-ffmpeg/100_hue86d16e89f42e1cd25cf83156a3f9032_45736_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/windows-%E5%AE%89%E8%A3%9D%E8%BD%89%E6%AA%94%E5%B7%A5%E5%85%B7-ffmpeg/","title":"Windows-安裝轉檔工具 FFmpeg"},{"content":"{youtube-dl官方} https://youtube-dl.org {ffmpeg官方} https://ffmpeg.org/download.html youtube-dl 安裝最新穩定版本\ncurl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/bin/youtube-dl 給予權限\nchmod a+rx /usr/bin/youtube-dl 查看版本\nyoutube-dl --version 更新版本\nyoutube-dl --update ffmpeg 安裝依賴\nyum install yasm 官方載 tar包\nwget https://ffmpeg.org/releases/ffmpeg-5.1.2.tar.gz 解壓 \u0026amp;\u0026amp; 安裝\ntar zxvf ffmpeg-5.1.2.tar.gz ./configure --prefix=/usr/local/ffmpeg --enable-openssl make \u0026amp;\u0026amp; make install 建立 Link\nln -s /usr/local/ffmpeg/bin/ffmpeg /usr/bin/ffmpeg 查看版本\nffmpeg -version 參考: https://guopengzhen.com/%E7%BF%BB%E8%AF%91/205/\n","date":"2023-02-13T00:00:00Z","image":"https://note.laurance.ml/p/linux-youtube-dl-ffmpeg-%E5%AE%89%E8%A3%9D%E6%95%99%E5%AD%B8/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-youtube-dl-ffmpeg-%E5%AE%89%E8%A3%9D%E6%95%99%E5%AD%B8/","title":"Linux-youtube-dl \u0026\u0026 ffmpeg 安裝教學"},{"content":"刪除原本緩存密碼的文件\nrm -f ~/.subversion/auth/svn.simple/* 執行一次 \u0026ldquo;svn update\u0026rdquo; 讓密碼緩存文件重新生成\ncd nowblog-2023-02-08/ svn up --username laurance 修改緩存目錄下的文件\nvim ~/.subversion/auth/svn.simple/1b47431ba1edd4463343286aca5a7e1 K 15 svn:realmstring V 43 \u0026lt;svn://192.168.168.1:3690\u0026gt; K 8 passtype V 6 simple K 8 username V 8 laurance K 8 password V 10 XXXXXX (密碼) END { passtype 固定是 simple , K 和 V 後面的數字分別代表 key 和 value 的長度 } 參考: https://blog.csdn.net/u013304850/article/details/124821651\n","date":"2023-02-04T00:00:00Z","image":"https://note.laurance.ml/p/svn-%E8%A7%A3%E6%B1%BA%E6%AF%8F%E6%AC%A1%E9%83%BD%E9%9C%80%E8%A6%81%E8%BC%B8%E5%85%A5%E5%AF%86%E7%A2%BC/100_hu791d074278204665296c002ec84be428_1698_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/svn-%E8%A7%A3%E6%B1%BA%E6%AF%8F%E6%AC%A1%E9%83%BD%E9%9C%80%E8%A6%81%E8%BC%B8%E5%85%A5%E5%AF%86%E7%A2%BC/","title":"SVN-解決每次都需要輸入密碼"},{"content":"環境: A \u0026raquo;\u0026gt; B A主機( Server端 ) IP :192.168.1.222 B主機( Clinet端 ) IP :192.168.1.122 B主機( Clinet端 ) 設定 安裝服務\nyim install xinetd rsync 修改服務設定 xinetd.conf\nvim /etc/xinetd.d/rsync service rsync { disable = no socket_type = stream wait = no user = root server = /usr/bin/rsync server_args = --daemon log_on_failure += USERID } 修改服務設定 rsyncd.conf\nvim /etc/rsyncd.conf [update] path = / auth users = update hosts allow = XX.XX.XX.XX //來源IP uid = root gid = root secrets file = /etc/rsync.secrets read only = no 設定帳號密碼\nvim /etc/rsync.secrets update:123abc 啟動服務\nsystemctl start xinetd A主機 (Server端) 設定 設定密碼即可\nvim rsync.secrets 123abc 語法:\nrsync -aHSz --delete --contimeout=5 --password-file=/etc/rsync.secrets /hugoserver update@XX.XX.XX.XX::update ","date":"2023-02-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-rsync-%E5%9F%BA%E6%9C%AC%E8%A8%AD%E5%AE%9A%E6%95%99%E5%AD%B8/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-rsync-%E5%9F%BA%E6%9C%AC%E8%A8%AD%E5%AE%9A%E6%95%99%E5%AD%B8/","title":"Linux-Rsync 基本設定教學"},{"content":"安裝 locate 工具\nyum install mlocate 更新 locate 資料庫\nupdatedb 預設的 locate 資料庫檔案位置\nls -l /var/lib/mlocate/mlocate.db 快速尋找檔案 尋找含有 .bashrc 關鍵字的檔案\nlocate .bashrc 計算含有 .bashrc 關鍵字的檔案數量\nlocate -c .bashrc 不分大小寫\nlocate -i my.txt 查看 locate 資料庫狀態\nlocate -S ","date":"2023-02-01T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-locate-%E5%B0%8B%E6%89%BE%E6%AA%94%E6%A1%88%E6%95%99%E5%AD%B8%E8%88%87%E7%AF%84%E4%BE%8B/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-locate-%E5%B0%8B%E6%89%BE%E6%AA%94%E6%A1%88%E6%95%99%E5%AD%B8%E8%88%87%E7%AF%84%E4%BE%8B/","title":"Linux-使用 locate 尋找檔案教學與範例"},{"content":"Linux 開機失敗 ERROR \u0026ldquo;or type control -D to continue\u0026rdquo; 解決辦法 主要是磁碟問題,秀的 ERROR\n先使用 root 進入 修復模式\n輸入完密碼後,進入的模式為 唯讀模式 使用以下指令更改為 讀寫模式\nmount -n -o remount,rw / 這邊使用指令 df -h 可以看到原本磁碟 mount 的位置\n將正確位置寫入 /etc/fstab\n重啟後即可\nreboot ","date":"2023-02-01T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E9%96%8B%E6%A9%9F%E5%87%BA%E7%8F%BE-or-type-control-d-to-continue-%E8%A7%A3%E6%B1%BA%E8%BE%A6%E6%B3%95/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E9%96%8B%E6%A9%9F%E5%87%BA%E7%8F%BE-or-type-control-d-to-continue-%E8%A7%A3%E6%B1%BA%E8%BE%A6%E6%B3%95/","title":"Linux-開機出現 (or type control -D to continue) 解決辦法"},{"content":"[官方 Global Flags] https://rclone.org/flags/?utm_source=ld246.com\n[參考文獻] https://ld246.com/article/1600853705300\ncat \u0026lt;\u0026lt;EOF |tee /usr/lib/systemd/system/rclone.service # User service for Rclone mounting # # Place in ~/.config/systemd/user/ # File must include the \u0026#39;@\u0026#39; (ex rclone@.service) # As your normal user, run # systemctl --user daemon-reload # You can now start/enable each remote by using rclone@\u0026lt;remote\u0026gt; # systemctl --user enable rclone@drive # systemctl --user start rclone@drive # Global Flags https://rclone.org/flags/?utm_source=ld246.com [Unit] Description=rclone: Remote FUSE filesystem for cloud storage config Documentation=man:rclone(1) After=network-online.target Wants=network-online.target AssertPathIsDirectory=/home/web-note [Service] Type=notify ExecStartPre=/bin/mkdir -p /home/web-note ExecStart= \\ /usr/bin/rclone mount -P \\ --config /root/.config/rclone/rclone.conf \\ --allow-non-empty \\ --allow-other \\ --vfs-cache-mode full \\ --vfs-cache-max-size 500M \\ --dir-cache-time 5m \\ --poll-interval 1m \\ --vfs-read-chunk-size-limit 128M \\ --vfs-read-chunk-size-limit off \\ --log-level INFO \\ --log-file /var/log/rclone/rclone.log \\ --bwlimit 0 \\ --umask 022 \\ hward: /home/web-note ExecStop=/bin/fusermount -uz /home/web-note Restart=always RestartSec=10 [Install] WantedBy=default.target EOF 設置開機啟動\nsystemctl enable rclone 常用參數\nRclone 常用參數 功能 Type=notify 掛載點被成功配置之後 service 會進行啟動狀態 -P 顯示實時速度 \u0026ndash;allow-non-empty 允許掛載到非空目錄（Not Windows） \u0026ndash;allow-other 允許其他用戶訪問 \u0026ndash;vfs-cache-mode full 緩存模式 off \u0026ndash;vfs-cache-max-size 500M 緩存中對象的最大總大小（默認關閉） \u0026ndash;dir-cache-time 5m 緩存時間 \u0026ndash;poll-interval 1m 在輪詢更改之間等待的時間。 必須小於 dir-cache-time \u0026ndash;vfs-read-chunk-size-limit off 最大緩存大小 (默認是 \u0026ldquo;off\u0026rdquo;) \u0026ndash;log-level INFO 允許掛載到非空目錄（Not Windows） \u0026ndash;log-format LIST 可配置 date, time, microseconds, longfile, shortfile, UTC. 默認是 “date,time” \u0026ndash;log-file /var/log/rclone/rclone.log 緩存模式 off \u0026ndash;bwlimit 40M 限制速度40MB \u0026ndash;umask 022 每一個新產生的檔案會是644 (rw-r\u0026ndash;r\u0026ndash;) Restart=always 自動啟動 ","date":"2023-02-01T00:00:00Z","image":"https://note.laurance.ml/p/rclone%E5%95%9F%E5%8B%95%E8%85%B3%E6%9C%AC-centos7/100_hud1173e144569cec1c001e63ae0101148_19051_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/rclone%E5%95%9F%E5%8B%95%E8%85%B3%E6%9C%AC-centos7/","title":"Rclone啟動腳本 {CentOS7}"},{"content":"掛載 google drive 作為本地硬碟使用 (mount google drive) [官方] https://rclone.org/commands/rclone_mount/\n設定並驗證好 rclone步驟 :\nhttps://www.laurance.ml/p/centos7%E4%B8%8A%E4%BD%BF%E7%94%A8rclone%E9%81%A0%E7%AB%AF%E5%82%99%E4%BB%BD%E8%87%B3%E9%9B%B2%E7%AB%AF/\n安裝依賴\nyum install fuse 將 drive mount到本地 linux\nrclone mount \u0026lt;gdrive剛剛輸入的代稱\u0026gt;:\u0026lt;根目錄以下的雲端路徑\u0026gt; \u0026lt;mount 本地的路徑\u0026gt;\u0026gt;rclone mount \u0026lt;gdrive剛剛輸入的代稱\u0026gt;:\u0026lt;根目錄以下的雲端路徑\u0026gt; \u0026lt;mount 本地的路徑\u0026gt; rclone mount hward: /home/web-note --allow-other --allow-non-empty --vfs-cache-mode full --daemon 取消掛載\nfusermount -qzu {本地路徑} Mount 之前\nMount 之後\n常用語法\nrclone命令範例 功能 \u0026ndash;allow-other 允許非當前 rclone 用戶外其它用戶進行訪問 \u0026ndash;attr-timeout 5m 文件屬性緩存，（大小，修改時間等）的時間。如果 VPS 配置比較低，建議適當提高這個值，避免過多內核交互，降低資源佔用 -vfs-cache-mode full 開啟 VFS 文件緩存，可減少 rclone 與 API 交互，同時可提高文件讀寫效率 \u0026ndash;vfs-cache-max-age 24h VFS 文件緩存時間，這裡設置 24 小時，如果文件很少更改，建議設置更長時間 \u0026ndash;vfs-cache-max-size 10G VFS文件緩存上限大小，建議不超過當前空餘磁盤的50% vfs-read-chunk-size-limit 100M 分塊讀取大小，這裡設置的是100M，可提高文件讀的效率，比如1G的文件，大致分為10個塊進行讀取，但與此同時API請求次數也會增多 \u0026ndash;buffer-size 100M 內存緩存，如果您內存比較小，可降低此值，如果內存比較大，可適當提高 \u0026ndash;daemon 指後台方式運行 ","date":"2023-02-01T00:00:00Z","image":"https://note.laurance.ml/p/rclone%E6%8E%9B%E8%BC%89-google-drive-%E4%BD%9C%E7%82%BA%E6%9C%AC%E5%9C%B0%E7%A1%AC%E7%A2%9F%E4%BD%BF%E7%94%A8/100_hud1173e144569cec1c001e63ae0101148_19051_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/rclone%E6%8E%9B%E8%BC%89-google-drive-%E4%BD%9C%E7%82%BA%E6%9C%AC%E5%9C%B0%E7%A1%AC%E7%A2%9F%E4%BD%BF%E7%94%A8/","title":"Rclone掛載 google drive 作為本地硬碟使用 "},{"content":"跨域存取錯誤 405 : Not Allowed 解決方法 :\n# To allow POST on static pages 允許靜態頁使用POST方法 error_page 405 =200 $uri ; ","date":"2023-01-29T00:00:00Z","image":"https://note.laurance.ml/p/nginx-405-not-allowed/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-405-not-allowed/","title":"Nginx-405 Not Allowed"},{"content":"通過 yum 命令的 Downloadonly 插件下載 RPM 軟件包及其所有依賴包 安裝工具包\nyum install yum-plugin-downloadonly yum-utils -y 將 *.repo 安裝到指定目錄下\nyum install --downloadonly + --downloaddir=軟件包位置[可選] + 軟件包名(可加上版本號，指定版本) yum install --downloadonly --downloaddir=/root/mysql517_repo/ mysql-server mysql-client mysql-devel* ","date":"2023-01-26T00:00:00Z","image":"https://note.laurance.ml/p/centos-%E5%A6%82%E4%BD%95%E5%B0%87%E5%AE%89%E8%A3%9D%E5%8C%85%E5%8F%8A%E5%85%B6%E4%BE%9D%E8%B3%B4%E5%8C%85%E4%B8%8B%E8%BC%89%E5%88%B0%E6%9C%AC%E5%9C%B0/100_huc03b46b7f8bda3b0ed1195c88ee7f533_13486_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos-%E5%A6%82%E4%BD%95%E5%B0%87%E5%AE%89%E8%A3%9D%E5%8C%85%E5%8F%8A%E5%85%B6%E4%BE%9D%E8%B3%B4%E5%8C%85%E4%B8%8B%E8%BC%89%E5%88%B0%E6%9C%AC%E5%9C%B0/","title":"CentOS-如何將安裝包及其依賴包下載到本地"},{"content":"Slave: 關閉 Redis-slave 修改 Redis 設定檔\nvim /usr/local/redis/etc/redis.conf 將 Redis 編號\n:set nu 在設定檔的第 327 行增加設定 ( REPLICATION區塊 )\nslave-read-only no 註解第 326 行設定\n#replica-read-only yes 再開啟 Redis 服務\nsystemctl start redis 登入並將 Slave 資料清空\nredis-cli -h 127.0.0.1 -p 9736 -a 密碼 127.0.0.1:9736\u0026gt; flushall 127.0.0.1:9736\u0026gt; OK 再將服務關閉\nsystemctl stop redis 在設定檔的第 313 行增加設定\nslave-serve-stale-data yes 註解第 312 行設定\n#replica-serve-stale-data yes 在設定檔的第 290 \u0026amp; 291 行增加設定 (Master資訊)\nslaveof 172.16.0.222 9736 masterauth passwd 在設定檔的第 327 行修改設定\nslave-read-only yes 開啟 Redis 服務\nsystemctl start redis 進去查看是否已重跟\nredis-cli -h 127.0.0.1 -p 9736 -a 密碼 127.0.0.1:9736\u0026gt; info Replication 以下參數要是這樣 才算正常跟隨\nmaster_link_status:up master_last_io_seconds_ago:0 master_sync_in_progress:0 PS:重新跟隨狀態會比較慢更新 (大約要等2分鐘 狀態才會變成up)\n","date":"2023-01-20T00:00:00Z","image":"https://note.laurance.ml/p/redis-%E4%B8%BB%E5%BE%9E%E8%B7%9F%E9%9A%A8%E5%BB%BA%E7%AB%8B/100_hu74f8d656a97bc6b7ca99b23e97f954a2_40393_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/redis-%E4%B8%BB%E5%BE%9E%E8%B7%9F%E9%9A%A8%E5%BB%BA%E7%AB%8B/","title":"Redis-主從跟隨建立"},{"content":"ERROR \u0026ldquo;Table doesn\u0026rsquo;t exist in engine\u0026rdquo; #1932 解決方案:\n將 DB 所有資料庫備份為 SQL檔\nmysqldump -uroot -p -S /var/lib/mysql/master01/mysql01.sock --all-databases \u0026gt; all_databases.sql 將 DB 砍掉 重新生成預設資料庫\nmysql_install_db --user=mysql --datadir=/var/lib/mysql/master01 再次將 SQL檔重新匯入\nmysql -uroot -p -S /var/lib/mysql/master01/mysql01.sock \u0026lt; all_databases.sql 檢查所有資料庫是否有錯誤\nmysqlcheck -c --all-databases -uroot -p -S mysql01.sock ","date":"2023-01-19T00:00:00Z","image":"https://note.laurance.ml/p/mysql-error-1932-table-mysql.gtid_slave_pos-doesnt-exist-in-engine/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-error-1932-table-mysql.gtid_slave_pos-doesnt-exist-in-engine/","title":"Mysql error-1932 Table 'mysql.gtid_slave_pos' doesn't exist in engine"},{"content":"1062錯誤\u0026mdash;-主鍵沖突，出現這種情況就是從庫出現插入操作，主庫又重新來了一遍，iothread沒問題，sqlthread出錯 解決方案:\nstop slave; set global sql_slave_skip_counter=1; start slave; 上述指令的 SET GLOBAL sql_slave_skip_counter = 1; 代表的是 1 個 event\n在 Innodb 中，一個 event 代表的是一組 sql 指令，並非一筆 sql\n","date":"2023-01-19T00:00:00Z","image":"https://note.laurance.ml/p/mysql-1062-%E4%B8%BB%E5%BE%9E%E9%8C%AF%E8%AA%A4-error-duplicate-entry-xxxxx-for-key-xxx-on-query./100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-1062-%E4%B8%BB%E5%BE%9E%E9%8C%AF%E8%AA%A4-error-duplicate-entry-xxxxx-for-key-xxx-on-query./","title":"Mysql-1062 主從錯誤 Error 'Duplicate entry 'XXXXX' for key 'XXX'' on query."},{"content":"#ERROR (42000) at line 4904: Row size too large (\u0026gt; 8126). Changing some columns to TEXT or BLOB or using ROW_FORMAT #1118\n解決方法: 關閉 mysql 嚴格模式\n查看 innodb_strict_mode 參數是否為 on\nshow variables like '%innodb_strict_mode%'; 關閉嚴格模式:\nvim /etc/my.cnf [mysqld] \u0026gt;\u0026gt; innodb_strict_mode = 0 # 嚴格模式關閉 登入後查看為OFF\nshow variables like '%innodb_strict_mode%'; ","date":"2023-01-19T00:00:00Z","image":"https://note.laurance.ml/p/mysql-error-1118-42000-at-line-4904-row-size-too-large-8126.-changing-some-columns-to-text-or-blob-or-using-row_format/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-error-1118-42000-at-line-4904-row-size-too-large-8126.-changing-some-columns-to-text-or-blob-or-using-row_format/","title":"Mysql-Error 1118 (42000) at line 4904: Row size too large (\u003e 8126). Changing some columns to TEXT or BLOB or using ROW_FORMAT"},{"content":"常用語法 指令 說明 keys * 查看所有鍵 exists 判斷某個鍵是否存在 type 查看鍵的類型 del 刪除某個鍵 expire 為鍵設置過期時間 ttl 查看還有多少秒過期 dbsize 查看當前數據庫的key的數量 刪除指令 指令 說明 flushdb 清空當前庫 flushall 清空所有庫 ","date":"2023-01-19T00:00:00Z","image":"https://note.laurance.ml/p/redis-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/100_hu74f8d656a97bc6b7ca99b23e97f954a2_40393_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/redis-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/","title":"Redis-常用指令"},{"content":"安裝順序為 MySQL \u0026gt; Apache \u0026gt; PHP \u0026gt; MyDNSConfig \u0026gt; mydns 安裝以下套件所需依賴包 yum -y install gcc gcc-c++ make cmake automake autoconf kernel-devel ncurses-devel libxml2-devel openssl-devel curl-devel libjpeg-devel libpng-devel pcre-devel libtool libtool-libs freetype-devel gd zlib-devel file bison patch mlocate flex diffutils readline-devel glibc-devel glib2-devel bzip2-devel gettext-devel libcap-devel openldap openldap-devel libxslt-devel sqlite-devel libevent libevent-devel MySQL -5.0.77 : [MySQL官網安裝包] https://downloads.mysql.com/archives/community/\n下載安裝包\nwget https://downloads.mysql.com/archives/get/p/23/file/MySQL-server-community-5.0.77-0.rhel5.x86_64.rpm wget https://downloads.mysql.com/archives/get/p/23/file/MySQL-client-community-5.0.77-0.rhel5.x86_64.rpm wget https://downloads.mysql.com/archives/get/p/23/file/MySQL-devel-community-5.0.77-0.rhel5.x86_64.rpm wget https://downloads.mysql.com/archives/get/p/23/file/MySQL-shared-compat-5.0.77-0.rhel5.x86_64.rpm 解壓\nrpm -ivh MySQL-devel-community-5.0.77-0.rhel5.x86_64.rpm rpm -ivh MySQL-shared-compat-5.0.77-0.rhel5.x86_64.rpm rpm -ivh MySQL-server-community-5.0.77-0.rhel5.x86_64.rpm rpm -ivh MySQL-client-community-5.0.77-0.rhel5.x86_64.rpm 查看版本\nmysql -V 啟動服務\nmysqld_safe \u0026amp; 設置root密碼\nmysqladmin -u root password '123456' 建立使用者及權限\nmysql\u0026gt; GRANT all privileges ON mydns.* TO mydns@localhost IDENTIFIED BY '123456'; mysql\u0026gt; flush privileges; 建立database存放mydns\nmysql\u0026gt; create database mydns; Apache-2.2.27 : 下載依賴包\nwget http://archive.apache.org/dist/apr/apr-1.4.5.tar.gz tar -zxf apr-1.4.5.tar.gz cd apr-1.4.5 ./configure --prefix=/usr/local/apr make \u0026amp;\u0026amp; make install wget http://archive.apache.org/dist/apr/apr-util-1.3.12.tar.gz tar -zxf apr-util-1.3.12.tar.gz cd apr-util-1.3.12 ./configure --prefix=/usr/local/apr-util -with-apr=/usr/local/apr/bin/apr-1-config make \u0026amp;\u0026amp; make install wget http://jaist.dl.sourceforge.net/project/pcre/pcre/8.10/pcre-8.10.zip unzip -o pcre-8.10.zip cd pcre-8.10 ./configure --prefix=/usr/local/pcre make \u0026amp;\u0026amp; make install 解壓 Apache\ntar zxvf httpd-2.2.27.kiwi.tar.gz cd httpd-2.2.27/ ./configure --prefix=/usr/local/web/apache2 --enable-ssl --enable-so --enable-vhost-alias --with-mpm=prefork --with-apr=/usr/local/apr/ --with-apr-util=/usr/local/apr-util/ --with-z --enable-proxy --enable-rewrite --with-pcre make \u0026amp;\u0026amp; make install 查看版本\n/usr/local/web/apache2/bin/apachectl -v 更改 apache 主設定檔\nmv /usr/local/web/apache2/conf/httpd.conf /usr/local/web/apache2/conf/httpd.conf.bak vi /usr/local/web/apache2/conf/httpd.conf # # This is the main Apache HTTP server configuration file. It contains the # configuration directives that give the server its instructions. # See \u0026lt;URL:http://httpd.apache.org/docs/2.2\u0026gt; for detailed information. # In particular, see # \u0026lt;URL:http://httpd.apache.org/docs/2.2/mod/directives.html\u0026gt; # for a discussion of each configuration directive. # # Do NOT simply read the instructions in here without understanding # what they do. They\u0026#39;re here only as hints or reminders. If you are unsure # consult the online docs. You have been warned. # # Configuration and logfile names: If the filenames you specify for many # of the server\u0026#39;s control files begin with \u0026#34;/\u0026#34; (or \u0026#34;drive:/\u0026#34; for Win32), the # server will use that explicit path. If the filenames do *not* begin # with \u0026#34;/\u0026#34;, the value of ServerRoot is prepended -- so \u0026#34;logs/foo_log\u0026#34; # with ServerRoot set to \u0026#34;/usr/local/web/apache2\u0026#34; will be interpreted by the # server as \u0026#34;/usr/local/web/apache2/logs/foo_log\u0026#34;. # # ServerRoot: The top of the directory tree under which the server\u0026#39;s # configuration, error, and log files are kept. # # Do not add a slash at the end of the directory path. If you point # ServerRoot at a non-local disk, be sure to point the LockFile directive # at a local disk. If you wish to share the same ServerRoot for multiple # httpd daemons, you will need to change at least LockFile and PidFile. # ServerRoot \u0026#34;/usr/local/web/apache2\u0026#34; # # Listen: Allows you to bind Apache to specific IP addresses and/or # ports, instead of the default. See also the \u0026lt;VirtualHost\u0026gt; # directive. # # Change this to Listen on specific IP addresses as shown below to # prevent Apache from glomming onto all bound IP addresses. # #Listen 12.34.56.78:80 Listen 80 # # Dynamic Shared Object (DSO) Support # # To be able to use the functionality of a module which was built as a DSO you # have to place corresponding `LoadModule\u0026#39; lines at this location so the # directives contained in it are actually available _before_ they are used. # Statically compiled modules (those listed by `httpd -l\u0026#39;) do not need # to be loaded here. # # Example: # LoadModule foo_module modules/mod_foo.so LoadModule php5_module modules/libphp5.so # \u0026lt;IfModule !mpm_netware_module\u0026gt; \u0026lt;IfModule !mpm_winnt_module\u0026gt; # # If you wish httpd to run as a different user or group, you must run # httpd as root initially and it will switch. # # User/Group: The name (or #number) of the user/group to run httpd as. # It is usually good practice to create a dedicated user and group for # running httpd, as with most system services. # User daemon Group daemon \u0026lt;/IfModule\u0026gt; \u0026lt;/IfModule\u0026gt; # \u0026#39;Main\u0026#39; server configuration # # The directives in this section set up the values used by the \u0026#39;main\u0026#39; # server, which responds to any requests that aren\u0026#39;t handled by a # \u0026lt;VirtualHost\u0026gt; definition. These values also provide defaults for # any \u0026lt;VirtualHost\u0026gt; containers you may define later in the file. # # All of these directives may appear inside \u0026lt;VirtualHost\u0026gt; containers, # in which case these default settings will be overridden for the # virtual host being defined. # # # ServerAdmin: Your address, where problems with the server should be # e-mailed. This address appears on some server-generated pages, such # as error documents. e.g. admin@your-domain.com # ServerAdmin you@example.com # # ServerName gives the name and port that the server uses to identify itself. # This can often be determined automatically, but we recommend you specify # it explicitly to prevent problems during startup. # # If your host doesn\u0026#39;t have a registered DNS name, enter its IP address here. # ServerName www.example.com:80 # # DocumentRoot: The directory out of which you will serve your # documents. By default, all requests are taken from this directory, but # symbolic links and aliases may be used to point to other locations. # DocumentRoot \u0026#34;/usr/local/web/apache2//htdocs\u0026#34; # # Each directory to which Apache has access can be configured with respect # to which services and features are allowed and/or disabled in that # directory (and its subdirectories). # # First, we configure the \u0026#34;default\u0026#34; to be a very restrictive set of # features. # \u0026lt;Directory /\u0026gt; Options FollowSymLinks AllowOverride None Order allow,deny allow from all \u0026lt;/Directory\u0026gt; # # Note that from this point forward you must specifically allow # particular features to be enabled - so if something\u0026#39;s not working as # you might expect, make sure that you have specifically enabled it # below. # # # This should be changed to whatever you set DocumentRoot to. # \u0026lt;Directory \u0026#34;/usr/local/web/apache2//htdocs\u0026#34;\u0026gt; # # Possible values for the Options directive are \u0026#34;None\u0026#34;, \u0026#34;All\u0026#34;, # or any combination of: # Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews # # Note that \u0026#34;MultiViews\u0026#34; must be named *explicitly* --- \u0026#34;Options All\u0026#34; # doesn\u0026#39;t give it to you. # # The Options directive is both complicated and important. Please see # http://httpd.apache.org/docs/2.2/mod/core.html#options # for more information. # Options Indexes FollowSymLinks # # AllowOverride controls what directives may be placed in .htaccess files. # It can be \u0026#34;All\u0026#34;, \u0026#34;None\u0026#34;, or any combination of the keywords: # Options FileInfo AuthConfig Limit # AllowOverride None # # Controls who can get stuff from this server. # Order allow,deny Allow from all \u0026lt;/Directory\u0026gt; # # DirectoryIndex: sets the file that Apache will serve if a directory # is requested. # \u0026lt;IfModule dir_module\u0026gt; DirectoryIndex index.html index.php indexs.php \u0026lt;/IfModule\u0026gt; # # The following lines prevent .htaccess and .htpasswd files from being # viewed by Web clients. # \u0026lt;FilesMatch \u0026#34;^\\.ht\u0026#34;\u0026gt; Order allow,deny Deny from all Satisfy All \u0026lt;/FilesMatch\u0026gt; # # ErrorLog: The location of the error log file. # If you do not specify an ErrorLog directive within a \u0026lt;VirtualHost\u0026gt; # container, error messages relating to that virtual host will be # logged here. If you *do* define an error logfile for a \u0026lt;VirtualHost\u0026gt; # container, that host\u0026#39;s errors will be logged there and not here. # ErrorLog \u0026#34;logs/error_log\u0026#34; # # LogLevel: Control the number of messages logged to the error_log. # Possible values include: debug, info, notice, warn, error, crit, # alert, emerg. # LogLevel warn \u0026lt;IfModule log_config_module\u0026gt; # # The following directives define some format nicknames for use with # a CustomLog directive (see below). # LogFormat \u0026#34;%h \\\u0026#34;%{x-forwarded-for}i\\\u0026#34; %l %u %t \\\u0026#34;%r\\\u0026#34; %\u0026gt;s %b \\\u0026#34;%{Referer}i\\\u0026#34; \\\u0026#34;%{User-Agent}i\\\u0026#34;\u0026#34; combined LogFormat \u0026#34;%h %l %u %t \\\u0026#34;%r\\\u0026#34; %\u0026gt;s %b\u0026#34; common \u0026lt;IfModule logio_module\u0026gt; # You need to enable mod_logio.c to use %I and %O LogFormat \u0026#34;%h %l %u %t \\\u0026#34;%r\\\u0026#34; %\u0026gt;s %b \\\u0026#34;%{Referer}i\\\u0026#34; \\\u0026#34;%{User-Agent}i\\\u0026#34; %I %O\u0026#34; combinedio \u0026lt;/IfModule\u0026gt; # # The location and format of the access logfile (Common Logfile Format). # If you do not define any access logfiles within a \u0026lt;VirtualHost\u0026gt; # container, they will be logged here. Contrariwise, if you *do* # define per-\u0026lt;VirtualHost\u0026gt; access logfiles, transactions will be # logged therein and *not* in this file. # CustomLog \u0026#34;logs/access_log\u0026#34; common # # If you prefer a logfile with access, agent, and referer information # (Combined Logfile Format) you can use the following directive. # #CustomLog \u0026#34;logs/access_log\u0026#34; combined \u0026lt;/IfModule\u0026gt; \u0026lt;IfModule alias_module\u0026gt; # # Redirect: Allows you to tell clients about documents that used to # exist in your server\u0026#39;s namespace, but do not anymore. The client # will make a new request for the document at its new location. # Example: # Redirect permanent /foo http://www.example.com/bar # # Alias: Maps web paths into filesystem paths and is used to # access content that does not live under the DocumentRoot. # Example: # Alias /webpath /full/filesystem/path # # If you include a trailing / on /webpath then the server will # require it to be present in the URL. You will also likely # need to provide a \u0026lt;Directory\u0026gt; section to allow access to # the filesystem path. # # ScriptAlias: This controls which directories contain server scripts. # ScriptAliases are essentially the same as Aliases, except that # documents in the target directory are treated as applications and # run by the server when requested rather than as documents sent to the # client. The same rules about trailing \u0026#34;/\u0026#34; apply to ScriptAlias # directives as to Alias. # ScriptAlias /cgi-bin/ \u0026#34;/usr/local/web/apache2//cgi-bin/\u0026#34; \u0026lt;/IfModule\u0026gt; \u0026lt;IfModule cgid_module\u0026gt; # # ScriptSock: On threaded servers, designate the path to the UNIX # socket used to communicate with the CGI daemon of mod_cgid. # #Scriptsock logs/cgisock \u0026lt;/IfModule\u0026gt; # # \u0026#34;/usr/local/web/apache2/cgi-bin\u0026#34; should be changed to whatever your ScriptAliased # CGI directory exists, if you have that configured. # \u0026lt;Directory \u0026#34;/usr/local/web/apache2//cgi-bin\u0026#34;\u0026gt; AllowOverride None Options None Order allow,deny Allow from all \u0026lt;/Directory\u0026gt; # # DefaultType: the default MIME type the server will use for a document # if it cannot otherwise determine one, such as from filename extensions. # If your server contains mostly text or HTML documents, \u0026#34;text/plain\u0026#34; is # a good value. If most of your content is binary, such as applications # or images, you may want to use \u0026#34;application/octet-stream\u0026#34; instead to # keep browsers from trying to display binary files as though they are # text. # DefaultType text/plain \u0026lt;IfModule mime_module\u0026gt; # # TypesConfig points to the file containing the list of mappings from # filename extension to MIME-type. # TypesConfig conf/mime.types # # AddType allows you to add to or override the MIME configuration # file specified in TypesConfig for specific file types. # #AddType application/x-gzip .tgz # # AddEncoding allows you to have certain browsers uncompress # information on the fly. Note: Not all browsers support this. # #AddEncoding x-compress .Z #AddEncoding x-gzip .gz .tgz # # If the AddEncoding directives above are commented-out, then you # probably should define those extensions to indicate media types: # AddType application/x-compress .Z AddType application/x-gzip .gz .tgz AddType application/x-httpd-php .php .phtml AddType application/x-httpd-php-source .phps # # AddHandler allows you to map certain file extensions to \u0026#34;handlers\u0026#34;: # actions unrelated to filetype. These can be either built into the server # or added with the Action directive (see below) # # To use CGI scripts outside of ScriptAliased directories: # (You will also need to add \u0026#34;ExecCGI\u0026#34; to the \u0026#34;Options\u0026#34; directive.) # #AddHandler cgi-script .cgi # For type maps (negotiated resources): #AddHandler type-map var # # Filters allow you to process content before it is sent to the client. # # To parse .shtml files for server-side includes (SSI): # (You will also need to add \u0026#34;Includes\u0026#34; to the \u0026#34;Options\u0026#34; directive.) # #AddType text/html .shtml #AddOutputFilter INCLUDES .shtml \u0026lt;/IfModule\u0026gt; # # The mod_mime_magic module allows the server to use various hints from the # contents of the file itself to determine its type. The MIMEMagicFile # directive tells the module where the hint definitions are located. # #MIMEMagicFile conf/magic # # Customizable error responses come in three flavors: # 1) plain text 2) local redirects 3) external redirects # # Some examples: #ErrorDocument 500 \u0026#34;The server made a boo boo.\u0026#34; #ErrorDocument 404 /missing.html #ErrorDocument 404 \u0026#34;/cgi-bin/missing_handler.pl\u0026#34; #ErrorDocument 402 http://www.example.com/subscription_info.html # # # MaxRanges: Maximum number of Ranges in a request before # returning the entire resource, or one of the special # values \u0026#39;default\u0026#39;, \u0026#39;none\u0026#39; or \u0026#39;unlimited\u0026#39;. # Default setting is to accept 200 Ranges. #MaxRanges unlimited # # EnableMMAP and EnableSendfile: On systems that support it, # memory-mapping or the sendfile syscall is used to deliver # files. This usually improves server performance, but must # be turned off when serving from networked-mounted # filesystems or if support for these functions is otherwise # broken on your system. # #EnableMMAP off #EnableSendfile off # Supplemental configuration # # The configuration files in the conf/extra/ directory can be # included to add extra features or to modify the default configuration of # the server, or you may simply copy their contents here and change as # necessary. # Server-pool management (MPM specific) Include conf/extra/httpd-mpm.conf # Multi-language error messages Include conf/extra/httpd-multilang-errordoc.conf # Fancy directory listings #Include conf/extra/httpd-autoindex.conf # Language settings Include conf/extra/httpd-languages.conf # User home directories #Include conf/extra/httpd-userdir.conf # Real-time info on requests and configuration #Include conf/extra/httpd-info.conf # Virtual hosts Include conf/extra/httpd-vhosts.conf # Local access to the Apache HTTP Server Manual Include conf/extra/httpd-manual.conf # Distributed authoring and versioning (WebDAV) #Include conf/extra/httpd-dav.conf # Various default settings Include conf/extra/httpd-default.conf # Secure (SSL/TLS) connections #Include conf/extra/httpd-ssl.conf # # Note: The following must must be present to support # starting without SSL on platforms with no /dev/random equivalent # but a statically compiled-in mod_ssl. # \u0026lt;IfModule ssl_module\u0026gt; SSLRandomSeed startup builtin SSLRandomSeed connect builtin \u0026lt;/IfModule\u0026gt; # Virtual dir for programmer use #Include conf/httpd-vdir.conf AddDefaultCharset utf-8 建立 vhost 設定\n# # Virtual Hosts # # If you want to maintain multiple domains/hostnames on your # machine you can setup VirtualHost containers for them. Most configurations # use only name-based virtual hosts so the server doesn\u0026#39;t need to worry about # IP addresses. This is indicated by the asterisks in the directives below. # # Please see the documentation at # \u0026lt;URL:http://httpd.apache.org/docs/2.2/vhosts/\u0026gt; # for further details before you try to setup virtual hosts. # # You may use the command line option \u0026#39;-S\u0026#39; to verify your virtual host # configuration. # # Use name-based virtual hosting. # NameVirtualHost *:80 # # VirtualHost example: # Almost any Apache directive may go into a VirtualHost container. # The first VirtualHost section is used for all requests that do not # match a ServerName or ServerAlias in any \u0026lt;VirtualHost\u0026gt; block. # \u0026lt;VirtualHost *:80\u0026gt; ServerAdmin root@localhost DocumentRoot \u0026#34;/usr/share/mydnsconfig/web/\u0026#34; ServerName mydns ServerAlias mydns2022.mis ServerAlias mydns2022.mis ErrorLog \u0026#34;logs/mydns.err\u0026#34; CustomLog \u0026#34;logs/mydns.acc\u0026#34; common \u0026lt;/VirtualHost\u0026gt; Apache 啟動命令\n/usr/local/web/apache2/bin/apachectl start Apache 重啟命令\n/usr/local/web/apache2/bin/apachectl graceful PHP-5.2.5 : 建立 lib link\necho \u0026quot;/usr/local/lib\u0026quot; \u0026gt; /home/local.conf echo \u0026quot;/usr/local/lib64\u0026quot; \u0026gt;\u0026gt; /home/local.conf ldconfig -v cp -frp /usr/lib64/libldap* /usr/lib/ ln -s /usr/lib64/liblber* /usr/lib/ 解壓 \u0026amp;\u0026amp; 編譯\ntar zxvf php-5.2.5.tar.gz cd php-5.2.5/ './configure' '--prefix=/usr/local/web/php' '--with-apxs2=/usr/local/web/apache2/bin/apxs' '--with-mysql' '--with-mysqli=/usr/bin/mysql_config' '--disable-cgi' '--with-iconv' '--disable-inline-optimization' '--enable-mbstring=tw' '--enable-sysvshm' '--enable-sysvsem' '--enable-sockets' '--with-jpeg-dir' '--with-png-dir' '--with-gd' '--with-zlib' '--with-curl' '--enable-zip' '--enable-opcache' make \u0026amp;\u0026amp; make install 建立設定檔 link\ncp php.ini.kiwi /usr/local/web/php/etc/php.ini ln -s /usr/local/web/php/etc/php.ini /etc/php.ini MyDNSConfig-1.1.0: 建立資料夾存放 mydnsconfig data\nmkdir /usr/share/mydnsconfig/ 解壓至 mydnsconfig 下並給予權限777\ntar zxvf MyDNSConfig-1.1.0.tar.gz cp -r MyDNSConfig-1.1.0/interface/* /usr/share/mydnsconfig/ chmod 777 /usr/share/mydnsconfig/* -R 把 table 資料灌到 mydns\nmysql -uroot mydns \u0026lt; mydnsconfig.sql 更改設定\nvim /usr/share/mydnsconfig/interface/lib/config.inc.php $conf[\u0026#34;db_type\u0026#34;] = \u0026#39;mysql\u0026#39;; $conf[\u0026#34;db_host\u0026#34;] = \u0026#39;localhost\u0026#39;; $conf[\u0026#34;db_database\u0026#34;] = \u0026#39;mydns\u0026#39;; $conf[\u0026#34;db_user\u0026#34;] = \u0026#39;mydns\u0026#39;; $conf[\u0026#34;db_password\u0026#34;] = \u0026#39;123456\u0026#39;; Mydns-1.2.8.31: 解壓 \u0026amp;\u0026amp; 編譯\ntar zxvf mydns-1.2.8.31.tar.gz ./configure --prefix=/usr/local/mydns --with-mysql-lib=/usr/lib64/mysql --with-zlib=/usr/lib64 make \u0026amp;\u0026amp; make install 建立 link\nmv mydns.conf /etc/mydns.conf ln -s /usr/local/mydns/sbin/mydns /usr/sbin/mydns 更改設定\nvim /etc/mydns.conf db-host = localhost # SQL server hostname db-user = mydns # SQL server username db-password = 123456 # SQL server password database = mydns # MyDNS database name recursive = # Location of recursive resolver allow-axfr = yes # Should AXFR be enabled? allow-tcp = yes # Should TCP be enabled? 啟動服務\nmydns -c /etc/mydns.conf -b 驗證 WINDOWS 綁本機 HOSTS\n172.16.0.224\tmydns2022.mis 本機打開網址 http://mydns2022.mis/\n預設帳密為: admin/admin\n","date":"2022-12-30T00:00:00Z","image":"https://note.laurance.ml/p/dns_server-mydns-%E6%9C%8D%E5%8B%99%E5%99%A8%E7%9A%84%E5%8F%AF%E8%A6%96%E5%8C%96%E7%AE%A1%E7%90%86-by-centos6/100_hu4f6562e501064fb4525a6459b027d812_33292_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/dns_server-mydns-%E6%9C%8D%E5%8B%99%E5%99%A8%E7%9A%84%E5%8F%AF%E8%A6%96%E5%8C%96%E7%AE%A1%E7%90%86-by-centos6/","title":"DNS_SERVER-MyDNS 服務器的可視化管理 by CentOS6"},{"content":"[DOCKER]\n安裝最新版 Docker\nwget -qO- get.docker.com | bash 查看版本\ndocker version 啟動服務\nsystemctl start docker 查看狀態\nsystemctl status docker [L2TP/IPsec]\n拉取鏡像\ndocker pull teddysun/l2tp 建立環境參數設定檔\nvim /etc/l2tp.env VPN_IPSEC_PSK=1234567890 VPN_USER=laurance VPN_PASSWORD=lau888 VPN_PUBLIC_IP=XX.XX.XX.XX VPN_L2TP_NET=192.168.18.0/24 VPN_L2TP_LOCAL=192.168.18.1 VPN_L2TP_REMOTE=192.168.18.10-192.168.18.250 VPN_XAUTH_NET=192.168.20.0/24 VPN_XAUTH_REMOTE=192.168.20.10-192.168.20.250 VPN_DNS1=8.8.8.8 VPN_DNS2=9.9.9.9 VPN_SHA2_TRUNCBUG= VPN_IPSEC_PSK：預共享密鑰 VPN_USER：默認的登錄用戶名 VPN_PASSWORD：默認的登錄用戶密碼 VPN_PUBLIC_IP：指定公網 IP 地址，當你的 VPS 有多個公網 IP 時，可能需要手動指定一下 VPN_L2TP_NET：內網 L2TP 網段範圍，默認為 192.168.18.0/24，一般此處留空即可 VPN_L2TP_LOCAL：內網 L2TP 網關 IP，默認為 192.168.18.1，一般此處留空即可 VPN_L2TP_REMOTE：內網 L2TP 網段分配給連接的 IP 段，默認為 192.168.18.10-192.168.18.250，一般此處留空即可 VPN_XAUTH_NET：內網 XAUTH 網段範圍，默認為 192.168.20.0/24，一般此處留空即可 VPN_XAUTH_REMOTE：內網 XAUTH 網段分配給連接的 IP 段，默認為 192.168.20.10-192.168.20.250，一般此處留空即可 VPN_DNS1：默認 DNS 服務器，8.8.8.8，一般此處留空即可 VPN_DNS2：默認 DNS 服務器，8.8.4.4，一般此處留空即可 Android 6 和 7 用戶：如果你遇到連接問題，請嘗試在 /etc/ipsec.conf 中設置 sha2-truncbug=yes（默認為 no），你可以在 /etc/l2tp.env 文件中添加 VPN_SHA2_TRUNCBUG=yes，然後重新創建 Docker 容器。 啟動容器\ndocker run -d --privileged -p 500:500/udp -p 4500:4500/udp --name l2tp --restart=always --env-file /etc/l2tp.env -v /lib/modules:/lib/modules teddysun/l2tp 查看啟動 LOG\ndocker logs l2tp 查看 ipsec status 輸出\ndocker exec -it l2tp ipsec status [管理 VPN 用户]\n列出所有 user \u0026amp; password\ndocker exec -it l2tp l2tpctl -l 新增 user\ndocker exec -it l2tp l2tpctl -a 刪除 user\ndocker exec -it l2tp l2tpctl -d 修改 user 密碼\ndocker exec -it l2tp l2tpctl -m 查看 libreswan 和 xl2tpd 版本\ndocker exec -it l2tp l2tpctl -v Linux Libreswan 3.32 (netkey) on 3.10.0-1160.76.1.el7.x86_64 xl2tpd version: xl2tpd-1.3.15 [Windows 10 下连接 L2TP VPN]\n修改 VPN 協議\nConfigure a L2TP/IPsec server behind a NAT-T device\nwin + R 輸入 regedit HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\PolicyAgent 新增一組機碼 \u0026gt;\u0026gt; DWORD（32 位）值 \u0026gt;\u0026gt; AssumeUDPEncapsulationContextOnSendRule \u0026gt;\u0026gt; 值設定為 2 (1 不會過) [PHONE]\nAndroid 版本小於或等於 7 時，建議選擇 IPSec Xauth PSK (Cisco IPsec) 模式連接\n[參考] https://learn.microsoft.com/en-US/troubleshoot/windows-server/networking/configure-l2tp-ipsec-server-behind-nat-t-device\n[參考] https://teddysun.com/536.html\n","date":"2022-12-27T00:00:00Z","image":"https://note.laurance.ml/p/vpn-%E5%BB%BA%E7%BD%AE-xl2tpd--ipsec-%E6%9C%8D%E5%8B%99-by-docker/100_hu4a5e9b40bf0434de798ba3ff501006e2_11543_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/vpn-%E5%BB%BA%E7%BD%AE-xl2tpd--ipsec-%E6%9C%8D%E5%8B%99-by-docker/","title":"VPN-建置 XL2TPD + IPSec 服務 by DOCKER"},{"content":"查看目前版本號\nsvnlook youngest /home/svn/mis-note 保留 130-138 版本號的 dump\nsvnadmin dump /home/svn/mis-note -r 130:138 \u0026gt; repo_dump_130-138.dmp 2\u0026gt;repo_dump_130-138.log 將舊的庫移成 .bak\nmv mis-note/ mis-note-20230105.bak/ 新建庫\nsvnadmin create /home/svn/mis-note 將設定檔複製過來\ncp -r ../mis-note-20230105.bak/conf . 查看乾淨庫的容量\ndu -hs mis-note 導入 dump\nsvnadmin load /home/svn/mis-note \u0026lt; repo_dump_130-138.dmp \u0026gt;repo_load_130-138.log 2\u0026gt;repo_load_130-138.errlog 看一下新庫容量有沒有增加\ndu -hs mis-note Client 端 (Windows): 砍掉舊有的SVN資料夾 , 並取出新資料夾 Server重啟 ","date":"2022-12-26T00:00:00Z","image":"https://note.laurance.ml/p/svn-%E5%88%AA%E9%99%A4%E6%97%A9%E6%9C%9F%E7%89%88%E6%9C%AC%E5%BA%AB-%E8%A8%98%E5%BE%97%E5%85%88%E5%82%99%E4%BB%BD/100_hu791d074278204665296c002ec84be428_1698_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/svn-%E5%88%AA%E9%99%A4%E6%97%A9%E6%9C%9F%E7%89%88%E6%9C%AC%E5%BA%AB-%E8%A8%98%E5%BE%97%E5%85%88%E5%82%99%E4%BB%BD/","title":"SVN-刪除早期版本庫 (記得先備份!!!)"},{"content":"從官網下載源碼\nwget https://nchc.dl.sourceforge.net/project/ss5/ss5/3.8.9-8/ss5-3.8.9-8.tar.gz 安裝依賴\nyum -y install pam-devel openldap-devel cyrus-sasl-devel openssl-devel gcc automake make 解壓、編譯、安裝\ntar xvf ss5-3.8.9-8.tar.gz cd ss5-3.8.9 ./configure \u0026amp;\u0026amp; make \u0026amp;\u0026amp; make install [ SS5設定檔 ]\n修改認證方式\nvim /etc/opt/ss5/ss5.conf 無帳號密碼的設定\nauth 0.0.0.0/0 - - permit - 0.0.0.0/0 - 0.0.0.0/0 - - - - - 有帳號密碼的設定\nauth 0.0.0.0/0 - u permit u 0.0.0.0/0 - 0.0.0.0/0 - - - - - 加入 USER 及 PASSWD\nvim /etc/opt/ss5/ss5.passwd laurance lau888 修改 ss5 啟動的 port\nvim /etc/sysconfig/ss5 SS5_OPTS=\u0026#34; -u root -b 0.0.0.0:8080\u0026#34; 新增 ss5 執行檔權限\nchmod 755 /etc/rc.d/init.d/ss5 啟動服務\nsystemctl restart ss5 查看啟動 LOG\nmore /var/log/ss5/ss5.log [ Chrome 套件名稱: Proxy SwitchyOmega ]\n使用 Chrome 套件 \u0026amp; SS5 翻牆\n","date":"2022-12-26T00:00:00Z","image":"https://note.laurance.ml/p/vpn-%E5%BB%BA%E7%BD%AE-socks5ss5%E4%BB%A3%E7%90%86/100_hu4a5e9b40bf0434de798ba3ff501006e2_11543_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/vpn-%E5%BB%BA%E7%BD%AE-socks5ss5%E4%BB%A3%E7%90%86/","title":"VPN-建置 SOCKS5(SS5)代理"},{"content":"1. IP白名單文件讀取 建立白名單文件\nvim /usr/local/web/nginx/conf/vhost/hugo/whitelist.conf allow 172.16.0.6; 配置設定檔引入白名單文件\nvim /usr/local/web/nginx/conf/vhost/hugo/hugo.conf location / { . . . . include /usr/local/web/nginx/conf/vhost/hugo/whitelist.conf; deny all; } cat /usr/local/web/nginx/conf/vhost/hugo/whitelist.conf allow 172.16.0.6; 2.國家IP封鎖 Nginx 主設定檔的http 區塊加入GEO模塊並引用dat 文件\n從 $remote_addr 這個變數, 來定義 $ip_whitelist 這個變數\nvim /usr/local/web/nginx/conf/nginx.conf geoip_country /usr/local/web/nginx/conf/vhost/hugo/GeoCountry/country/maxmind.dat; geo $remote_addr $ip_whitelist { default 0; } 建立一支定義GEO規則的設定檔\nvim /usr/local/web/nginx/conf/vhost/geoblock.conf if ($ip_whitelist = 1) { break; } if ($geoip_country_code ~ (JP|TW)) { return 403; } 在配置的設定檔上server 區塊引用GEO規則的設定檔\nvim /usr/local/web/nginx/conf/vhost/hugo/hugo.conf server { listen 1515; # listen [::]:1515; server_name note.laurance.com; include vhost/geoblock.conf; . . . . . } 使用 Nginx 阻擋國家IP,需要編譯模塊 http_geoip_module 下載 geoip 安裝包\nyum install geoip-devel ps. 若找不到安裝包,可先安裝 epel 倉庫\nyum install epel-release -y\n檢查庫是否安裝成功\nldconfig -v | grep GeoIP libGeoIPUpdate.so.0 -\u0026gt; libGeoIPUpdate.so.0.0.0 libGeoIP.so.1 -\u0026gt; libGeoIP.so.1.4.8 libGeoIPUpdate.so.0 -\u0026gt; libGeoIPUpdate.so.0.0.0 libGeoIP.so.1 -\u0026gt; libGeoIP.so.1.5.0 將 GeoIP 模塊重新編譯到 Nginx 中 (原有的編譯參數可用 nginx -V 查看)\n( 不要 make install 否則覆蓋安裝就麻煩了 )\n./configure --user=nginx --group=nginx --prefix=/usr/local/web/nginx --sbin-path=/usr/local/web/nginx/sbin/nginx --conf-path=/usr/local/web/nginx/conf/nginx.conf --error-log-path=/usr/local/web/nginx/logs/error.log --http-log-path=/usr/local/web/nginx/logs/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/lock/subsys/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-pcre --with-http_realip_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_secure_link_module --with-http_v2_module --with-http_stub_status_module --with-http_sub_module --add-module=/usr/local/incubator-pagespeed-ngx-1.13.35.2-stable/ --add-module=/usr/local/nginx-http-concat/ --with-http_geoip_module make unlink /usr/sbin/nginx mv /usr/local/web/nginx/sbin/nginx /usr/local/web/nginx/sbin/nginx-2023-01-01.bak cp objs/nginx /usr/local/web/nginx/sbin/nginx /usr/local/web/nginx/sbin/nginx -V 查看 GEO 模塊是否已編入\n/usr/local/web/nginx/sbin/nginx -V 2\u0026gt;\u0026amp;1 | grep -o with-http_geoip_module 下載 IP 數據庫 (dat 格式) [ 第三方下載地址 ] https://www.miyuru.lk/geoiplegacy\n下載同時包括Ipv4和Ipv6的country、city版本。\nwget https://dl.miyuru.lk/geoip/maxmind/country/maxmind.dat.gz gunzip maxmind.dat.gz wget https://dl.miyuru.lk/geoip/maxmind/city/maxmind.dat.gz gunzip maxmind.dat.gz 配置請看上面\n國家相關參數： $geoip_country_code #兩位字符的英文國家碼。如：CN, US $geoip_country_code3 #三位字符的英文國家碼。如：CHN, USA $geoip_country_name #國家英文全稱。如：China, United States 城市相關參數： $geoip_city_country_code #也是兩位字符的英文國家碼。 $geoip_city_country_code3 #上同 $geoip_city_country_name #上同. $geoip_region #這個經測試是兩位數的數字，如杭州是02, 上海是 23。但是沒有搜到相關資料，希望知道的朋友留言告之。 $geoip_city #城市的英文名稱。如：Hangzhou $geoip_postal_code #城市的郵政編碼。經測試，國內這字段為空 $geoip_city_continent_code #不知什麼用途，國內好像都是AS $geoip_latitude #緯度 $geoip_longitude #經度 [參考] https://www.ywbj.cc/?p=787\n","date":"2022-12-25T00:00:00Z","image":"https://note.laurance.ml/p/nginx-%E6%B7%BB%E5%8A%A0%E7%99%BD%E5%90%8D%E5%96%AE-%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6-ip-%E6%96%B9%E5%BC%8F/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-%E6%B7%BB%E5%8A%A0%E7%99%BD%E5%90%8D%E5%96%AE-%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6-ip-%E6%96%B9%E5%BC%8F/","title":"Nginx-添加白名單 \u0026 封鎖國家 IP 方式"},{"content":"查看相關配置\nrpm -qc rsyslog /etc/logrotate.d/syslog /etc/rsyslog.conf /etc/sysconfig/rsyslog 查看版本\nrsyslogd -v rsyslogd 8.24.0-57.el7_9.3, compiled with: PLATFORM:\tx86_64-redhat-linux-gnu PLATFORM (lsb_release -d):\tFEATURE_REGEXP:\tYes GSSAPI Kerberos 5 support:\tYes FEATURE_DEBUG (debug build, slow code):\tNo 32bit Atomic operations supported:\tYes 64bit Atomic operations supported:\tYes memory allocator:\tsystem default Runtime Instrumentation (slow code):\tNo uuid support:\tYes Number of Bits in RainerScript integers: 64 更改 rsyslog 參數 (-c 後為版本號 , -r 為開啟遠端接收)\nvim /etc/sysconfig/rsyslog ##CLIENT\nRSYSLOG設定檔配置\nvim /etc/rsyslog.conf # rsyslog configuration file # For more information see /usr/share/doc/rsyslog-*/rsyslog_conf.html # If you experience problems, see http://www.rsyslog.com/doc/troubleshoot.html #### MODULES #### # The imjournal module bellow is now used as a message source instead of imuxsock. $ModLoad imuxsock # provides support for local system logging (e.g. via logger command) $ModLoad imjournal # provides access to the systemd journal #$ModLoad imklog # reads kernel messages (the same are read from journald) #$ModLoad immark # provides --MARK-- message capability #$ModLoad imfile # Provides UDP syslog reception #$ModLoad imudp #$UDPServerRun 514 # Provides TCP syslog reception #$ModLoad imtcp #$InputTCPServerRun 514 #### GLOBAL DIRECTIVES #### # Where to place auxiliary files $WorkDirectory /var/lib/rsyslog # Use default timestamp format $ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat # File syncing capability is disabled by default. This feature is usually not required, # not useful and an extreme performance hit #$ActionFileEnableSync on # Include all config files in /etc/rsyslog.d/ $IncludeConfig /etc/rsyslog.d/*.conf # Turn off message reception via local log socket; # local messages are retrieved through imjournal now. $OmitLocalLogging on # File to store the position in the journal $IMJournalStateFile imjournal.state #### RULES #### # Log all kernel messages to the console. # Logging much else clutters up the screen. #kern.* /dev/console # Log anything (except mail) of level info or higher. # Don\u0026#39;t log private authentication messages! *.info;mail.none;authpriv.none;cron.none /var/log/messages # The authpriv file has restricted access. authpriv.* /var/log/secure.log # Log all the mail messages in one place. mail.* -/var/log/maillog.log # Log cron stuff cron.* /var/log/cron.log # Everybody gets emergency messages *.emerg :omusrmsg:* # Save news errors of level crit and higher in a special file. uucp,news.crit /var/log/spooler.log # Save boot messages also to boot.log local7.* /var/log/boot.log #*.* @@172.16.0.223:514 :msg, contains, \u0026#34;PHP\u0026#34;\t@172.16.0.223 #紀錄在messages裡有\u0026#34;PHP\u0026#34;關鍵字的LOG #include(file=\u0026#34;/etc/rsyslog.d/*.conf\u0026#34;) #:programname,isequal,\u0026#34;dhclient\u0026#34; /var/log/dhclient.log #:programname,isequal,\u0026#34;ec2net\u0026#34; /var/log/dhclient.log # ### begin forwarding rule ### # The statement between the begin ... end define a SINGLE forwarding # rule. They belong together, do NOT split them. If you create multiple # forwarding rules, duplicate the whole block! # Remote Logging (we use TCP for reliable delivery) # # An on-disk queue is created for this action. If the remote host is # down, messages are spooled to disk and sent when it is up again. #$ActionQueueFileName fwdRule1 # unique name prefix for spool files #$ActionQueueMaxDiskSpace 1g # 1gb space limit (use as much as possible) $ActionQueueSaveOnShutdown on # save messages to disk on shutdown #$ActionQueueType LinkedList # run asynchronously #$ActionResumeRetryCount -1 # infinite retries if host is down # remote host is: name/ip:port, e.g. 192.168.0.1:514, port optional #*.* @@remote-host:514 # ### end of the forwarding rule ### $IncludeConfig /etc/rsyslog.d/*.conf RSYSLOG 服務重啟\nsystemctl restart rsyslog NGINX 設定檔配置 (web-server-log)\nserver { listen 1515; listen [::]:1515; server_name note.laurance.com; location / { # auth_basic \u0026#34;authentication\u0026#34;; # auth_basic_user_file conf/mypasswords/.hugopass.dev; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_redirect off; proxy_http_version 1.1; proxy_pass http://127.0.0.1:1313; proxy_set_header X_FORWARDED_HOST $host; proxy_set_header Host $http_host; proxy_ignore_client_abort on; proxy_read_timeout 300; proxy_ignore_headers \u0026#34;Cache-Control\u0026#34;; add_header X-Cache \u0026#34;$upstream_cache_status from $server_addr\u0026#34;; add_header Cache-Control max-age=60; proxy_cache_valid 304 1m; # proxy_cache two; proxy_cache_key $host$uri$is_args$args; } # auth_basic \u0026#34;authentication\u0026#34;; # auth_basic_user_file conf/mypasswords/.hugopass.dev; access_log logs/hugo-server/hugo-server.acc access; access_log syslog:server=172.16.0.223:514,tag=note_laurance_orz access; } NGINX 服務重啟\n/usr/local/web/nginx/sbin/nginx -t /usr/local/web/nginx/sbin/nginx -s reload PHP設定檔配置 (定義 error_log 位置及層級)\nvim /usr/local/web/php/etc/php-fpm.conf ##SERVER\nRSYSLOG設定檔配置\nvim /etc/rsyslog.conf # rsyslog configuration file # For more information see /usr/share/doc/rsyslog-*/rsyslog_conf.html # If you experience problems, see http://www.rsyslog.com/doc/troubleshoot.html #### MODULES #### # The imjournal module bellow is now used as a message source instead of imuxsock. $ModLoad imuxsock # provides support for local system logging (e.g. via logger command) $ModLoad imjournal # provides access to the systemd journal #$ModLoad imklog # reads kernel messages (the same are read from journald) #$ModLoad immark # provides --MARK-- message capability # Provides UDP syslog reception $ModLoad imudp $UDPServerRun 514 # Provides TCP syslog reception $ModLoad imtcp $InputTCPServerRun 514 #### GLOBAL DIRECTIVES #### # Where to place auxiliary files $WorkDirectory /var/lib/rsyslog # Use default timestamp format $ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat # File syncing capability is disabled by default. This feature is usually not required, # not useful and an extreme performance hit #$ActionFileEnableSync on # Include all config files in /etc/rsyslog.d/ $IncludeConfig /etc/rsyslog.d/*.conf # Turn off message reception via local log socket; # local messages are retrieved through imjournal now. $OmitLocalLogging on # File to store the position in the journal $IMJournalStateFile imjournal.state #### RULES #### # Log all kernel messages to the console. # Logging much else clutters up the screen. #kern.* /dev/console # Log anything (except mail) of level info or higher. # Don\u0026#39;t log private authentication messages! *.info;mail.none;authpriv.none;cron.none /var/log/messages # The authpriv file has restricted access. authpriv.* /var/log/secure # Log all the mail messages in one place. mail.* -/var/log/maillog # Log cron stuff cron.* /var/log/cron # Everybody gets emergency messages *.emerg :omusrmsg:* # Save news errors of level crit and higher in a special file. uucp,news.crit /var/log/spooler # Save boot messages also to boot.log #local7.* /var/log/boot.log #:programname,isequal,\u0026#34;dhclient\u0026#34; /var/log/dhclient.log #:programname,isequal,\u0026#34;ec2net\u0026#34; /var/log/dhclient.log # ### begin forwarding rule ### # The statement between the begin ... end define a SINGLE forwarding # rule. They belong together, do NOT split them. If you create multiple # forwarding rules, duplicate the whole block! # Remote Logging (we use TCP for reliable delivery) # # An on-disk queue is created for this action. If the remote host is # down, messages are spooled to disk and sent when it is up again. #$ActionQueueFileName fwdRule1 # unique name prefix for spool files #$ActionQueueMaxDiskSpace 1g # 1gb space limit (use as much as possible) #$ActionQueueSaveOnShutdown on # save messages to disk on shutdown #$ActionQueueType LinkedList # run asynchronously #$ActionResumeRetryCount -1 # infinite retries if host is down # remote host is: name/ip:port, e.g. 192.168.0.1:514, port optional #*.* @@remote-host:514 # ### end of the forwarding rule ### $IncludeConfig /etc/rsyslog.d/*.conf ##在rsyslog.d目錄下建立 xxx.conf 定義 Client 端 log 的標籤及路徑\nvim /etc/rsyslog.d/note_laurance.conf\n:syslogtag, contains, \u0026quot;note_laurance_orz\u0026quot; /home/note-laurance-log/note.laurance.log \u0026amp; stop . . . . . vim /etc/rsyslog.d/php_error.conf\nif $msg contains 'PHP' then /home/note-laurance-log/php_errors.acc \u0026amp; stop . . . . . RSYSLOG 服務重啟\nsystemctl restart rsyslog ##驗證:\n訪問 note.laurance.com:1515 可以看到 LOG 被同步寫進指定位置了\n##建立每天排程LOG輪詢\n建立排程 shell\nvim /root/logrotate/logrotate.sh #!/bin/bash /usr/sbin/logrotate -f /root/logrotate/weblog vim /root/logrotate/weblog /home/note-laurance-log/*.log { daily rotate 30 create sharedscripts postrotate /bin/systemctl restart rsyslog.service endscript } /home/note-laurance-log/*.acc { daily rotate 30 create sharedscripts postrotate /bin/systemctl restart rsyslog.service endscript } crontab -e 10 05 * * * sh /root/logrotate/logrotate.sh crontab -l 確認\nRsyslog 官方文件\n","date":"2022-12-21T00:00:00Z","image":"https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/rsyslog%E6%97%A5%E8%AA%8C%E9%81%A0%E7%AB%AF%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%AE%A1%E7%90%86/","title":"Rsyslog日誌遠端集中式管理"},{"content":"查詢關鍵字 \u0026ldquo;ERROR\u0026rdquo;\n{job=\u0026quot;my1log\u0026quot;,filename=\u0026quot;/var/lib/mysql/master01/mysql.err\u0026quot;} |= \u0026quot;ERROR\u0026quot; ","date":"2022-12-16T00:00:00Z","image":"https://note.laurance.ml/p/grafana-loki-%E6%9F%A5%E8%A9%A2%E8%AA%9E%E8%A8%80-logql/100_hu620c7a524b6dcb360e250bc73a09da7c_32448_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/grafana-loki-%E6%9F%A5%E8%A9%A2%E8%AA%9E%E8%A8%80-logql/","title":"Grafana-Loki 查詢語言 LogQL"},{"content":"建立 panel for uptime 點選 uptime 的 panel 選擇 edit\n旁邊細節設定可參照 :\nInfluxDB查詢語法: select last(uptime_format) as value from system SELECT last(\u0026quot;uptime_format\u0026quot;) AS \u0026quot;value\u0026quot; FROM \u0026quot;system\u0026quot; WHERE \u0026quot;host\u0026quot; =~ /$server$/ AND $timeFilter GROUP BY time($interval) ","date":"2022-12-16T00:00:00Z","image":"https://note.laurance.ml/p/grafana-%E4%BD%BF%E7%94%A8uptime%E6%9F%A5%E8%A9%A2%E7%B3%BB%E7%B5%B1%E9%81%8B%E8%A1%8C%E6%99%82%E9%96%93/100_hu620c7a524b6dcb360e250bc73a09da7c_32448_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/grafana-%E4%BD%BF%E7%94%A8uptime%E6%9F%A5%E8%A9%A2%E7%B3%BB%E7%B5%B1%E9%81%8B%E8%A1%8C%E6%99%82%E9%96%93/","title":"Grafana-使用uptime查詢系統運行時間"},{"content":"Add an panel for monitor loading {step1} 右上角 + \u0026gt; Add an empty panel\n{step2} 依需求填寫 Data source Query Visualization\nData source \u0026gt;\u0026gt; InfluxDB:databases Query \u0026gt;\u0026gt; SELECT last(\u0026quot;load1\u0026quot;) AS \u0026quot;load\u0026quot; FROM \u0026quot;system\u0026quot; WHERE \u0026quot;host\u0026quot; !~/^$interval$/ and time \u0026gt; now() -1m group by \u0026quot;host\u0026quot; Visualization \u0026gt;\u0026gt; Table {step3} 選擇 Transform 建立 Organize fields \u0026amp;\u0026amp; 增加 host load time\n{step4} 右側條件選單拉到最底選擇\nAdd filed override \u0026gt; Fields with name \u0026gt; LastUpdate \u0026gt; + Add override property\nStandard options \u0026gt; Unit \u0026gt; Date\u0026amp;time \u0026gt; From Now\nOverride 1 Override 2 Override 3 Final ","date":"2022-12-16T00:00:00Z","image":"https://note.laurance.ml/p/grafana-%E5%BB%BA%E7%AB%8B-panel-for-loading/100_hu620c7a524b6dcb360e250bc73a09da7c_32448_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/grafana-%E5%BB%BA%E7%AB%8B-panel-for-loading/","title":"Grafana-建立 panel for loading"},{"content":"Add an panel for monitor loading {step1} 右上角 + \u0026gt; Add an empty panel\n{step2} 依需求填寫 Data source Query Visualization\nData source \u0026gt;\u0026gt; InfluxDB:databases Query \u0026gt;\u0026gt; SELECT last(\u0026quot;used_percent\u0026quot;) AS \u0026quot;percent\u0026quot;, \u0026quot;used\u0026quot; AS \u0026quot;used\u0026quot;, \u0026quot;total\u0026quot; AS \u0026quot;total\u0026quot; FROM \u0026quot;mem\u0026quot; WHERE \u0026quot;host\u0026quot; !~/^$interval$/ and time \u0026gt; now() -1m group by \u0026quot;host\u0026quot; Visualization \u0026gt;\u0026gt; Table Transform Organize fields host \u0026gt;\u0026gt; Host used \u0026gt;\u0026gt; Used total \u0026gt;\u0026gt; Total percent \u0026gt;\u0026gt; Percent Time \u0026gt;\u0026gt; LastUpdate {step4} 右側條件選單拉到最底選擇 Add filed override\nOverride 1 \u0026amp; Override 2 Override 3 \u0026amp; Override 4 \u0026amp; Override 5 ","date":"2022-12-16T00:00:00Z","image":"https://note.laurance.ml/p/grafana-%E5%BB%BA%E7%AB%8B-panel-for-memory/100_hu620c7a524b6dcb360e250bc73a09da7c_32448_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/grafana-%E5%BB%BA%E7%AB%8B-panel-for-memory/","title":"Grafana-建立 panel for memory"},{"content":"Add an panel for monitor storage {step1} 右上角 + \u0026gt; Add an empty panel\n{step2} 依需求填寫 Data source Query Visualization\nData source \u0026gt; InfluxDB:databases Query \u0026gt; SELECT last(\u0026quot;used_percent\u0026quot;) AS \u0026quot;percent\u0026quot;, \u0026quot;used\u0026quot; AS \u0026quot;used\u0026quot;, \u0026quot;total\u0026quot; AS \u0026quot;total\u0026quot; FROM \u0026quot;disk\u0026quot; WHERE \u0026quot;host\u0026quot; !~ /^$interval$/ and time \u0026gt; now() -1m group by \u0026quot;host\u0026quot;, \u0026quot;path\u0026quot; Format as \u0026gt; Table Visualization \u0026gt; Table {step3} 選擇 Transform 建立 Organize fields \u0026amp;\u0026amp; 依需求填寫 host,path,used,total,percent,lastupdate\n{step4} 右側條件選單拉到最底選擇 Add filed override\nOverride 1 \u0026amp; Override 2 Override 3 \u0026amp; Override 4 Override 5 \u0026amp; Override 6 FINAL ","date":"2022-12-16T00:00:00Z","image":"https://note.laurance.ml/p/grafana-%E5%BB%BA%E7%AB%8B-panel-for-storage/100_hu620c7a524b6dcb360e250bc73a09da7c_32448_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/grafana-%E5%BB%BA%E7%AB%8B-panel-for-storage/","title":"Grafana-建立 panel for storage"},{"content":"修改 Promtail 設定檔配置\nvim /etc/promtail/config.yml 重啟服務\nsystemctl restart promtail 查看 tmp 下 positions 有沒有寫進去\nvim /tmp/positions.yaml 修改 grafana 後台 panel 設置\n{job=\u0026quot;message\u0026quot;,filename=\u0026quot;/var/log/messages\u0026quot;} 成果 :\n##套用模板##\nGrafana 後台點選 import (ID: 13639)\n成果 :\n","date":"2022-12-16T00:00:00Z","image":"https://note.laurance.ml/p/grafana-%E6%90%AD%E5%BB%BAlokipromtail-%E5%A4%9A%E5%A5%97%E5%8D%B3%E6%99%82%E6%80%A7%E6%97%A5%E8%AA%8C/100_hu620c7a524b6dcb360e250bc73a09da7c_32448_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/grafana-%E6%90%AD%E5%BB%BAlokipromtail-%E5%A4%9A%E5%A5%97%E5%8D%B3%E6%99%82%E6%80%A7%E6%97%A5%E8%AA%8C/","title":"Grafana-搭建Loki、Promtail 多套即時性日誌"},{"content":"下載安裝啟動 Grafana 官方載點\nwget https://dl.grafana.com/enterprise/release/grafana-enterprise-9.3.2-1.x86_64.rpm yum localinstall grafana-enterprise-9.3.2-1.x86_64.rpm systemctl start grafana-server \u0026amp;\u0026amp; systemctl status grafana-server 下載安裝啟動 Promtail \u0026amp; Loki 官方載點\nPROMTAIL :\nwget https://github.com/grafana/loki/releases/download/v2.7.1/promtail-2.7.1.x86_64.rpm yum localinstall promtail-2.7.1.x86_64.rpm LOKI :\nwget https://github.com/grafana/loki/releases/download/v2.7.1/loki-2.7.1.x86_64.rpm yum localinstall loki-2.7.1.x86_64.rpm 設定檔配置:\nvim /etc/loki/config.yml\nvim /etc/promtail/config.yml\nsystemctl start loki \u0026amp;\u0026amp; systemctl start promtail 訪問 GRAFANA :\n建立 Datasorce for loki\n選擇 LOKI - Database\n填寫資料來源 之後按 save \u0026amp;\u0026amp; explore\n填寫 Log browser job \u0026amp; filename 即可\n驗證:\ncurl http://172.16.0.222:3100/metrics Loki 整體架構\n","date":"2022-12-16T00:00:00Z","image":"https://note.laurance.ml/p/grafana-%E6%90%AD%E5%BB%BAlokipromtailgrafana%E8%BC%95%E9%87%8F%E7%B4%9A%E6%97%A5%E8%AA%8C%E7%B3%BB%E7%B5%B1/100_hu620c7a524b6dcb360e250bc73a09da7c_32448_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/grafana-%E6%90%AD%E5%BB%BAlokipromtailgrafana%E8%BC%95%E9%87%8F%E7%B4%9A%E6%97%A5%E8%AA%8C%E7%B3%BB%E7%B5%B1/","title":"Grafana-搭建Loki、Promtail、Grafana輕量級日誌系統"},{"content":"修改系統 Kernel 的變數\nvim /etc/sysctl.conf net.ipv4.tcp_syncookies = 1 net.ipv4.tcp_tw_reuse = 1 net.ipv4.tcp_tw_recycle = 1 net.ipv4.tcp_fin_timeout = 30 修改系統資源限制配置文件\nvim /etc/security/limits.conf * soft nproc 65535 * hard nproc 65535 * soft nofile 65535 * hard nofile 65535 將mysql默認資源限制拉高 (默認為5000)\nvim /usr/lib/systemd/system/mysqld.service LimitNOFILE=65535 ","date":"2022-12-14T00:00:00Z","image":"https://note.laurance.ml/p/mysql-changed-limits-max_connections-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-changed-limits-max_connections-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/","title":"MySQL-Changed limits max_connections 解决方法"},{"content":"NGINX 開 port:1515 導向 HUGO-localhost:1313 範例\nserver { listen 1515; listen [::]:1515; # server_name ; location / { proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_redirect off; proxy_http_version 1.1; proxy_pass http://127.0.0.1:1313; proxy_set_header X_FORWARDED_HOST $host; proxy_set_header Host $http_host; proxy_ignore_client_abort on; proxy_read_timeout 300; proxy_ignore_headers \u0026#34;Cache-Control\u0026#34;; add_header X-Cache \u0026#34;$upstream_cache_status from $server_addr\u0026#34;; add_header Cache-Control max-age=60; proxy_cache_valid 304 1m; # proxy_cache two; proxy_cache_key $host$uri$is_args$args; } access_log logs/hugo-server/hugo-server.acc access; } ","date":"2022-12-13T00:00:00Z","image":"https://note.laurance.ml/p/nginx-proxypass-hugo/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-proxypass-hugo/","title":"Nginx-Proxypass (HUGO)"},{"content":"下載 certbot 腳本\nwget https://raw.githubusercontent.com/certbot/certbot/7f0fa18c570942238a7de73ed99945c3710408b4/letsencrypt-auto-source/letsencrypt-auto -O /root/certbot-auto 給予權限\nchmod 755 /root/certbot-auto 使用 certbot-auto 簽發三個月憑證\n(保護 domain 及 sub domain) ./certbot-auto certonly -d “*.域名”-d “域名” --manual --preferred-challenges dns (只保護 sub domain) ./certbot-auto certonly -d *.域名 --manual --preferred-challenges dns 驗證解析\nnslookup -type=TXT _acme-challenge.XXXXX.net 8.8.8.8 驗證過後會有4隻pem 路徑: /etc/letsencrypt/archive/\ncp fullchain1.pem /usr/local/web/nginx/conf/key/las/XXXXX.net.crt cp privkey1.pem /usr/local/web/nginx/conf/key/las/XXXXX.net.key NGINX 重啟\n/usr/local/web/nginx/sbin/nginx -t /usr/local/web/nginx/sbin/nginx -s reload ","date":"2022-12-10T00:00:00Z","image":"https://note.laurance.ml/p/centos7-%E4%BD%BF%E7%94%A8certbot%E5%8D%8A%E8%87%AA%E5%8B%95%E6%9B%B4%E6%96%B0ssl%E6%86%91%E8%AD%89/100_huc03b46b7f8bda3b0ed1195c88ee7f533_13486_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos7-%E4%BD%BF%E7%94%A8certbot%E5%8D%8A%E8%87%AA%E5%8B%95%E6%9B%B4%E6%96%B0ssl%E6%86%91%E8%AD%89/","title":"CentOS7-使用certbot半自動更新SSL憑證"},{"content":"~/.bash_history 裡面紀錄的是上一次登出的歷史紀錄 (默認保存1000條)\n查看目前保留配置\necho $HISTSIZE 修改環境變量 (永久配置)\nsed -i 's/^HISTSIZE=1000/HISTSIZE=100000/' /etc/profile source /etc/profile ","date":"2022-12-10T00:00:00Z","image":"https://note.laurance.ml/p/linux-history%E5%91%BD%E4%BB%A4%E4%BF%9D%E5%AD%98%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B8/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-history%E5%91%BD%E4%BB%A4%E4%BF%9D%E5%AD%98%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B8/","title":"Linux-history命令保存的最大數"},{"content":"來源 A機建立公鑰及私鑰\nssh-keygen -t dsa 到家目錄的 .ssh裡面看，會多出 id_rsa 和 id_rsa.pub 這兩個檔案\n將 id_dsa.pub 的內容複製到 目的B機 並命名為 authorized_keys - 限制600權限\ncat id_rsa.pub (A機) \u0026gt; authorized_keys (B機) chmod 600 authorized_keys 驗證測試\n來源到目的使用 ssh , scp 免密碼 PS. 若是有多個 id_rsa.pub 需要設定 (注意!!! 需要在第一步選擇路徑)\nssh-keygen -t rsa 第一步需填寫路徑 其餘 ENTER 即可\nEnter file in which to save the key (/root/.ssh/id_rsa): /root/.ssh/id_rsa_root ","date":"2022-12-10T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-ssh-%E9%85%8D%E5%90%88%E6%86%91%E8%AD%89%E4%BE%86%E9%81%A0%E7%AB%AF%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88-scp/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8-ssh-%E9%85%8D%E5%90%88%E6%86%91%E8%AD%89%E4%BE%86%E9%81%A0%E7%AB%AF%E8%A4%87%E8%A3%BD%E6%AA%94%E6%A1%88-scp/","title":"Linux-使用 SSH 配合憑證來遠端複製檔案 (scp)"},{"content":"NGINX 默認就有安裝 ngx_http_auth_basic_module 模塊 (不用特別編譯)\n生成帳號 \u0026amp;\u0026amp; 密碼\necho -n 'root:' \u0026gt;\u0026gt; /usr/local/web/nginx/conf/mypasswords/.testpass.dav openssl passwd -apr1 123456 \u0026gt;\u0026gt; /usr/local/web/nginx/conf/mypasswords/.testpass.dav 配置 Nginx\nserver { listen 80; server_name php-test.net; index index.php index.html; root /home/test/php; include vhost/file.conf; access_log logs/test/test.acc access; auth_basic \u0026quot;authentication\u0026quot;; auth_basic_user_file /usr/local/web/nginx/conf/mypasswords/.testpass.dav; } file.conf (PHP)\nlocation ~ \\.php$ { try_files $uri =404; fastcgi_split_path_info ^(.+\\.php)(/.+)$; include fastcgi_params; #fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; #fastcgi_intercept_errors on; fastcgi_pass 127.0.0.1:9000; } location ~ \\.wav$ { add_header Content-Disposition \u0026quot;inline\u0026quot;; } NGINX 重啟\n/usr/local/web/nginx/sbin/nginx -t /usr/local/web/nginx/sbin/nginx -s reload 驗證: WINDOWS 本機綁 HOST\n172.16.0.222 php-test.net ","date":"2022-12-10T00:00:00Z","image":"https://note.laurance.ml/p/nginx-%E9%85%8D%E7%BD%AE-nginx-auth_basic-%E8%BA%AB%E5%88%86%E9%A9%97%E8%AD%89/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-%E9%85%8D%E7%BD%AE-nginx-auth_basic-%E8%BA%AB%E5%88%86%E9%A9%97%E8%AD%89/","title":"Nginx-配置 Nginx auth_basic 身分驗證"},{"content":"編譯PHP時,秀 ERROR: virtual memory exhausted: Cannot allocate memory [因為用的是免費方案,內存小的可憐,故先調大再縮小]\nGCP後台查看機器內存只有 614M\n機器上看也是 583M\n先將機器關機 (要關機才能調)\ninit 0 到GCP後台調成 g1-small\n開機後就能看到已調成 1.6G\n","date":"2022-12-06T00:00:00Z","image":"https://note.laurance.ml/p/gce-%E5%85%A7%E5%AD%98%E9%81%8E%E5%B0%8F%E5%B0%8E%E8%87%B4%E7%84%A1%E6%B3%95%E7%B7%A8%E8%AD%AFphp/100_hu955ca03f846527c7d15132e3291bde7f_39307_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/gce-%E5%85%A7%E5%AD%98%E9%81%8E%E5%B0%8F%E5%B0%8E%E8%87%B4%E7%84%A1%E6%B3%95%E7%B7%A8%E8%AD%AFphp/","title":"GCE-內存過小導致無法編譯PHP"},{"content":"點選右上角頭像，管理你的帳戶 左邊 安全性 找到 \u0026ldquo;登入 Google\u0026rdquo; 並點選 \u0026ldquo;兩步驟驗證\u0026rdquo;\n會列出有綁帳號的手機，點選繼續 接著輸入 \u0026ldquo;驗證碼\u0026rdquo;\n都完成後退出到首頁，並點選 \u0026ldquo;應用程式密碼\u0026rdquo;\n接著系統會產生一組隨機密碼 這組應用程式專用密碼只能登入一個地方\n","date":"2022-12-06T00:00:00Z","image":"https://note.laurance.ml/p/gcp-google-%E5%95%9F%E7%94%A8%E5%85%A9%E6%AD%A5%E9%A9%9F%E9%A9%97%E8%AD%89-%E5%86%8D%E8%A8%AD%E5%AE%9A%E6%87%89%E7%94%A8%E7%A8%8B%E5%BC%8F%E5%B0%88%E7%94%A8%E5%AF%86%E7%A2%BC/100_hu955ca03f846527c7d15132e3291bde7f_39307_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/gcp-google-%E5%95%9F%E7%94%A8%E5%85%A9%E6%AD%A5%E9%A9%9F%E9%A9%97%E8%AD%89-%E5%86%8D%E8%A8%AD%E5%AE%9A%E6%87%89%E7%94%A8%E7%A8%8B%E5%BC%8F%E5%B0%88%E7%94%A8%E5%AF%86%E7%A2%BC/","title":"GCP-google 啟用兩步驟驗證 再設定應用程式專用密碼"},{"content":"MySQL 建立 exporter帳號 create user \u0026#39;exporter\u0026#39;@\u0026#39;%\u0026#39; identified by \u0026#39;exporter\u0026#39;; GRANT REPLICATION CLIENT, PROCESS ON *.* TO \u0026#39;exporter\u0026#39;@\u0026#39;%\u0026#39;; GRANT SELECT ON performance_schema.* TO \u0026#39;exporter\u0026#39;@\u0026#39;%\u0026#39;; flush privileges; 下載agent wget https://github.com/prometheus/mysqld_exporter/releases/download/v0.13.0/mysqld_exporter-0.13.0.linux-amd64.tar.gz tar zxvf mysqld_exporter-0.13.0.linux-amd64.tar.gz cd mysqld_exporter-0.13.0.linux-amd64/ 在mysqld_exporter這層放置設定檔 (這邊是多套,所以分開寫) vim mysqld_exporter-0.13.0.linux-amd64/.my.cnf [client] user=exporter password=exporter host=172.16.0.222 port=3306 [client] user=exporter password=exporter host=172.16.0.222 port=3307 將 exporter 寫入 systemctl vim /usr/lib/systemd/system/mysqld_export.service [Unit] Description=Mysqld_exporter After=network-online.target [Service] Type=simple ExecStart=/root/prometheus/mysqld_exporter-0.13.0.linux-amd64/mysqld_exporter \\ --config.my-cnf=/root/prometheus/mysqld_exporter-0.13.0.linux-amd64/.my.cnf Restart=on-failure StartLimitInterval=1 RestartSec=3 [Install] WantedBy=multi-user.target 重啟 systemctl systemctl daaemon-reload 開啟 agent systemctl start mysqld_export 驗證一下 curl localhost:9104/metrics ","date":"2022-12-06T00:00:00Z","image":"https://note.laurance.ml/p/prometheus-mysql%E7%9B%A3%E6%8E%A7/100_huec2a1d8249f034a64f5ee7a870cac03e_48487_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/prometheus-mysql%E7%9B%A3%E6%8E%A7/","title":"Prometheus MySQL監控"},{"content":"GCP 後台搜尋服務 Dialogflow 選取 Dialogflow 控制台 這邊選擇舊專案 (原本沒有的話點新增) 新增 agent (因為當初建專案時,選擇的是免費地區,所以這邊才只能選 global) 選擇 Manage , 點擊需要串接 Webhook 的 Intent 進入後在最下方勾選「Enable webhook call for this intent」，表示該 Intent 會透過 Webhook 處理後再進行回覆 選擇 Intergrations 與 LINE 串接 將 LINE 的 ID 及 TOKEN 依序填入 Configuration 最後將 Webhook URL 複製到 LINE 後台上的 Webhook settings 串接流程圖\n","date":"2022-12-05T00:00:00Z","image":"https://note.laurance.ml/p/line-bot-%E4%B8%B2%E6%8E%A5-dialogflow/100_hu812fe91f81cbd42923f38749a60c4afd_2721_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/line-bot-%E4%B8%B2%E6%8E%A5-dialogflow/","title":"LINE-BOT 串接 Dialogflow"},{"content":"DENY - 國家IP\nyum -y install ipset 下載日本IP文件檔\nwget http://www.ipdeny.com/ipblocks/data/aggregated/jp-aggregated.zone 建立一個放日本IP的集合\nipset create jpip hash:net maxelem 65536 建立一支shell來抓取文件檔中的IP\nvim jpip.sh 查看目前集合中IP為0\nipset list jpip 執行shell之後集合中的IP為2946\nipset list jpip |head -n 8 查看list-jpip中有多少個IP (從第九行開始算)\nipset list jpip |tail -n +9 |wc -l 對照文檔中的IP數量是否一致\ncat jp-aggregated.zone |wc -l 最後使用iptables將此集合中IP進來的封包 DROP掉\niptables -I INPUT -m set --match-set jpip src -j DROP IPSET 官網\nsrc 表示源地址，dst表示目標地址\nhash:net 用什麼進行hash ，也可以是hash:ip 就只能ip不能網段 hash:ip,port ip+port進行hash\n也可以有timeout 數字 這種參數，指定這個集合裏默認的超時時間單位s，超時後會自動把裏面的對象刪除\n[常用語法]\nipset del yoda x.x.x.x # 從 yoda 集合中刪除內容 ipset list yoda # 查看 yoda 集合內容 ipset list # 查看所有集合的內容 ipset flush yoda # 清空 yoda 集合 ipset flush # 清空所有集合 ipset destroy yoda # 銷毀 yoda 集合 ipset destroy # 銷毀所有集合 ipset save yoda # 輸出 yoda 集合內容到標準輸出 ipset save # 輸出所有集合內容到標準輸出 ipset restore # 根據輸入內容恢復集合內容 ","date":"2022-12-05T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/100_hufccc25f98c07fbd5a07eedc8b57cae89_16682_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/linux-%E5%88%A9%E7%94%A8ipset%E5%BB%BA%E7%AB%8Biptables%E9%9B%86%E5%90%88-%E5%AF%A6%E7%8F%BE%E5%B0%81%E9%8E%96%E5%9C%8B%E5%AE%B6ip/","title":"Linux-利用ipset建立iptables集合 [實現封鎖國家IP] "},{"content":"查看所有模塊\n/usr/local/web/apache2/bin/httpd -l 進入proxy moudle 編碼目錄\ncd /root/dbmonitor-case/dbmonitor/httpd-2.2.27/modules/proxy 使用apxs進行編譯安裝\n/usr/local/web/apache2/bin/apxs -i -c -a mod_proxy.c proxy_util.c ","date":"2022-12-03T00:00:00Z","image":"https://note.laurance.ml/p/apache-%E9%80%8F%E9%81%8E-apxs-%E6%B7%BB%E5%8A%A0-proxy-%E6%A8%A1%E5%9D%97/100_huc56479c16103f06e85c76b60f35aaa1f_12865_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/apache-%E9%80%8F%E9%81%8E-apxs-%E6%B7%BB%E5%8A%A0-proxy-%E6%A8%A1%E5%9D%97/","title":"Apache-透過 apxs 添加 proxy 模块"},{"content":"安裝 UFW apt install ufw 關閉 UFW ufw disable 開啟 UFW ufw enable 參考: https://itw01.com/UOT99EH.html\n","date":"2022-12-03T00:00:00Z","image":"https://note.laurance.ml/p/debian-%E7%81%AB%E7%89%86%E8%A8%AD%E5%AE%9A/100_hu525f2b8d07d8420817fb991b1679637d_7608_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/debian-%E7%81%AB%E7%89%86%E8%A8%AD%E5%AE%9A/","title":"Debian-火牆設定"},{"content":"編輯網卡設定檔\nvi /etc/network/interfaces auot eth0 iface eth0 inet static address 192.168.2.66 netmask 255.255.255.0 gateway 192.168.2.254 重啟網卡\n/etc/init.d/networking restart 查看 IP\nip a ifconfig ","date":"2022-12-03T00:00:00Z","image":"https://note.laurance.ml/p/debian-%E7%B6%B2%E5%8D%A1%E8%A8%AD%E5%AE%9A/100_hu525f2b8d07d8420817fb991b1679637d_7608_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/debian-%E7%B6%B2%E5%8D%A1%E8%A8%AD%E5%AE%9A/","title":"Debian-網卡設定"},{"content":"編輯以下文件\nvim /etc/vim/vimrc.tiny\nset nocompatible set backspace=2 ","date":"2022-12-03T00:00:00Z","image":"https://note.laurance.ml/p/debian-%E7%B7%A8%E8%BC%AF%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%84%A1%E6%B3%95%E4%BD%BF%E7%94%A8%E5%88%AA%E9%99%A4%E9%8D%B5-backspace/100_hu525f2b8d07d8420817fb991b1679637d_7608_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/debian-%E7%B7%A8%E8%BC%AF%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%84%A1%E6%B3%95%E4%BD%BF%E7%94%A8%E5%88%AA%E9%99%A4%E9%8D%B5-backspace/","title":"Debian-編輯模式下無法使用刪除鍵 (backspace)"},{"content":"安裝相關依賴及Server\nyum -y install bind bind-chroot bind-utils bind-libs caching-nameserver 複製必要檔案至新路徑並給予權限\ncp /var/named/named.* /var/named/chroot/var/named/ chown root.named /var/named/chroot/var/named/named.* cp -r /var/named/data/ /var/named/chroot/var/named/ chown named.named /var/named/chroot/var/named/data/ -R 更改主設定檔\nvim /etc/named/named.conf // // named.conf // // Provided by Red Hat bind package to configure the ISC BIND named(8) DNS // server as a caching only nameserver (as a localhost DNS resolver only). // // See /usr/share/doc/bind*/sample/ for example named configuration files. // // See the BIND Administrator\u0026#39;s Reference Manual (ARM) for details about the // configuration located in /usr/share/doc/bind-{version}/Bv9ARM.html options { listen-on port 53 { any; }; //監聽多個介面的port53 #\tlisten-on-v6 port 53 { ::1; }; //關閉IPV6 directory \u0026#34;/var/named/chroot/var/named\u0026#34;; //位置改為/chroot/var/named dump-file \u0026#34;/var/named/data/cache_dump.db\u0026#34;; //統計資料存放路徑 statistics-file \u0026#34;/var/named/data/named_stats.txt\u0026#34;; //統計資料存放路徑 memstatistics-file \u0026#34;/var/named/data/named_mem_stats.txt\u0026#34;; //統計資料存放路徑 #\trecursing-file \u0026#34;/var/named/data/named.recursing\u0026#34;; #\tsecroots-file \u0026#34;/var/named/data/named.secroots\u0026#34;; allow-query { any; }; //限制有那些用戶可以使用此台DNS forwarders {8.8.8.8;}; //dns伺服器無法解析時，會由8.8.8.8解析 /* - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion. - If you are building a RECURSIVE (caching) DNS server, you need to enable recursion. - If your recursive DNS server has a public IP address, you MUST enable access control to limit queries to your legitimate users. Failing to do so will cause your server to become part of large scale DNS amplification attacks. Implementing BCP38 within your network would greatly reduce such attack surface */ recursion yes; //遞迴式，如果本 DNS server 查不到，會往上層查 dnssec-enable no; //設定不回傳 DNS Security Extensions ( DNSSEC ) 相關的 RR dnssec-validation no; //設定RR 不經由 DNSSEC 認證 /* Path to ISC DLV key */ bindkeys-file \u0026#34;/etc/named.root.key\u0026#34;; managed-keys-directory \u0026#34;/var/named/dynamic\u0026#34;; #\tpid-file \u0026#34;/run/named/named.pid\u0026#34;; #\tsession-keyfile \u0026#34;/run/named/session.key\u0026#34;; }; logging { channel default_debug { file \u0026#34;data/named.run\u0026#34;; severity dynamic; }; category lame-servers { null; }; }; zone \u0026#34;.\u0026#34; IN { type hint; file \u0026#34;named.ca\u0026#34;; }; include \u0026#34;/etc/named.rfc1912.zones\u0026#34;; include \u0026#34;/etc/named.root.key\u0026#34;; 重啟服務\nsystemctl restart named [BIND 新增 zone及解析]\n在主設定檔新增zone\nvim /etc/named.conf zone \u0026#34;orz\u0026#34; IN { type master; file \u0026#34;orz.zone\u0026#34;; }; 在新路徑中新增zone紀錄\nvim /var/named/chroot/var/named/orz.zone $TTL 86400 @ IN SOA @ rname.invalid. ( 2017030903 1D 1H 1W 3H ) NS localhost. note [WINDOWS 驗證:]\n將windows 網卡DNS設定為 DNS-SERVER 172.16.0.222\n不用綁 hosts 即可訪問\n","date":"2022-12-03T00:00:00Z","image":"https://note.laurance.ml/p/dns_server-bind-%E5%AE%89%E8%A3%9D%E8%88%87%E8%A8%AD%E5%AE%9A/100_hu4f6562e501064fb4525a6459b027d812_33292_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/dns_server-bind-%E5%AE%89%E8%A3%9D%E8%88%87%E8%A8%AD%E5%AE%9A/","title":"DNS_SERVER-BIND 安裝與設定"},{"content":"開啟錯誤提示\ndisplay_errors = On 關閉錯誤提示\ndisplay_errors = Off 輸出全部錯誤\nerror_reporting E_ALL 除了 Notice 外，全部錯誤輸出\nerror_reporting E_ALL \u0026amp; ~E_NOTICE 不輸出任何錯誤\nerror_reporting 0 ","date":"2022-12-03T00:00:00Z","image":"https://note.laurance.ml/p/php-%E9%96%8B%E5%95%9F%E5%8F%8A%E9%97%9C%E9%96%89%E9%8C%AF%E8%AA%A4%E8%A8%8A%E6%81%AF%E8%BC%B8%E5%87%BA/100_hu2ca637fb1d0a70ad637da30e1c6e56b4_46154_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/php-%E9%96%8B%E5%95%9F%E5%8F%8A%E9%97%9C%E9%96%89%E9%8C%AF%E8%AA%A4%E8%A8%8A%E6%81%AF%E8%BC%B8%E5%87%BA/","title":"PHP-開啟及關閉錯誤訊息輸出"},{"content":"安裝依賴 yum install curl unzip man-db 安裝 Rclone curl https://rclone.org/install.sh | bash 建立設定檔並進入交互式操作 rclone config 回答 n 以建立新的遠端服務 name 這邊以 goodle-drive 示範 打入 Google Drive 對應序號 18 client_id \u0026gt; 通常直接按 enter 不需填入 client_secret \u0026gt; 通常直接按 enter 不需填入 scope \u0026gt; 選 1 獲取全部權限 root_folder_id \u0026gt; 通常直接按 enter 不需填入 service_account_file \u0026gt; 通常直接按 enter 不需填入 Edit advanced config ? 選 n 不需要進階設定 Use web browser to automatically authenticate rclone with remote ? 選 n 遠程取 Token Use auto config ? 選 n 遠程取 Token 並複製 TOKEN 至 config_token (取 TOKEN 看下面) 以下至 Windows 進行操作，驗證登入取 TOKEN\n在本地 Windows 下載 rclone https://downloads.rclone.org/rclone-current-windows-amd64.zip\n載完解壓縮至慣用資料夾 WIN + X + A 叫出 Powershell cd 至剛剛壓縮的資料夾底下 [.exe執行檔這層] 執行語法 .\\rclone authorize \u0026quot;要驗證的雲端\u0026quot; ps. google_drive 為 drive 驗證完成後會出現以下畫面 最後將剛剛 powershell 驗證過的 TOKEN 貼入 LINUX 常用語法 (以 dropbox 為例)\nrclone命令範例 功能 rclone lsd dropbox:路徑 列出資料夾 rclone ls dropbox:路徑 列出檔案 (路徑，大小) rclone lsl dropbox:路徑 列出檔案的修改時間、路徑、大小等 rclone size dropbox:路徑 路徑 的檔案大小合計 rclone mkdir dropbox:路徑 建立資料夾 路徑 rclone rmdir dropbox:路徑 移除資料夾 路徑 rclone delete dropbox:路徑 刪除檔案 rclone –min-size 100M lsl dropbox:doc 列出 /doc 資料夾裡超過100MB的檔案 rclone –dry-run –min-size 100M delete dropbox:doc 測試一下會刪掉那些檔 rclone –min-size 100M delete dropbox:doc 確定刪除 rclone copy d:\\doc\\test.doc dropbox:doc 拷貝檔案 rclone copy dropoox:doc dropbox:backup/20160315 直接在Dropbox上拷貝檔案 rclone sync d:\\doc dropbox:doc 同步處理 rclone -v 顯示所有指令與選項之說明 ","date":"2022-11-27T00:00:00Z","image":"https://note.laurance.ml/p/centos7%E4%B8%8A%E4%BD%BF%E7%94%A8rclone%E9%81%A0%E7%AB%AF%E5%82%99%E4%BB%BD%E8%87%B3%E9%9B%B2%E7%AB%AF/100_hud1173e144569cec1c001e63ae0101148_19051_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos7%E4%B8%8A%E4%BD%BF%E7%94%A8rclone%E9%81%A0%E7%AB%AF%E5%82%99%E4%BB%BD%E8%87%B3%E9%9B%B2%E7%AB%AF/","title":"CentOS7上使用Rclone遠端備份至雲端"},{"content":"PMA\n下載 PMA 安裝包\nwget https://files.phpmyadmin.net/phpMyAdmin/4.9.10/phpMyAdmin-3.4.9-all-languages.tar.gz tar zxvf phpMyAdmin-3.4.9-all-languages.tar.gz cp -Rf phpMyAdmin-3.4.9-all-languages /home/phpMyAdmin cd /home/phpMyAdmin cp config.sample.inc.php config.inc.php 編輯 PMA 設定檔 [ 實測不能單台多套]\nvim config.inc.php \u0026lt;?php /* vim: set expandtab sw=4 ts=4 sts=4: */ /** * phpMyAdmin sample configuration, you can use it as base for * manual configuration. For easier setup you can use setup/ * * All directives are explained in documentation in the doc/ folder * or at \u0026lt;https://docs.phpmyadmin.net/\u0026gt;. * * @package PhpMyAdmin */ /** * This is needed for cookie based authentication to encrypt password in * cookie. Needs to be 32 chars long. */ //$cfg[\u0026#39;blowfish_secret\u0026#39;] = \u0026#39;3d21cb29984ee1ebccec07d650032\u0026#39;; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */ //$cfg[\u0026#39;blowfish_secret\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;UploadDir\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;SaveDir\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;blowfish_secret\u0026#39;] = \u0026#39;laurance\u0026#39;; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */ $cfg[\u0026#39;PmaAbsoluteUri\u0026#39;] = \u0026#39;http://phpmyadmin.project.orz/\u0026#39;; $cfg[\u0026#39;UploadDir\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;SaveDir\u0026#39;] = \u0026#39;\u0026#39;; /** * Servers configuration */ $i = 0; /** * First server */ //----------------------------------------------------------------------- pma/pma $i++; /* Authentication type */ $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;auth_type\u0026#39;] = \u0026#39;http\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;host\u0026#39;] = \u0026#39;172.16.0.222\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;port\u0026#39;] = \u0026#39;3306\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;user\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;password\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;extension\u0026#39;] = \u0026#39;mysqli\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;compress\u0026#39;] = false; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;AllowNoPassword\u0026#39;] = true; /* Advanced phpMyAdmin features */ $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;pmadb\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;bookmarktable\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;relation\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;table_info\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;table_coords\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;pdf_pages\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;column_info\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;history\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;designer_coords\u0026#39;] = \u0026#39;\u0026#39;; $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;tracking\u0026#39;] = \u0026#39;\u0026#39;; //----------------------------------------------------------------------- pmas/pmas /* Server parameters */ //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;auth_type\u0026#39;] = \u0026#39;http\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;host\u0026#39;] = \u0026#39;172.16.0.222\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;port\u0026#39;] = \u0026#39;3307\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;user\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;password\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;extension\u0026#39;] = \u0026#39;mysqli\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;compress\u0026#39;] = false; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;AllowNoPassword\u0026#39;] = true; /* Advanced phpMyAdmin features */ //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;pmadb\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;bookmarktable\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;relation\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;table_info\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;table_coords\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;pdf_pages\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;column_info\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;history\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;designer_coords\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;tracking\u0026#39;] = \u0026#39;\u0026#39;; //----------------------------------------------------------------------- /** * phpMyAdmin configuration storage settings. */ /* User used to manipulate with storage */ // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;controlhost\u0026#39;] = \u0026#39;\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;controlport\u0026#39;] = \u0026#39;\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;controluser\u0026#39;] = \u0026#39;pma\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;controlpass\u0026#39;] = \u0026#39;pmapass\u0026#39;; /* Storage database and tables */ // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;pmadb\u0026#39;] = \u0026#39;phpmyadmin\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;bookmarktable\u0026#39;] = \u0026#39;pma__bookmark\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;relation\u0026#39;] = \u0026#39;pma__relation\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;table_info\u0026#39;] = \u0026#39;pma__table_info\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;table_coords\u0026#39;] = \u0026#39;pma__table_coords\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;pdf_pages\u0026#39;] = \u0026#39;pma__pdf_pages\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;column_info\u0026#39;] = \u0026#39;pma__column_info\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;history\u0026#39;] = \u0026#39;pma__history\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;table_uiprefs\u0026#39;] = \u0026#39;pma__table_uiprefs\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;tracking\u0026#39;] = \u0026#39;pma__tracking\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;userconfig\u0026#39;] = \u0026#39;pma__userconfig\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;recent\u0026#39;] = \u0026#39;pma__recent\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;favorite\u0026#39;] = \u0026#39;pma__favorite\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;users\u0026#39;] = \u0026#39;pma__users\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;usergroups\u0026#39;] = \u0026#39;pma__usergroups\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;navigationhiding\u0026#39;] = \u0026#39;pma__navigationhiding\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;savedsearches\u0026#39;] = \u0026#39;pma__savedsearches\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;central_columns\u0026#39;] = \u0026#39;pma__central_columns\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;designer_settings\u0026#39;] = \u0026#39;pma__designer_settings\u0026#39;; // $cfg[\u0026#39;Servers\u0026#39;][$i][\u0026#39;export_templates\u0026#39;] = \u0026#39;pma__export_templates\u0026#39;; /** * End of servers configuration */ /** * Directories for saving/loading files from server */ //$cfg[\u0026#39;UploadDir\u0026#39;] = \u0026#39;\u0026#39;; //$cfg[\u0026#39;SaveDir\u0026#39;] = \u0026#39;\u0026#39;; /** * Whether to display icons or text or both icons and text in table row * action segment. Value can be either of \u0026#39;icons\u0026#39;, \u0026#39;text\u0026#39; or \u0026#39;both\u0026#39;. * default = \u0026#39;both\u0026#39; */ //$cfg[\u0026#39;RowActionType\u0026#39;] = \u0026#39;icons\u0026#39;; /** * Defines whether a user should be displayed a \u0026#34;show all (records)\u0026#34; * button in browse mode or not. * default = false */ //$cfg[\u0026#39;ShowAll\u0026#39;] = true; /** * Number of rows displayed when browsing a result set. If the result * set contains more rows, \u0026#34;Previous\u0026#34; and \u0026#34;Next\u0026#34;. * Possible values: 25, 50, 100, 250, 500 * default = 25 */ //$cfg[\u0026#39;MaxRows\u0026#39;] = 50; /** * Disallow editing of binary fields * valid values are: * false allow editing * \u0026#39;blob\u0026#39; allow editing except for BLOB fields * \u0026#39;noblob\u0026#39; disallow editing except for BLOB fields * \u0026#39;all\u0026#39; disallow editing * default = \u0026#39;blob\u0026#39; */ //$cfg[\u0026#39;ProtectBinary\u0026#39;] = false; /** * Default language to use, if not browser-defined or user-defined * (you find all languages in the locale folder) * uncomment the desired line: * default = \u0026#39;en\u0026#39; */ //$cfg[\u0026#39;DefaultLang\u0026#39;] = \u0026#39;en\u0026#39;; //$cfg[\u0026#39;DefaultLang\u0026#39;] = \u0026#39;de\u0026#39;; /** * How many columns should be used for table display of a database? * (a value larger than 1 results in some information being hidden) * default = 1 */ //$cfg[\u0026#39;PropertiesNumColumns\u0026#39;] = 2; /** * Set to true if you want DB-based query history.If false, this utilizes * JS-routines to display query history (lost by window close) * * This requires configuration storage enabled, see above. * default = false */ //$cfg[\u0026#39;QueryHistoryDB\u0026#39;] = true; /** * When using DB-based query history, how many entries should be kept? * default = 25 */ //$cfg[\u0026#39;QueryHistoryMax\u0026#39;] = 100; /** * Whether or not to query the user before sending the error report to * the phpMyAdmin team when a JavaScript error occurs * * Available options * (\u0026#39;ask\u0026#39; | \u0026#39;always\u0026#39; | \u0026#39;never\u0026#39;) * default = \u0026#39;ask\u0026#39; */ //$cfg[\u0026#39;SendErrorReports\u0026#39;] = \u0026#39;always\u0026#39;; /** * You can find more configuration options in the documentation * in the doc/ folder or at \u0026lt;https://docs.phpmyadmin.net/\u0026gt;. */ PMA\n$cfg['Servers'][$i]['auth_type'] = 'config' config: 安全性最差也最方便，因為你必須將MySQL帳號、密碼儲存在config之中，換句話說你不需要輸入帳號密碼即可登入\nhttp: 只要使用MySQL中建立的有效帳號即可登入\ncookie: MySQL帳號、密碼會儲存在cookie之中，不過在本次session結束之後會將密碼刪除 採用cookie的驗證方式，需要再額外設定『blowfish_secret』用來作為加密的key。\nMySQL\nMySQL 記得加帳號及權限\nCREATE USER 'pma'@'%' IDENTIFIED BY 'pma'; grant all on *.* to 'pma'@'%'; flush privileges; NGINX\nserver { listen 80; server_name phpmyadmin.project.orz; index index.php index.html; root /home/pma/; include vhost/file1.conf; access_log logs/pma/pma.acc access; } WINDOWS 本機綁 hosts \u0026gt; 172.16.0.222 phpmyadmin.project.orz phpmyadmin.project.orz 登入 \u0026gt; [mysql帳密] ","date":"2022-11-22T00:00:00Z","image":"https://note.laurance.ml/p/pma-%E7%92%B0%E5%A2%83%E5%AE%89%E8%A3%9D/100_hu4c5fb71db444766758acf084cd136252_57405_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/pma-%E7%92%B0%E5%A2%83%E5%AE%89%E8%A3%9D/","title":"PMA-環境安裝"},{"content":"# 清除預設表 filter 中，所有規則鏈中的規則 iptables -F # 清除預設表 filter 中，使用者自訂鏈中的規則 iptables -X # 將所有的 chain 的計數與流量統計都歸零 iptables -Z # 允許所有輸入的封包 iptables -P INPUT ACCEPT # 允許所有輸出的封包 iptables -P OUTPUT ACCEPT # 允許所有轉發的封包 iptables -P FORWARD ACCEPT ","date":"2022-11-18T00:00:00Z","image":"https://note.laurance.ml/p/linux-iptables-%E6%B8%85%E9%99%A4%E6%89%80%E6%9C%89%E8%A6%8F%E5%89%87/100_hufccc25f98c07fbd5a07eedc8b57cae89_16682_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/linux-iptables-%E6%B8%85%E9%99%A4%E6%89%80%E6%9C%89%E8%A6%8F%E5%89%87/","title":"Linux-Iptables-清除所有規則"},{"content":"將規則用號碼列出,並篩出該IP iptables -nL --line-number |grep 52.52.52.52 將該chain裡的第41行砍掉 iptables -D deny 41 ","date":"2022-11-18T00:00:00Z","image":"https://note.laurance.ml/p/linux-iptables-%E7%A7%BB%E9%99%A4%E6%9F%90%E4%B8%80%E6%A2%9D%E8%A6%8F%E5%89%87/100_hufccc25f98c07fbd5a07eedc8b57cae89_16682_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/linux-iptables-%E7%A7%BB%E9%99%A4%E6%9F%90%E4%B8%80%E6%A2%9D%E8%A6%8F%E5%89%87/","title":"Linux-Iptables-移除某一條規則"},{"content":"server { listen 80; server_name aaa.abc.com; location / { proxy_set_header X-Real-IP $remote_addr;\t# 定義header記錄使用者真实IP proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\t# 讓後端的Web伺服器可以取得使用者真實IP proxy_redirect off;\t# 重新定向url-OFF proxy_http_version 1.1;\t# 默认http版本为1.0,开启对http1.1支持 proxy_pass http://127.0.0.1:3001; proxy_set_header X_FORWARDED_HOST $host;\t# 客戶端調用服務端所使用的 host-ip #proxy_set_header X_FORWARDED_PORT 90;\t# 用於連接到負載均衡器的端口號 proxy_set_header Host $http_host;\t# 反向代理後標頭為HOST原始字段 proxy_ignore_client_abort on;\t# 默認是關閉的，即請求過程中如果客戶端主動關閉請求或者客戶端網絡斷掉，那麼Nginx會記錄499 proxy_read_timeout 300;\t# 定義一個nginx等待real server響應數據的超時時間 proxy_ignore_headers \u0026quot;Cache-Control\u0026quot;;\t#忽略被代理伺服器設定的\u0026quot;Cache-Control\u0026quot;頭資訊 add_header X-Cache \u0026quot;$upstream_cache_status from $server_addr\u0026quot;; #顯示緩存是否命中 add_header Cache-Control max-age=60;\t# 客戶端本地的緩存，在配置的生存時間內的，客戶端可以直接使用 proxy_cache_valid 304 1m;\t# 對響應狀態碼為304的響應快取1m #proxy_cache_valid 301 302 1m; proxy_cache two; #proxy_cache_valid any 1m; proxy_cache_key $host$uri$is_args$args;\t# 每筆快取儲存的鍵值方式 } access_log logs/aaa.abc.acc access; } ","date":"2022-11-17T00:00:00Z","image":"https://note.laurance.ml/p/nginx-proxy%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-proxy%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/","title":"Nginx-proxy常用配置"},{"content":"步驟\n1. 斷電 (記得要將插座電閘與漏電電閘斷掉) ps. 插座電閘在下面,沒拍到 2. 將插座面板拆下,圖為面板背面 (拆下需將一字起插進橫向插孔再將線拔出即可) 3. 將舊的面板拆下後,換上新面板 (記得一定不要插錯位置,不然短路後果會很嚴重 !!!!!) 4. 一定確定沒插錯後,再將面板鎖回去,將插座電閘與漏電電閘打開 5. 插座面板: 短的帶電 (火線) 長的不帶電 (中性線) ","date":"2022-11-14T00:00:00Z","image":"https://note.laurance.ml/p/%E6%9B%B4%E6%8F%9B%E6%8F%92%E5%BA%A7%E7%B4%80%E9%8C%84/100_hu812fe91f81cbd42923f38749a60c4afd_2721_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/%E6%9B%B4%E6%8F%9B%E6%8F%92%E5%BA%A7%E7%B4%80%E9%8C%84/","title":"更換插座紀錄"},{"content":"登入 LINE Notify\n選擇要接收通知的聊天室\n把產生的權證記錄下來\nAPI\n參考\n","date":"2022-11-10T00:00:00Z","image":"https://note.laurance.ml/p/line-notify/100_hu812fe91f81cbd42923f38749a60c4afd_2721_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/line-notify/","title":"LINE Notify"},{"content":"安裝Grafana套件\ngrafana-cli plugins install grafana-polystat-panel 服務重啟\nservice grafana-server restart 查看telegraf的PID\nps aux |grep telegraf |grep -v 'grep'|awk '{print $2}' 建立監控並寫入InfluDB的 Shell，並給予權限\nvim live.sh \u0026amp;\u0026amp; chmod 755 live.sh 建立排程 (SHELL:每2秒執行一次)\ncrontab -e * * * * * sh /home/grafana/crontab-live.sh Grafana後台-建立新panel並設置\n最後記得要SAVE，不然得重頭在來\n","date":"2022-11-03T00:00:00Z","image":"https://note.laurance.ml/p/grafana-polystat-panel%E4%BD%BF%E7%94%A8/100_hu620c7a524b6dcb360e250bc73a09da7c_32448_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/grafana-polystat-panel%E4%BD%BF%E7%94%A8/","title":"Grafana-Polystat panel使用"},{"content":"\n接收方 (目的): 172.16.0.222 服務需開啟: rsync --daemon --config=/etc/rsyncd.conf 設定檔: [update] path = /root/iptables # (位置寫死) auth users = update hosts allow = 172.16.0.223 uid = root gid = root secrets file = /etc/rsync5.secrets read only = no 密碼放置及格式: vim /etc/rsync5.secrets update:qwe999 (格式) -------------------------------------------- 發送方 (來源): 172.16.0.223 服務不用開啟 需建置密碼 vim /etc/rsync5.secrets qwe999 (格式) 同步語法: rsync -aHSz --password-file=/etc/rsync5.secrets /root/iptables update@172.16.0.222::update ","date":"2022-10-27T00:00:00Z","image":"https://note.laurance.ml/p/centos7%E4%B8%8A%E4%BD%BF%E7%94%A8rsync%E4%B8%8D%E5%90%8C%E6%A9%9F%E5%99%A8%E5%82%99%E4%BB%BD/100_hud1173e144569cec1c001e63ae0101148_19051_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos7%E4%B8%8A%E4%BD%BF%E7%94%A8rsync%E4%B8%8D%E5%90%8C%E6%A9%9F%E5%99%A8%E5%82%99%E4%BB%BD/","title":"CentOS7上使用Rsync不同機器備份"},{"content":"主要修改參數\ninnodb_buffer_pool_size 默認大小為128M,健康比例為內存大小 50% (值越大,IO讀寫就越少,數據讀寫就越快) innodb_log_file_size 一般取256M的倍數,並結合innodb_buffer_pool_size設置其大小 25%-50% innodb_log_buffer_size 一般取16M的倍數 innodb_buffer_pool_instances 一般取innodb_buffer_pool_size的50% 效果最優 EX: 跑兩套 mysqld_multi 本機記憶體:31798M (32G) innodb_buffer_pool_size = 8G innodb_log_buffer_size = 32M innodb_log_file_size = 1G innodb_flush_log_at_trx_commit = 2 innodb_buffer_pool_instances = 6 #innodb_file_format=barracuda #innodb_file_format_max=barracuda innodb_file_per_table=1 配置完後,重啟服務生校 進入mysql查看配置是否正確 show variables where variable_name in (\u0026#39;innodb_buffer_pool_size\u0026#39;, \\ \u0026#39;innodb_buffer_pool_instances\u0026#39; ,\\ \u0026#39;innodb_log_buffer_size\u0026#39; ,\\ \u0026#39;innodb_log_file_size\u0026#39;); 整理公式: ps. percent 必須 \u0026gt;= 95% percent = innodb_buffer_pool_read_requests / (innodb_buffer_pool_reads + innodb_buffer_pool_read_requests) * 100% innodb_buffer_pool_pages_total = innodb_buffer_pool_size / innodb_page_size percent = innodb_buffer_pool_pages_data / innodb_buffer_pool_pages_total * 100% innodb_buffer_pool_size = innodb_buffer_pool_pages_data * innodb_page_size * 1.05 / (1024*1024*1024) ","date":"2022-10-26T00:00:00Z","image":"https://note.laurance.ml/p/mysql-%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE-buffer-pool/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE-buffer-pool/","title":"Mysql-如何配置 buffer pool"},{"content":"Linux 建立每日備份 Shell Script\n#!/bin/sh # Definded Dump Configuartion rollingDays=7 dumpFilename=\u0026quot;mongodb\u0026quot; dumpTmpDir=\u0026quot;/tmp/mongo-dump-tmp\u0026quot; backupPath=\u0026quot;/root/mongo-backup\u0026quot; username=\u0026quot;username\u0026quot; password=\u0026quot;password\u0026quot; hostname=\u0026quot;127.0.0.1\u0026quot; database=\u0026quot;my-mongo\u0026quot; #Start Dumpping....... today=`date \u0026quot;+%Y-%m-%d\u0026quot;` echo \u0026quot;Today: ${today}\u0026quot; echo \u0026quot;Start Dumpping.......\u0026quot; # Make backup directory if ! [ -d \u0026quot;${backupPath}\u0026quot; ] ; then echo \u0026quot;make dir : ${backupPath}\u0026quot; mkdir -p \u0026quot;${backupPath}\u0026quot; fi if ! [ -d \u0026quot;${dumpTmpDir}\u0026quot; ] ; then echo \u0026quot;make dir : ${dumpTmpDir}\u0026quot; mkdir -p \u0026quot;${dumpTmpDir}\u0026quot; fi # Make parameter dn=\u0026quot;-h ${hostname}\u0026quot; if [ \u0026quot;${username}\u0026quot; != \u0026quot;\u0026quot; ] \u0026amp;\u0026amp; [ \u0026quot;${password}\u0026quot; != \u0026quot;\u0026quot; ] ; then dn=\u0026quot;${dn} -u ${username} -p ${password}\u0026quot; fi if [ \u0026quot;${databse}\u0026quot; != \u0026quot;\u0026quot; ] ; then dn=\u0026quot;${dn} -d ${database}\u0026quot; fi # Run backup script rm -rf -R ${dumpTmpDir} command=\u0026quot;mongodump ${dn} -o ${dumpTmpDir}\u0026quot; echo $command $command if [ $? == 0 ] ; then cd \u0026quot;${dumpTmpDir}\u0026quot; /bin/tar -zcvf \u0026quot;${backupPath}/${dumpFilename}-${today}.tar.gz\u0026quot; * find ${backupPath}/${dumpFilename}-* -mtime +{rollingDays} -exec rm -f {} \\; fi rm -rf -R ${dumpTmpDir} 參考文件\n","date":"2022-10-22T00:00:00Z","image":"https://note.laurance.ml/p/mongod-%E5%BB%BA%E7%AB%8B%E6%AF%8F%E6%97%A5%E5%82%99%E4%BB%BD-shell-script/100_hu5573e9113ac5ca93c9830f3619376466_35662_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mongod-%E5%BB%BA%E7%AB%8B%E6%AF%8F%E6%97%A5%E5%82%99%E4%BB%BD-shell-script/","title":"Mongod- 建立每日備份 Shell Script"},{"content":"新建立連線 打上 host , port 儲存 studio 3T for windows\n","date":"2022-10-22T00:00:00Z","image":"https://note.laurance.ml/p/mongod-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8studio-3t%E9%81%A0%E7%AB%AF%E5%BB%BA%E7%AB%8B%E9%80%A3%E7%B7%9A/100_hu5573e9113ac5ca93c9830f3619376466_35662_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mongod-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8studio-3t%E9%81%A0%E7%AB%AF%E5%BB%BA%E7%AB%8B%E9%80%A3%E7%B7%9A/","title":"Mongod-如何使用studio 3T遠端建立連線"},{"content":"先建立要備份的資料庫 (否則會備份失敗)\nmkdir /root/168-mongo.bak\n透過以下命令進行單個資料庫備份 (參數 -d 資料庫)\nmongodump -h 172.16.2.169 --port 27017 -d my-mongo -o ./root/168-mongo.bak 透過以下命令進行全部資料庫備份\nmongodump -h 172.16.2.169 --port 27017 -o ./root/168-mongo.bak 透過以下命令進行本機備份 (解決Authentication failed.)\nmongodump -o mongodb-dump/ 透過以下命令還原剛剛備份的資料庫\nmongorestore -h 127.0.0.1 --port 27017 /root/168-mongo.bak 會報錯 ERROR - E11000 duplicate key error 重複密鑰錯誤集合\n(加入參數 --drop my-backup) 注意!!! 任何不在備份中的文件都將永久丟失！ mongorestore -h 127.0.0.1 --port 27017 /root/168-mongo.bak --drop ","date":"2022-10-22T00:00:00Z","image":"https://note.laurance.ml/p/mongod-%E5%A6%82%E4%BD%95%E5%82%99%E4%BB%BD%E8%88%87%E9%82%84%E5%8E%9F-mongodb/100_hu5573e9113ac5ca93c9830f3619376466_35662_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mongod-%E5%A6%82%E4%BD%95%E5%82%99%E4%BB%BD%E8%88%87%E9%82%84%E5%8E%9F-mongodb/","title":"Mongod-如何備份與還原 MongoDB"},{"content":"需先安裝 redis-cli\n安裝ruby跟gem\nyum -y install ruby ruby-devel yum -y install rubygems 使用gem裝rvm\n載入來源及憑證 gem sources -a http://mirrors.aliyun.com/rubygems/ gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB 使用腳本安裝 curl -sSL https://get.rvm.io | bash -s stable 這時會報錯讀不到憑證 再重新載入一次即可 curl -sSL https://rvm.io/mpapis.asc | gpg2 --import - curl -sSL https://rvm.io/pkuczynski.asc | gpg2 --import - 再重新安裝一次 curl -sSL https://get.rvm.io | bash -s stable 載入rvm腳本 source /etc/profile.d/rvm.sh rvm版本確認 rvm -v 再用rvm升級ruby\n安裝ruby 2.5版 rvm install 2.5 ruby版本確認 ruby --version 再用gem安裝redis-dump\ngem install redis-dump 報錯 ERROR 需要再安裝 yajl-ruby gem install yajl-ruby -v 1.4.1 gem install redis-dump 重新再安裝一次即可 redis備份及匯入語法 (可以使用別台的IP 遠端備份)\nEX: 備份語法 redis-dump -u 127.0.0.1:9736 -a 'redisPasword' \u0026gt; /root/info-redis-bak.json 匯入語法 \u0026lt;info-redis-bak.json redis-load -u 127.0.0.1:9736 ","date":"2022-10-22T00:00:00Z","image":"https://note.laurance.ml/p/redis-%E5%AE%89%E8%A3%9Dreids-dump%E5%82%99%E4%BB%BD/100_hu74f8d656a97bc6b7ca99b23e97f954a2_40393_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/redis-%E5%AE%89%E8%A3%9Dreids-dump%E5%82%99%E4%BB%BD/","title":"Redis-安裝reids-dump備份"},{"content":"EX: 查看是否安裝該套件 php -m |grep mongodb 查看該套件版本 php --ri mongodb ","date":"2022-10-21T00:00:00Z","image":"https://note.laurance.ml/p/php-%E6%9F%A5%E7%9C%8B%E6%93%B4%E5%B1%95%E6%9C%8D%E5%8B%99%E7%89%88%E6%9C%AC/100_hu2ca637fb1d0a70ad637da30e1c6e56b4_46154_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/php-%E6%9F%A5%E7%9C%8B%E6%93%B4%E5%B1%95%E6%9C%8D%E5%8B%99%E7%89%88%E6%9C%AC/","title":"PHP-查看擴展服務版本"},{"content":"將 80 PROT 轉向 8000 PORT\niptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8000 利用 OUTPUT 的規則，從本機連到自己\niptables -t nat -A OUTPUT -p tcp -d localhost --dport 80 -j REDIRECT --to-ports 8000 ","date":"2022-10-20T00:00:00Z","image":"https://note.laurance.ml/p/linux-iptables-%E8%BD%89%E7%99%BCport/100_hufccc25f98c07fbd5a07eedc8b57cae89_16682_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/linux-iptables-%E8%BD%89%E7%99%BCport/","title":"Linux-Iptables-轉發PORT"},{"content":"MySQL 一臺從庫的錯誤日誌，大量報下面的錯誤資訊\n檢查一下 ServerID 有沒有重複 show global variables like \u0026#39;server%id%\u0026#39;; 若 ServerID 沒重複的話那肯定就是 DB 的 UUID 重複了 解決方式 :\n到 MySQL 目錄將 auto.cnf 砍掉重新生成 cd /var/lib/mysql rm -f auto.cnf mysqld_multi stop 3 mysqld_multi start 3 ","date":"2022-10-19T00:00:00Z","image":"https://note.laurance.ml/p/mysql-%E5%A0%B1%E9%8C%AFslave-received-end-packet-from-server-apparent-master-shutdown/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-%E5%A0%B1%E9%8C%AFslave-received-end-packet-from-server-apparent-master-shutdown/","title":"Mysql-報錯Slave received end packet from server apparent master shutdown"},{"content":"在新建立的 Instances 右鍵選擇 Connect 選擇 RDP client 並點選 Get password 選擇 Browse (瀏覽) 並選取製作 instance 的金鑰 (.pem) 並選擇 Decrypt Password (解密密碼) 使用後台給的亂數密碼建立遠端桌面連線 (帳號預設都是 Administrator) 官方文件連結\n","date":"2022-10-18T00:00:00Z","image":"https://note.laurance.ml/p/aws-%E9%80%A3%E7%B7%9A%E8%87%B3-windows-ec2/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-%E9%80%A3%E7%B7%9A%E8%87%B3-windows-ec2/","title":"AWS-連線至 windows-ec2"},{"content":"點擊右上角 setting 左側欄 點擊 Developer settings 左側欄 點擊 Personal access tokens 生成新 Tokens 新增 Token Name 選擇過期時間 選擇鑰給予 Token 的權限 生成 Tokens ","date":"2022-10-17T00:00:00Z","image":"https://note.laurance.ml/p/git-%E5%BB%BA%E7%AB%8B%E8%A8%AA%E5%95%8Ftoken/100_hu84a3f5eaedd42f1ba0ce7aa2d6df9589_9187_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/git-%E5%BB%BA%E7%AB%8B%E8%A8%AA%E5%95%8Ftoken/","title":"Git-建立訪問Token"},{"content":"1.\t新增一個New Project 2.\t直接按下 Create \u0026gt;\u0026gt; Open in new window \u0026gt;\u0026gt; OK 3.\t打開遠端部署（Development）設定介面 4.\t按下 + \u0026gt;\u0026gt; Name \u0026gt;\u0026gt; Type: SFTP 5.\t測試IDE登入 再按Test SFTP connection 即可 SFTP host: IP Port : 22 Root path: / User name: jimide Auth type: OpenSSH or Putty Private key file: admin-jimide.pem ","date":"2022-10-17T00:00:00Z","image":"https://note.laurance.ml/p/phpstorm-idekey-%E9%80%A3%E6%8E%A5%E6%96%B9%E5%BC%8F/100_hu3a333275824308611dc35cf985b29c58_10546_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/phpstorm-idekey-%E9%80%A3%E6%8E%A5%E6%96%B9%E5%BC%8F/","title":"PHPstorm-IDEKEY 連接方式"},{"content":"1. Cacti 後台選 Thresholds \u0026gt;\u0026gt; Add 2. 寫入機器資訊 (Host , Graph , Data Source) 3. 設定監控相關參數 ","date":"2022-10-14T00:00:00Z","image":"https://note.laurance.ml/p/cacti-%E6%96%B0%E5%A2%9E%E6%A9%9F%E5%99%A8%E7%9B%A3%E6%8E%A7/100_hub50bab8a129011c882645158bcca07f0_64329_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/cacti-%E6%96%B0%E5%A2%9E%E6%A9%9F%E5%99%A8%E7%9B%A3%E6%8E%A7/","title":"Cacti-新增機器監控"},{"content":"Another Redis Desktop Manager for windows\n建立新連線 測試成功 ","date":"2022-10-13T00:00:00Z","image":"https://note.laurance.ml/p/redis-another-redis-desktop-manager-%E5%BB%BA%E7%AB%8B%E9%81%A0%E7%AB%AF%E9%80%A3%E7%B7%9A/100_hu74f8d656a97bc6b7ca99b23e97f954a2_40393_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/redis-another-redis-desktop-manager-%E5%BB%BA%E7%AB%8B%E9%81%A0%E7%AB%AF%E9%80%A3%E7%B7%9A/","title":"Redis-Another Redis Desktop Manager 建立遠端連線"},{"content":"方法一\n修改 redis 設定檔 (requirepass 參數) PWD: /usr/local/redis/etc/redis.conf 修改完之後重啟服務 service redis restart 方法二\n進服務修改 Password (此方法 Redis 重啟後，密碼會失效) # 設定密碼 127.0.0.1:6379\u0026gt; config set requirepass 123456 # 查詢密碼 127.0.0.1:6379\u0026gt; config get requirepass # 驗證密碼 127.0.0.1:6379\u0026gt; auth 123456 127.0.0.1:6379\u0026gt; config get requirepass 1) \u0026quot;requirepass\u0026quot; 2) \u0026quot;123456\u0026quot; 登入指令\nredis-cli -p 6379 -a test123 redis 127.0.0.1:6379\u0026gt; auth test123 ","date":"2022-10-13T00:00:00Z","image":"https://note.laurance.ml/p/redis-%E8%A8%AD%E7%BD%AEredis%E5%AF%86%E7%A2%BC/100_hu74f8d656a97bc6b7ca99b23e97f954a2_40393_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/redis-%E8%A8%AD%E7%BD%AEredis%E5%AF%86%E7%A2%BC/","title":"Redis-設置Redis密碼"},{"content":"查看 namespace\nkubectl get ns 查看 kubernetes-dashboard 的 namespace\nkubectl get ns kubernetes-dashboard -o json \u0026gt; kubernetes-dashboard.json 編輯 kubernetes-dashboard.json 檔\nvim kubernetes-dashboard.json 刪除前\n刪除後\n重新掛起 Proxy\nkubectl proxy --address='0.0.0.0' \u0026amp; curl刪除\ncurl -k -H \u0026quot;Content-Type:application/json\u0026quot; -X PUT --data-binary @kubernetes-dashboard.json http://127.0.0.1:8001/api/v1/namespaces/kubernetes-dashboard/finalize kubernetes-dashboard 已刪除\n","date":"2022-10-12T00:00:00Z","image":"https://note.laurance.ml/p/kubernetes-error-unable-to-create-new-content-is-being-terminated/100_hu011eff4eb1029f53348717cab0d2cf5f_19415_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/kubernetes-error-unable-to-create-new-content-is-being-terminated/","title":"Kubernetes-ERROR-unable to create new content is being terminated"},{"content":"Docker file包製作\nmkdir dockerfile/ \u0026amp;\u0026amp; cd dockerfile/ vim Dockerfile #/bin/bash FROM nginx ARG HTML #Change nginx config RUN rm /usr/share/nginx/html/index.html COPY ./$HTML /usr/share/nginx/html/index.html vim green.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta http-equiv=\u0026#34;Content-Type\u0026#34; content=\u0026#34;text/html; charset=utf-8\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body style=\u0026#34;background-color: green; color:#fff\u0026#34;\u0026gt; \u0026lt;h1\u0026gt;2022/10/12 ---Ingress-test\u0026lt;/h1\u0026gt; \u0026lt;table\u0026gt; \u0026lt;tbody\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Author\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;: Laurance\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Article Link\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;: \u0026lt;a href=\u0026#34;https://note.laurance.ml\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;2022/10/12 ---Ingress-test\u0026lt;/a\u0026gt;\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Topic\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;: \u0026lt;a href=\u0026#34;https://note.laurance.ml\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;2022/10/12 ---Ingress-test\u0026lt;/a\u0026gt;\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tbody\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; vim red.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta http-equiv=\u0026#34;Content-Type\u0026#34; content=\u0026#34;text/html; charset=utf-8\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body style=\u0026#34;background-color: red; color:#fff\u0026#34;\u0026gt; \u0026lt;h1\u0026gt;2022/10/12 ---Ingress-test\u0026lt;/h1\u0026gt; \u0026lt;table\u0026gt; \u0026lt;tbody\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Author\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;: Laurance\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Article Link\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;: \u0026lt;a href=\u0026#34;https://note.laurance.ml\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;2022/10/12 ---Ingress-test\u0026lt;/a\u0026gt;\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Topic\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;: \u0026lt;a href=\u0026#34;https://note.laurance.ml\u0026#34; target=\u0026#34;_blank\u0026#34;\u0026gt;2022/10/12 ---Ingress-test\u0026lt;/a\u0026gt;\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tbody\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 使用 docker build 建立 image $ docker build --build-arg HTML=green.html -t laurance/green . $ docker build --build-arg HTML=red.html -t laurance/red . 更改 TAG 名稱為 docker 用戶名 / image 名稱 $ docker tag laurance/red ihatemis/red $ docker tag laurance/green ihatemis/green 上傳至 Docker hub ，需要先 docker login $ docker push ihatemis/red:latest $ docker push ihatemis/green:latest Deplyment\nvim ingress.deployment.yaml #apiVersion: extensions/v1beta1 apiVersion: apps/v1 kind: Deployment metadata: name: red-nginx namespace: simple2 spec: selector: matchLabels: app: red-nginx replicas: 4 template: metadata: labels: app: red-nginx spec: containers: - name: nginx image: ihatemis/red:latest ports: - containerPort: 80 --- #apiVersion: extensions/v1beta1 apiVersion: apps/v1 kind: Deployment metadata: name: green-nginx namespace: simple2 spec: selector: matchLabels: app: green-nginx replicas: 2 template: metadata: labels: app: green-nginx spec: containers: - name: nginx image: ihatemis/green:latest ports: - containerPort: 80 kubectl apply -f ingress.deployment.yaml service\nvim ingress.service.yaml apiVersion: v1 kind: Service metadata: name: green-service namespace: simple2 spec: type: NodePort selector: app: green-nginx ports: - protocol: TCP port: 80 --- apiVersion: v1 kind: Service metadata: name: red-service namespace: simple2 spec: type: NodePort selector: app: red-nginx ports: - protocol: TCP port: 80 kubectl apply -f ingress.service.yaml Ingress\nvim ingress.yaml #apiVersion: extensions/v1beta1 apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: web namespace: simple2 annotations: nginx.ingress.kubernetes.io/rewrite-target: / spec: rules: - host: green.ingress.com http: paths: - path: / pathType: Prefix backend: service: name: green-service port: number: 80 - host: red.ingress.com http: paths: - path: / pathType: Prefix backend: service: name: red-service port: number: 80 kubectl apply -f ingress.yaml 將域名綁至 HOSTS\n172.16.0.223 red.ingress.com green.ingress.com 訪問 http://red.ingress.com\n訪問 http://green.ingress.com\n","date":"2022-10-12T00:00:00Z","image":"https://note.laurance.ml/p/kubernetes-ingress/100_hu011eff4eb1029f53348717cab0d2cf5f_19415_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/kubernetes-ingress/","title":"Kubernetes-Ingress"},{"content":"dashboard 出現以下畫面\n查看 dashboard pod 的 LOG\n# kubectl get pods -n kube-system|grep dash kubernetes-dashboard-6ff6454fdc-78fnx 1/1 Running 0 4h8m K8s LOG 報錯 Metric client health check failed: the server could not find the requested resource (get services heapster). Retrying in 30 seconds\n原因: kubernets用的比较高的版本，但dashboard版本用的比较低，因此報錯\n解決: 重新安裝 dashboard 版本\n先將舊的版本刪除 (將 dashboard 的 NS 刪除即可) kubectl delete ns kubernetes-dashboard 查看 kubernetes 版本 $ kubectl version --short Flag --short has been deprecated, and will be removed in the future. The --short output will become the default. Client Version: v1.25.2 Kustomize Version: v4.5.7 Server Version: v1.25.0 根據 kubernetes 版本 下載相對應的 dashboard 版本 下載網址連結\ndashboard v2.0.0-beta5 —\u0026gt; kubernetes 1.16 dashboard v2.0.0 —\u0026gt; kubernetes 1.18 dashboard v2.0.1 —\u0026gt; kubernetes 1.18 dashboard v2.0.2 —\u0026gt; kubernetes 1.18 dashboard v2.0.3 —\u0026gt; kubernetes 1.18 dashboard v2.0.4 —\u0026gt; kubernetes 1.19 dashboard v2.0.5 —\u0026gt; kubernetes 1.19 dashboard v2.1.0 —\u0026gt; kubernetes 1.20 dashboard v2.2.0 —\u0026gt; kubernetes 1.20 dashboard v2.3.0 —\u0026gt; kubernetes 1.21 dashboard v2.3.1 —\u0026gt; kubernetes 1.21 wget 下來修改 Service 的部分 wget https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml 修改為 Nodeport 方式訪問 kind: Service apiVersion: v1 metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboard spec: type: NodePort #新添加的 ports: - port: 443 targetPort: 8443 nodePort: 30003 #新添加的（可以改成其它的端口号，要大于30000） selector: k8s-app: kubernetes-dashboard --- 執行 yaml 文件 # kubectl apply -f recommended.yaml namespace/kubernetes-dashboard created serviceaccount/kubernetes-dashboard created service/kubernetes-dashboard created secret/kubernetes-dashboard-certs created secret/kubernetes-dashboard-csrf created secret/kubernetes-dashboard-key-holder created configmap/kubernetes-dashboard-settings created role.rbac.authorization.k8s.io/kubernetes-dashboard created clusterrole.rbac.authorization.k8s.io/kubernetes-dashboard created rolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created clusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created deployment.apps/kubernetes-dashboard created service/dashboard-metrics-scraper created deployment.apps/dashboard-metrics-scraper created 建立 dashboard 管理員 vim dashboard-admin.yaml kubectl create -f dashboard-admin.yaml apiVersion: v1 kind: ServiceAccount metadata: labels: k8s-app: kubernetes-dashboard name: dashboard-admin namespace: kubernetes-dashboard 建立 RBAC 分配權限 vim dashboard-admin-role.yaml kubectl create -f dashboard-admin-role.yaml apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: dashboard-admin-role labels: k8s-app: kubernetes-dashboard roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-admin subjects: - kind: ServiceAccount name: dashboard-admin namespace: kubernetes-dashboard kubectl get secret -n kubernetes-dashboard NAME TYPE DATA AGE dashboard-admin-token-fj9v6 kubernetes.io/service-account-token 3 95s default-token-lj7xg kubernetes.io/service-account-token 3 33m kubernetes-dashboard-certs Opaque 0 33m kubernetes-dashboard-csrf Opaque 1 33m kubernetes-dashboard-key-holder Opaque 2 33m kubernetes-dashboard-token-cdkzc kubernetes.io/service-account-token 3 33m dashboard-admin-token 是剛剛創建的，再篩出 TOKEN 即可 kubectl describe -n kubernetes-dashboard secret/dashboard-admin-token-fj9v6|grep token: token: eyJhbGciOiJSUzI1NiIsImtpZCI6ImJyYjJDR18tMDQtdkc3MzBBN0RwQU8zTlVjV01PM2w0dGRBWVh5UXhPN3MifQ.eyJpc3MiOiJrdWJlcm5ldGVz 輸入 https://172.16.0.223:30003 即可訪問 Dashboard ， 並輸入剛剛篩出的 TOKEN ","date":"2022-10-10T00:00:00Z","image":"https://note.laurance.ml/p/kubernetes-error-metric-client-health-check-failed/100_hu011eff4eb1029f53348717cab0d2cf5f_19415_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/kubernetes-error-metric-client-health-check-failed/","title":"Kubernetes-ERROR-Metric client health check failed"},{"content":"從cri-dockerd GitHub 頁面下載適當的二進制包\n$ wget https://github.com/Mirantis/cri-dockerd/releases/download/v0.2.0/cri-dockerd-v0.2.0-linux-amd64.tar.gz 解壓縮包\n$ tar xvf cri-dockerd-v0.2.0-linux-amd64.tar.gz 將 cri-dockerd 二進製文件移動到 usr/local/bin 目錄\nmv ./cri-dockerd /usr/local/bin/ 配置 systemd\n$ wget https://raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.service $ wget https://raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.socket $ mv cri-docker.socket cri-docker.service /etc/systemd/system/ $ sed -i -e 's,/usr/bin/cri-dockerd,/usr/local/bin/cri-dockerd,' /etc/systemd/system/cri-docker.service 啟用 cri-dockerd\n$ systemctl daemon-reload $ systemctl enable cri-docker.service $ systemctl enable --now cri-docker.socket 驗證該服務是否正在運行\n$ systemctl status cri-docker.socket ","date":"2022-10-10T00:00:00Z","image":"https://note.laurance.ml/p/kubernetes-install-cri-dockerd-on-linux/100_hu011eff4eb1029f53348717cab0d2cf5f_19415_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/kubernetes-install-cri-dockerd-on-linux/","title":"Kubernetes-install cri-dockerd on Linux"},{"content":"安装 LENS on Windows x64\nLENS 官方載點\n右上三條線點選 File \u0026raquo; Add Cluster 新增集群\n回到測試機上查看 minikube 設定檔\nkubectl config view 將測試機裡的 .minikube 隱藏檔資料夾 winscp 取出放到對應位置\nPWD: /root/.minikube 將測試機裡的 .kube 隱藏檔資料夾 winscp 取出放到對應位置，並修改路徑\nPWD: /root/.kube 將 .kube 下的 config 內容貼至 LENS \u0026raquo; File \u0026raquo; Add Cluster 新增集群\n雙擊連接即可\n","date":"2022-10-10T00:00:00Z","image":"https://note.laurance.ml/p/kubernetes-lens-%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E9%80%9A%E9%81%8E-ide-%E7%AE%A1%E7%90%86-minikube/100_hu011eff4eb1029f53348717cab0d2cf5f_19415_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/kubernetes-lens-%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E9%80%9A%E9%81%8E-ide-%E7%AE%A1%E7%90%86-minikube/","title":"Kubernetes-Lens 使用指南 通過 IDE 管理 minikube"},{"content":" Github Kubernetes Dashboard 這裡記錄一下安裝的過程\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml 這樣就安裝好了，然後看一下正在運行的容器\nkubectl get all -n kube-system -l k8s-app=kubernetes-dashboard 先把Iptables規則打開 (預設FORWARD是關閉的)\niptables -P FORWARD ACCEPT 確認火牆都關閉 firewalld \u0026amp;\u0026amp; selinux\nsystemctl stop firewalld getenforce \u0026gt;\u0026gt; disabled 設置一層代理讓外部訪問 dashboard\nkubectl proxy --address='0.0.0.0' --disable-filter=true \u0026amp; PS. disable-filter=true表示禁用請求過濾功能，否則我們的請求會被拒絕，並提示 Forbidden (403) Unauthorized 訪問 dashboard\nhttp://172.16.0.223:8001/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/#/service?namespace=default ","date":"2022-10-10T00:00:00Z","image":"https://note.laurance.ml/p/kubernetes-%E5%9C%A8%E6%9C%AC%E5%9C%B0%E7%AB%AF%E4%B8%8A%E5%BB%BA%E7%AB%8B-dashboard/100_hu011eff4eb1029f53348717cab0d2cf5f_19415_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/kubernetes-%E5%9C%A8%E6%9C%AC%E5%9C%B0%E7%AB%AF%E4%B8%8A%E5%BB%BA%E7%AB%8B-dashboard/","title":"Kubernetes-在本地端上建立 Dashboard"},{"content":"取得所有 Pods 的資訊\nkubectl get pods -o wide 取得某 Pod 的詳細資料\nkubectl describe pod \u0026lt;pod Name\u0026gt; 修改 Pods 的資訊\nkubectl edit pods -n \u0026lt;namespace\u0026gt; \u0026lt;pod Name\u0026gt; 查看 Pods 事件\nkubectl describe pod \u0026lt;pod Name\u0026gt; 查看 Pods 日志文件\nkubectl logs -f \u0026lt;pod Name\u0026gt; 刪除這個 pod\nkubectl delete -f pod-demo.yaml 使用 yaml 創建 Pods\nkubectl apply -f laurance-test.yaml 進入 Pods 內部\nkubectl exec -it \u0026lt;pod Name\u0026gt; /bin/bash 查看各節點狀態\nkubectl get node \u0026lt;node name\u0026gt; 查看各節點事件\nkubectl describe node \u0026lt;node name\u0026gt; 查看系统 Kubelet 日志 1000行\njournalctl -l -u kubelet -n 1000 將 YAML 導出\nkubectl get service \u0026lt;serviceName\u0026gt; -o yaml \u0026gt; backup.yaml 檢查叢集狀態\nkubectl get all ","date":"2022-10-10T00:00:00Z","image":"https://note.laurance.ml/p/kubernetes-%E5%B8%B8%E8%A6%8B-kubectl-%E6%8C%87%E4%BB%A4/100_hu011eff4eb1029f53348717cab0d2cf5f_19415_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/kubernetes-%E5%B8%B8%E8%A6%8B-kubectl-%E6%8C%87%E4%BB%A4/","title":"Kubernetes-常見 kubectl 指令"},{"content":"插件列表\nminikube addons list 插件啟用\nminikube addons enable ADDON_NAME 插件禁用\nminikube addons disable ADDON_NAME 不使用任何驅動開啟集群\nminikube start --driver=none 停止集群\nminikube stop 删除集群\nminikube delete 不影响已部署应用情况下暂停 Kubernetes\nminikube pause 取消暂停的instance\nminikube unpause 增加默认内存限制（需重启）\nminikube config set memory 16384 各節點操作\nminikube node [add|start|stop|delete|list] 額外啟動參數\n--image-mirror-country=cn # 镜像所在国家 --image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers # 镜像仓库地址 --cpus=2 # 设置minikube虚拟机分配CPU核数 --memory=2000mb # 设置minikube虚拟机分配内存 --kubernetes-version=version # 使用的kubernetes版本 --docker-env http_proxy=http://IP:7890 http_proxy=https://IP:7890 # minikube虚拟机内部docker使用代理地址 # 指定驱动 --vm-driver=none 在主机上运行Kubernetes组件，而不是在VM中,该方式驱动依赖Docker --vm-driver=virtualbox 表示用虚拟机,默认 PS. 不通过\u0026ndash;vm-driver=none参数启动，则创建的Pod、Service均不能通过外网访问，只能minikube ssh 进入集群访问操作\n參考文獻\n","date":"2022-10-10T00:00:00Z","image":"https://note.laurance.ml/p/kubernetes-%E5%B8%B8%E8%A6%8B-minikube-%E6%8C%87%E4%BB%A4/100_hu011eff4eb1029f53348717cab0d2cf5f_19415_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/kubernetes-%E5%B8%B8%E8%A6%8B-minikube-%E6%8C%87%E4%BB%A4/","title":"Kubernetes-常見 minikube 指令"},{"content":"重啟網路報錯 Bringing up interface eth0: Determining if ip address 172.16.0.224 is already in use for device eth0\u0026hellip;\n加上 ARPCHECK=no 重啟網路就好了\nvi /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=eth0 HWADDR=XX:XX:XX:XX:XX:XX TYPE=Ethernet UUID=5248d5f6-7d7b-42ee-9443-e2f627c73677 ONBOOT=yes NM_CONTROLLED=yes BOOTPROTO=static IPADDR=172.16.0.224 GATEWAY=172.16.0.1 NETMASK=255.255.0.0 DNS1=8.8.8.8 DNS2=9.9.9.9 ARPCHECK=no ","date":"2022-10-07T00:00:00Z","image":"https://note.laurance.ml/p/centos-%E5%95%9F%E5%8B%95%E7%B6%B2%E8%B7%AF%E6%99%82%E5%87%BA%E7%8F%BE-bring-up-interface-ip-address-is-already-in-use-for-device-eth0/100_huc03b46b7f8bda3b0ed1195c88ee7f533_13486_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos-%E5%95%9F%E5%8B%95%E7%B6%B2%E8%B7%AF%E6%99%82%E5%87%BA%E7%8F%BE-bring-up-interface-ip-address-is-already-in-use-for-device-eth0/","title":"Centos-啟動網路時出現 bring up interface ip address is already in use for device eth0"},{"content":"下載安裝包\nsudo curl -L \u0026quot;https://github.com/docker/compose/releases/download/1.27.1/docker-compose-$(uname -s)-$(uname -m)\u0026quot; -o /usr/local/bin/docker-compose 對二進製文件應用可執行權限\nsudo chmod +x /usr/local/bin/docker-compose 創建指向 /usr/bin 或路徑中任何其他目錄的符號鏈接\nsudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose 測試 docker-compose\ndocker-compose --version ","date":"2022-10-06T00:00:00Z","image":"https://note.laurance.ml/p/docker-install-docker-compose/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-install-docker-compose/","title":"Docker-Install docker-compose"},{"content":"GCP上，點選硬盤，直接修改想要的硬盤大小(只能擴大、不能縮小) 看一下目前的硬碟空間 lsblk 會發現從 1.3T 變成 1.5T，但是用 df -h 卻沒看到空間增加 擴大分割區\n以下是針對 sda 的第一個分割區擴大\nyum install cloud-utils-growpart growpart /dev/sda 2 擴大檔案系統空間\n如果是 ext2, ext3, ext4 的 file system，則用 resize2fs，如果是 xfs，則用 xfs_growfs\nxfs xfs_growfs /dev/sda2 ext4 resize2fs /dev/sda2 ","date":"2022-10-06T00:00:00Z","image":"https://note.laurance.ml/p/gcp-%E7%A1%AC%E7%A2%9F%E6%93%B4%E5%AE%B9/100_hu955ca03f846527c7d15132e3291bde7f_39307_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/gcp-%E7%A1%AC%E7%A2%9F%E6%93%B4%E5%AE%B9/","title":"GCP-硬碟擴容"},{"content":"(1) 在 Linux 上安裝帶有 curl 的 kubectl 二進位檔 (最新)\ncurl -LO \u0026quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\u0026quot; 注意： 要下載特定版本，請將命令部分替換為特定版本。 $(curl -L -s https://dl.k8s.io/release/stable.txt)\n例如，要在Linux上下載 v1.25.0 版本，請鍵入：\ncurl -LO https://dl.k8s.io/release/v1.25.0/bin/linux/amd64/kubectl (2) 驗證二進位檔 (選擇)\n下載 kubectl 校驗和檔：\ncurl -LO \u0026quot;https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256\u0026quot; 根據校驗和文件驗證 kubectl 二進位檔：\necho \u0026quot;$(cat kubectl.sha256) kubectl\u0026quot; | sha256sum --check 如果有效，則輸出為：\nkubectl: OK 如果檢查失敗，則以非零狀態退出並列印類似於以下內容的輸出：sha256\nkubectl: FAILED sha256sum: WARNING: 1 computed checksum did NOT match 注意：下載相同版本的二進位檔和校驗和。\n(3) 安裝 kubectl\nsudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl 注意：\n如果您在目標系統上沒有根訪問許可權，您仍然可以將 kubectl 安裝到該目錄：~/.local/bin\nchmod +x kubectl mkdir -p ~/.local/bin mv ./kubectl ~/.local/bin/kubectl # and then append (or prepend) ~/.local/bin to $PATH (4) 測試以確保您安裝的版本是最新的：\nkubectl version --client 或者使用以下內容檢視：\nkubectl version --client --output=yaml ","date":"2022-10-06T00:00:00Z","image":"https://note.laurance.ml/p/kubernetes-install-and-set-up-kubectl-on-linux/100_hu011eff4eb1029f53348717cab0d2cf5f_19415_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/kubernetes-install-and-set-up-kubectl-on-linux/","title":"Kubernetes-Install and Set Up kubectl on Linux"},{"content":"新增官方YUM源\ncat \u0026lt;\u0026lt;EOF | sudo tee /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-\\$basearch enabled=1 gpgcheck=1 gpgkey=https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg EOF 使用YUM安裝\nsudo yum install -y kubectl kubelet kubeadm 開機啟動\nsystemctl enable kubelet ","date":"2022-10-06T00:00:00Z","image":"https://note.laurance.ml/p/kubernetes-install-kubectl-on-linux-by-yum/100_hu011eff4eb1029f53348717cab0d2cf5f_19415_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/kubernetes-install-kubectl-on-linux-by-yum/","title":"Kubernetes-Install kubectl on Linux by yum"},{"content":"PS:安装Minikube 之前需要先把docker安装好\n依賴\nyum install conntrack 官方載點\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 sudo install minikube-linux-amd64 /usr/local/bin/minikube 啟動集群\nminikube start --driver=none 啟動時想要指定resource\nminikube start --cpus=4 --memory=4096 ","date":"2022-10-06T00:00:00Z","image":"https://note.laurance.ml/p/kubernetes-install-minikube-on-linux/100_hu011eff4eb1029f53348717cab0d2cf5f_19415_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/kubernetes-install-minikube-on-linux/","title":"Kubernetes-install minikube on Linux"},{"content":"yum install apr* gcc zlib-devel automake autoconf libtool make wget https://archive.apache.org/dist/subversion/subversion-1.10.8.tar.gz tar zxvf subversion-1.10.8.tar.gz cd subversion-1.10.8 mkdir sqlite-amalgamation [configure: error: Subversion requires SQLite] cd ../ wget https://www.sqlite.org/2022/sqlite-autoconf-3400000.tar.gz --no-check-certificate tar zxvf sqlite-autoconf-3400000.tar.gz cd subversion-1.10.8/sqlite-amalgamation cp -r ../../sqlite-autoconf-3400000/* . cd ../ ./configure --prefix=/usr/local/svn --without-berkeley-db --with-lz4=internal --with-utf8proc=internal make \u0026amp;\u0026amp; make install cp /usr/local/svn/bin/* /usr/local/bin/ 啟動 svnserve: /usr/local/bin/svnserve --daemon --pid-file=/var/run/svnserve.pid adduser svn passwd svn 建立資料庫 svnadmin create /home/svn/project/ 增加使用者與密碼 vim /home/svn/project/conf/passwd [users] mis=yoyoyo 權限 vim /home/svn/project/conf/auth [/] laurance=rw 設定檔 vim /home/svn/project/conf/svnserve.conf [general] anon-access=read auth-access=write password-db=passwd authz-db=authz realm=/home/svn/nowblog [sasl] 重啟 windows client SVN 取出: svn://192.168.1.146/home/svn/project ","date":"2022-10-06T00:00:00Z","image":"https://note.laurance.ml/p/svn_server-%E5%AE%89%E8%A3%9D%E6%95%99%E5%AD%B8-centos7/100_hu791d074278204665296c002ec84be428_1698_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/svn_server-%E5%AE%89%E8%A3%9D%E6%95%99%E5%AD%B8-centos7/","title":"SVN_SERVER-安裝教學 (CentOS7)"},{"content":"SVN送交時失敗跳error \u0026quot;你必須先更新你的工作副本\u0026quot; 按確定之後，會自動跳出 作業失敗-請先更新的視窗，再點選更新即可 ","date":"2022-10-05T00:00:00Z","image":"https://note.laurance.ml/p/svn-error-%E4%BD%A0%E5%BF%85%E9%A0%88%E5%85%88%E6%9B%B4%E6%96%B0%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%89%AF%E6%9C%AC/100_hu791d074278204665296c002ec84be428_1698_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/svn-error-%E4%BD%A0%E5%BF%85%E9%A0%88%E5%85%88%E6%9B%B4%E6%96%B0%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%89%AF%E6%9C%AC/","title":"SVN-error 你必須先更新你的工作副本"},{"content":"模板機先建立快照 \u0026gt;\u0026gt; 再轉映像檔 區域選台灣 \u0026gt;\u0026gt; 按建立 建立執行個體範本 建立執行個體範本 網路分頁將外部IP 更改成無；勾選允許HTTP、HTTPS流量 建立完畢後 編輯執行個體群組 套用新的 執行個體範本 確認有出現後 再開始進行web滾動更新 GCP ASG-web滾動更新 選擇執行各體群組 \u0026gt; 輪動式重新啟動/取代 點選取代 \u0026gt; 供應過度數量上限填1 \u0026gt; 無法使用的數量寫0 \u0026gt; 取代 PS:供應過度的數量上限: 是指滾動時，可超過當下存在的機器數量的上限 如果原本上限是8台，填1時，滾動時上限可為9台 如果是上班時段，建議填寫目前機器數量，滾動速度會比較快一點 如果是維護其間，可填寫1 讓它慢慢替換 ----------------------------------------------------------------------------------------------------------------- 無法使用的執行個體數量上限: 是指滾動時，群組裡面能有幾台無法使用 這邊不管是上班或是維護期間 都應填寫0 ","date":"2022-10-03T00:00:00Z","image":"https://note.laurance.ml/p/gcp-asg%E5%9F%B7%E8%A1%8C%E7%AF%84%E6%9C%AC%E5%BB%BA%E7%AB%8B%E8%88%87%E6%9B%B4%E6%96%B0/100_hu955ca03f846527c7d15132e3291bde7f_39307_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/gcp-asg%E5%9F%B7%E8%A1%8C%E7%AF%84%E6%9C%AC%E5%BB%BA%E7%AB%8B%E8%88%87%E6%9B%B4%E6%96%B0/","title":"GCP- ASG執行範本建立與更新"},{"content":"Work搜索SSL簽發日期 ps.到期日期往前推一年=簽發日期 2022-06-03 進入SECTIGO後台，並點選訂單管理Gaia Information Technology Corp. Reseller 點選訂單報告Report on Your Orders 以簽發日期查詢訂單編號 用訂單編號搜索憑證更換CSR 進入管理層並點選訂單管理操作 Validation Manager Order Search 輸入剛查詢的訂單編號進入修改 點選修改 Submit your CSR ， 並將CSR黏貼進入，後面一直按CONTINUE即可 憑證簽發完後，Mail會收到Sectigo寄來的zip包 下載後會有4之檔案， 將AAA CertificateServices.crt裡面的內容全部貼進STAR_XXX_net.crt的下面，並更名為域名.crt， 再將域名.crt複製到網頁主機裡 (注意：STAR_XXX_net.crt內容一定要再上方，否則驗證不會過) ","date":"2022-10-03T00:00:00Z","image":"https://note.laurance.ml/p/sectigo-%E6%94%B9%E7%B0%BDssl%E6%95%99%E5%AD%B8/100_hu07570c01234663d05f8d1d92258d9305_51571_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/sectigo-%E6%94%B9%E7%B0%BDssl%E6%95%99%E5%AD%B8/","title":"SECTIGO-改簽SSL教學"},{"content":" #!/bin/bash SendLine(){ LineToken=\u0026#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\u0026#34; logdate=`date +%Y-%m-%d` datee=`date +%Y/%m/%d-%H:%M:%S` sourced=\u0026#34;source \u0026gt;\u0026gt; Laurance-222\u0026#34; purposed=\u0026#34;purpose \u0026gt;\u0026gt; hateformis\u0026#34; message=\u0026#34;SVN-DUMP上傳成功\u0026#34; curl https://notify-api.line.me/api/notify -H \u0026#34;Authorization: Bearer ${LineToken}\u0026#34; -d \u0026#34;message=%0D%0A${sourced}%0D%0Ai${purposed}%0D%0A${datee}%0D%0A${message}\u0026#34; -d \u0026#34;stickerPackageId=8525\u0026#34; -d \u0026#34;stickerId=16581290\u0026#34; } SDIR=/home/svn/blogtocloud NOWDATEE=`date +%Y-%m-%d` NOWTIME=`date +%Y/%m/%d-%H:%M:%S` PROJECT=nowblog-$NOWDATEE SDIR2=$SDIR/nowblog-$NOWDATEE PROJECT2=public-$NOWDATEE LOGFILE=$SDIR/cloud-svn.log PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin export PATH do_rclone() { rclone purge google-drive:$PROJECT rclone mkdir google-drive:$PROJECT rclone sync $SDIR/$PROJECT google-drive:$PROJECT sleep 80 if [ $? -eq 0 ];then echo \u0026#34; \u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34; \u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34;###########################\u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34;$PROJECT在${NOWTIME}上傳成功\u0026#34; \u0026gt;\u0026gt; $LOGFILE else echo \u0026#34; \u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34; \u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34;###########################\u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34;$PROJECT在${NOWTIME}上傳失敗\u0026#34; \u0026gt;\u0026gt; $LOGFILE fi rclone purge google-drive:$PROJECT2 rclone mkdir google-drive:$PROJECT2 rclone sync $SDIR2/$PROJECT2 google-drive:$PROJECT2 sleep 80 if [ $? -eq 0 ];then echo \u0026#34; \u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34; \u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34;###########################\u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34;$PROJECT2在${NOWTIME}上傳成功\u0026#34; \u0026gt;\u0026gt; $LOGFILE else echo \u0026#34; \u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34; \u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34;###########################\u0026#34; \u0026gt;\u0026gt; $LOGFILE echo \u0026#34;$PROJECT2在${NOWTIME}上傳失敗\u0026#34; \u0026gt;\u0026gt; $LOGFILE fi } do_rclone sleep 10 SendLine ","date":"2022-10-03T00:00:00Z","image":"https://note.laurance.ml/p/shell-script-%E5%BB%BA%E7%AB%8B-svn-co-%E6%8E%92%E7%A8%8B%E4%B8%A6sync%E8%87%B3%E9%9B%B2%E7%AB%AF/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/shell-script-%E5%BB%BA%E7%AB%8B-svn-co-%E6%8E%92%E7%A8%8B%E4%B8%A6sync%E8%87%B3%E9%9B%B2%E7%AB%AF/","title":"shell-script-建立 SVN-CO 排程並sync至雲端"},{"content":"先到個人帳號家目錄下的.ssh 製作金鑰 製作完後會有兩支檔案 製作完後將id_rsa.pub 上傳至AWS-IAM個人帳號 上傳後會得到SSH密鑰 ID 將ID複製下來 再回到機器帳號跟目錄下的.ssh vim config Host git-codecommit.ap-northeast-2.amazonaws.com \u0026lt; --只需要地區，目錄不用 User SSH密鑰 ID IdentityFile ~/.ssh/id_rsa \u0026lt;--私鑰檔案路徑 Codecommit的位置取得 新增完成後將檔案權限改為 600 chmod 600 config 即完成設定 ","date":"2022-09-30T00:00:00Z","image":"https://note.laurance.ml/p/aws-codecommit-ssh-%E9%87%91%E9%91%B0%E4%B8%8A%E5%82%B3%E5%8F%8A%E8%A8%AD%E7%BD%AE/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-codecommit-ssh-%E9%87%91%E9%91%B0%E4%B8%8A%E5%82%B3%E5%8F%8A%E8%A8%AD%E7%BD%AE/","title":"AWS-Codecommit SSH 金鑰上傳及設置"},{"content":"REDIS\nwget https://pecl.php.net/get/memcached-3.0.3.tgz tar zxvf memcached-3.0.3.tgz cd memcached-3.0.3 /usr/local/web/php/bin/phpize ./configure -with-php-config=/usr/local/web/php/bin/php-config make \u0026amp;\u0026amp; make install vim /usr/local/php/etc/php.ini extension=memcached.so ","date":"2022-09-30T00:00:00Z","image":"https://note.laurance.ml/p/php-%E5%AE%89%E8%A3%9Dmemcached%E6%93%B4%E5%B1%95/100_hu2ca637fb1d0a70ad637da30e1c6e56b4_46154_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/php-%E5%AE%89%E8%A3%9Dmemcached%E6%93%B4%E5%B1%95/","title":"PHP-安裝memcached擴展"},{"content":"Index of redis\ntar zxvf redis-4.0.6.tar.gz cd /root/redis-4.0.6 make MALLOC=libc make PREFIX=/usr/local/redis install Redis配置\nmkdir /usr/local/redis/etc/ cp redis.conf /usr/local/redis/etc/ cd /usr/local/redis/bin/ cp redis-benchmark redis-cli redis-server /usr/bin/ 修改redis配置\nvim /usr/local/redis/etc/redis.conf bind 0.0.0.0 daemonize yes requirepass (password設置) redis ( 腳本 ) ps.若有改port或設置密碼 腳本也需要更改\nvim redis #!/bin/bash #chkconfig: 2345 80 90 # Simple Redis init.d script conceived to work on Linux systems # as it does use of the /proc filesystem. PATH=/usr/local/bin:/sbin:/usr/bin:/bin REDISPORT=6379 EXEC=/usr/local/redis/bin/redis-server REDIS_CLI=/usr/local/redis/bin/redis-cli PIDFILE=/var/run/redis_6379.pid CONF=\u0026#34;/usr/local/redis/etc/redis.conf\u0026#34; #PW=(password) case \u0026#34;$1\u0026#34; in start) if [ -f $PIDFILE ] then echo \u0026#34;$PIDFILE exists, process is already running or crashed\u0026#34; else echo \u0026#34;Starting Redis server...\u0026#34; $EXEC $CONF fi if [ \u0026#34;$?\u0026#34;=\u0026#34;0\u0026#34; ] then echo \u0026#34;Redis is running...\u0026#34; fi ;; stop) if [ ! -f $PIDFILE ] then echo \u0026#34;$PIDFILE does not exist, process is not running\u0026#34; else PID=$(cat $PIDFILE) echo \u0026#34;Stopping ...\u0026#34; #$REDIS_CLI -p -a (password) $REDISPORT --no-auth-warning SHUTDOWN $REDIS_CLI -p $REDISPORT SHUTDOWN while [ -x ${PIDFILE} ] do echo \u0026#34;Waiting for Redis to shutdown ...\u0026#34; sleep 1 done echo \u0026#34;Redis stopped\u0026#34; fi ;; restart|force-reload) ${0} stop ${0} start ;; *) echo \u0026#34;Usage: /etc/init.d/redis {start|stop|restart|force-reload}\u0026#34; \u0026gt;\u0026amp;2 exit 1 esac 啟動檔\ncp redis /etc/init.d/ chmod 755 /etc/init.d/redis 添加至開機啟動\nchkconfig --add redis chkconfig --level 2345 redis on chkconfig --list |grep redis OR systemctl enable redis systemctl is-enabled redis 檢查redis是否設置為開機啟動 開啟服務\nservice redis start ps. 出現 “Warning: Using a password with \u0026lsquo;-a\u0026rsquo; or \u0026lsquo;-u\u0026rsquo; option on the command line interface may not be safe”\n加上參數即可: --no-auth-warning ","date":"2022-09-30T00:00:00Z","image":"https://note.laurance.ml/p/redis-%E5%AE%89%E8%A3%9D%E5%8F%8A%E9%85%8D%E7%BD%AE%E6%95%99%E5%AD%B8/100_hu74f8d656a97bc6b7ca99b23e97f954a2_40393_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/redis-%E5%AE%89%E8%A3%9D%E5%8F%8A%E9%85%8D%E7%BD%AE%E6%95%99%E5%AD%B8/","title":"Redis-安裝及配置教學"},{"content":"Grafana 官方載點\n以下用YUM方式安裝 Grafanae-8.2.3-1\nwget https://dl.grafana.com/enterprise/release/grafana-enterprise-8.2.3-1.x86_64.rpm yum localinstall grafana-enterprise-8.2.3-1.x86_64.rpm #啟動服務 systemctl start grafana-server #檢視服務狀態 systemctl status grafana-server InfluxDB 官方載點\n以下用YUM方式安裝 InfluxDB v1.8.0\n# influxdb.key GPG Fingerprint: 05CE15085FC09D18E99EFB22684A14CF2582E0C5 cat \u0026lt;\u0026lt;EOF | sudo tee /etc/yum.repos.d/influxdb.repo [influxdb] name = InfluxDB Repository - RHEL \\$releasever baseurl = https://repos.influxdata.com/rhel/\\$releasever/\\$basearch/stable enabled = 1 gpgcheck = 1 gpgkey = https://repos.influxdata.com/influxdb.key EOF sudo yum install influxdb Telegraf 官方載點\n以下用YUM方式安裝 Telegraf v1.24.1\n# influxdb.key GPG Fingerprint: 05CE15085FC09D18E99EFB22684A14CF2582E0C5 cat \u0026lt;\u0026lt;EOF | tee /etc/yum.repos.d/influxdata.repo [influxdata] name = InfluxData Repository - Stable baseurl = https://repos.influxdata.com/stable/\\$basearch/main enabled = 1 gpgcheck = 1 gpgkey = https://repos.influxdata.com/influxdata-archive_compat.key EOF sudo yum install telegraf Step.1 修改Telegraf的設定檔並啟動:\n(將output-influxdb打開並指向database-telegraf,及打開network參數,及新增使用者)\nservice telegraf start Step.2 啟動influxdb,並查看資料有沒有正確寫進去DB\nservice influxdb start Step.3 建立telegraf使用者,並給予權限\ncreate user telegraf with password 'telegraf' grant all on telegraf to telegraf Step.4 啟動grafana\nsystemctl start grafana-server Step.5 開啟後台 http://localhost:3000 並建立datasource\nStep.6 匯入Grafana官方模板\nStep.7 驗證: 打開本機3000port\n","date":"2022-09-27T00:00:00Z","image":"https://note.laurance.ml/p/grafana--influxdb--telegraf-%E6%A7%8B%E5%BB%BAlinux%E6%95%88%E8%83%BD%E7%9B%A3%E6%8E%A7/100_hu620c7a524b6dcb360e250bc73a09da7c_32448_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/grafana--influxdb--telegraf-%E6%A7%8B%E5%BB%BAlinux%E6%95%88%E8%83%BD%E7%9B%A3%E6%8E%A7/","title":"Grafana + influxdb + telegraf , 構建Linux效能監控"},{"content":"剛下載完啟動 server 會有隨機密碼 vim /var/log/mysqld.log\n初次登入需要設置 root@localhost密碼 (規則為: 大英 + 小英 + 符號)\nSET Password = password('Aaa123456@'); ","date":"2022-09-27T00:00:00Z","image":"https://note.laurance.ml/p/mysql-5.7-%E5%89%9B%E8%BC%89%E5%AE%8C%E7%9A%84%E5%AF%86%E7%A2%BC%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-5.7-%E5%89%9B%E8%BC%89%E5%AE%8C%E7%9A%84%E5%AF%86%E7%A2%BC%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE/","title":"Mysql-5.7 剛載完的密碼存放位置"},{"content":"ERROR 1819 (HY000): Your password does not satisfy the current policy requirements 查看密碼強度規則\nshow variables like 'validate_pass%'; +--------------------------------------+--------+ | Variable_name | Value | +--------------------------------------+--------+ | validate_password_check_user_name | OFF | | validate_password_dictionary_file | | | validate_password_length | 8 | | validate_password_mixed_case_count | 1 | | validate_password_number_count | 1 | | validate_password_policy | MEDIUM | | validate_password_special_char_count | 1 | +--------------------------------------+--------+ 修改密碼強度為最低\nset global validate_password_policy=0; 修改密碼長度為4 (最短)\nset global validate_password_length=4; 修改密碼 特殊符號為最低\nset global validate_password_special_char_count =0; 再次查看規則\nshow variables like 'validate_pass%'; +--------------------------------------+-------+ | Variable_name | Value | +--------------------------------------+-------+ | validate_password_check_user_name | OFF | | validate_password_dictionary_file | | | validate_password_length | 4 | | validate_password_mixed_case_count | 1 | | validate_password_number_count | 1 | | validate_password_policy | LOW | | validate_password_special_char_count | 0 | +--------------------------------------+-------+ 修改 root 密碼\nSET PASSWORD FOR 'root'@'localhost' = PASSWORD('123456'); ","date":"2022-09-27T00:00:00Z","image":"https://note.laurance.ml/p/mysql-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A2%BC%E5%BC%B7%E5%BA%A6%E8%A6%8F%E5%89%87/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A2%BC%E5%BC%B7%E5%BA%A6%E8%A6%8F%E5%89%87/","title":"Mysql-修改密碼強度規則"},{"content":"***** 新版 MySQL 請參考官方文件\nStep.1 先修改 MySQL Config 讓之後建立的資料庫都使用編碼 UTF8\n$ vim /etc/my.cnf [mysqld] default-character-set=utf8 default-collation=utf8_unicode_ci character-set-server=utf8 collation-server=utf8_unicode_ci datadir=/var/lib/mysql socket=/var/lib/mysql/mysql.sock user=mysql # Disabling symbolic-links is recommended to prevent assorted security risks symbolic-links=0 [client] default-character-set=utf8 [mysql] default-character-set=utf8 [mysqld_safe] log-error=/var/log/mysqld.log pid-file=/var/run/mysqld/mysqld.pid #重新啟動MySQL讓設定生效 $ service mysqld restart Step.2 若要直接修改，不通過設定檔的方式\nALTER DATABASE dbdata CHARACTER SET utf8 COLLATE utf8_general_ci; #再查詢編碼 mysql\u0026gt; status; ... Db characterset: utf8 ... Step.3 若要修改已存在的 Tables\n$ mysqldump -uroot -prootpw --default-character-set=latin1 --skip-set-charset dbdata \u0026gt; dbdata.sql #將latin1 取代成 utf8 $ sed -i 's/latin1/utf8/g' dbdata.sql \u0026gt; dbdata_utf8.sql #匯入MYSQL $ mysql -uroot -prootpw --default-character-set=utf8 dbdata \u0026lt; dbdata_utf8.sql ","date":"2022-09-27T00:00:00Z","image":"https://note.laurance.ml/p/mysql-%E5%B0%87%E9%A0%90%E8%A8%AD%E8%B3%87%E6%96%99%E5%BA%AB%E7%B7%A8%E7%A2%BC-latin1-%E6%94%B9%E7%82%BA-utf8/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-%E5%B0%87%E9%A0%90%E8%A8%AD%E8%B3%87%E6%96%99%E5%BA%AB%E7%B7%A8%E7%A2%BC-latin1-%E6%94%B9%E7%82%BA-utf8/","title":"Mysql-將預設資料庫編碼 latin1 改為 UTF8"},{"content":"出現以下錯誤訊息 1.Win + R 輸入 regedit 2.尋找此路徑 HKEYLOCALMACHINE\\SYSTEM\\CurrentControlSet\\Services\\PolicyAgent 3.新增一組機碼 類型:DWORD (32-bit) 名稱:AssumeUDPEncapsulationContextOnSendRule 4.並且將值設定為2 5.重開機 ","date":"2022-09-27T00:00:00Z","image":"https://note.laurance.ml/p/windows-10-%E7%84%A1%E6%B3%95%E5%BB%BA%E7%AB%8Bvpn%E9%80%A3%E7%B7%9A/100_hue86d16e89f42e1cd25cf83156a3f9032_45736_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/windows-10-%E7%84%A1%E6%B3%95%E5%BB%BA%E7%AB%8Bvpn%E9%80%A3%E7%B7%9A/","title":"Windows 10 無法建立VPN連線"},{"content":"1. 使用 nohup+\u0026amp; 背景執行資料庫壓縮 (除掉binlog) 2. 取第一支binlog跟最後一隻binlog的日期 (當作到時候壓縮的檔名) 3. 使用 nohup+\u0026amp; 背景執行binlog壓縮 4. 原本的驗證機制被刪除了 (gcloud auth login) 5. 將壓縮好的TAR包傳到中繼機 (之前跟GCP驗證過的機器) 6. 上傳到GCP對應的目錄 ","date":"2022-09-21T00:00:00Z","image":"https://note.laurance.ml/p/gcp-%E5%B0%87mysql-db%E5%8F%8Abinlog%E5%82%99%E4%BB%BD%E8%87%B3cloudstorage/100_hu955ca03f846527c7d15132e3291bde7f_39307_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/gcp-%E5%B0%87mysql-db%E5%8F%8Abinlog%E5%82%99%E4%BB%BD%E8%87%B3cloudstorage/","title":"GCP-將MySQL-DB及BINLOG備份至Cloudstorage"},{"content":"XEN-center \u0026gt;\u0026gt; storage \u0026gt;\u0026gt; ADD disk 新增30G 查看各區硬碟 df -h 查看總硬碟有無新增30G fdisk -l 檢視已經存在的pv（物理卷） pvdisplay 檢視當前已經存在的vg（邏輯卷組） vgdisplay 檢視已經存在的lv（邏輯卷） lvdisplay 把/dev/xvdb加入與/目錄相同的vg（邏輯卷組） vgextend centos /dev/xvdb 擴容lv（邏輯卷） lvextend -L +30.0GB -n /dev/mapper/centos-root 使其生效 xfs_growfs /dev/mapper/centos-root df -h ","date":"2022-09-21T00:00:00Z","image":"https://note.laurance.ml/p/xenserver-%E9%80%8F%E9%81%8E.xva%E6%AA%94%E8%BD%89%E7%A7%BB%E5%88%B0%E5%8F%A6%E4%B8%80%E5%8F%B0server/100_hu442ea9164a062f86740540d4232db639_41801_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/xenserver-%E9%80%8F%E9%81%8E.xva%E6%AA%94%E8%BD%89%E7%A7%BB%E5%88%B0%E5%8F%A6%E4%B8%80%E5%8F%B0server/","title":"XenServer-透過.XVA檔轉移到另一台SERVER"},{"content":"1. 使用certbot-auto簽發三個月憑證,並驗證TXT 2. 將兩隻key丟到nginx目錄測試(fullchain1.pem \u0026gt;\u0026gt; XXX.crt , privkey1.pem \u0026gt;\u0026gt; XXX.key) 3. Nginx重啟reload 4. 將解析綁到本機hosts 5. 開啟剛剛設置的域名,查看憑證是否設定正確 6. 使用openssl將兩隻key合併生成XXX.pfx (fortigate支援的格式) ps.會強制設定密碼 7. 將剛剛製作的憑證XXX.pfx上傳至fortigate後台,並輸入剛剛設置的密碼 8. Fotigate後台,SSL-VPN設定這邊的伺服器憑證選單裡就會出現剛剛設置的三個月憑證 9. 驗證查看 \u0026gt;\u0026gt; 已出現剛剛製作的憑證 ","date":"2022-09-20T00:00:00Z","image":"https://note.laurance.ml/p/fortinet-fortigate60e-ssl%E5%8C%AF%E5%85%A5%E8%87%AA%E7%B0%BD3%E5%80%8B%E6%9C%88%E6%86%91%E8%AD%89/100_hu34e33e709cfe1953b88f412f1a715a07_5414_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/fortinet-fortigate60e-ssl%E5%8C%AF%E5%85%A5%E8%87%AA%E7%B0%BD3%E5%80%8B%E6%9C%88%E6%86%91%E8%AD%89/","title":"Fortinet-FortiGate60E SSL匯入自簽3個月憑證"},{"content":"1. 修改閒置時間 ","date":"2022-09-20T00:00:00Z","image":"https://note.laurance.ml/p/fortinet-fortigate60e-%E5%BB%B6%E9%81%B2%E8%87%AA%E5%8B%95%E7%99%BB%E5%87%BA%E8%A8%AD%E5%AE%9A/100_hu34e33e709cfe1953b88f412f1a715a07_5414_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/fortinet-fortigate60e-%E5%BB%B6%E9%81%B2%E8%87%AA%E5%8B%95%E7%99%BB%E5%87%BA%E8%A8%AD%E5%AE%9A/","title":"Fortinet-FortiGate60E 延遲自動登出設定"},{"content":"1. 網路 \u0026gt;\u0026gt; 介面切 WAN1 對應外網 (設定成VPN入口) (Group1: 172.16.198.50-172.16.198.100 \u0026gt;\u0026gt; ADDR1) (Group2: 172.16.198.101-172.16.198.150 \u0026gt;\u0026gt; ADDR2) 其餘port設定為LAN口 (internal:port1-7) IP/遮罩 172.16.0.55/16 關閉DHCP (默認會無法解放LAN-Port,因為被其他位置占用,解除之後就可以了) 2. 設置辦公室內部DNS 3. 開啟進階功能開關 \u0026gt;\u0026gt; 系統管理 Feature Visibility (其餘依照環境設置) 4. 新增位址 \u0026gt;\u0026gt; 內部 Internal-IP 5. 新增位址 \u0026gt;\u0026gt; SSLVPN_TUNNEL_ADDR1 , SSLVPN_TUNNEL_ADDR2 (做2個VPN通道) 6. SSL-VPN入口頁面 \u0026gt;\u0026gt; 新建 VPN-GROUP1 , VPN-GROUP2 對應 ADDR1 , ADDR2 7. 設置靜態路由 WAN1 (VPN入口) 8. 設置政策路由 (設置WAN1出口,來源分兩個 Group) 9. IP Pool \u0026gt;\u0026gt; 新建IP池 (外部IP設置自己到自己) 10. 新增用戶群組 11. SSL-VPN設定 \u0026gt;\u0026gt; 監聽走WAN1 , 4826Port , IP範圍:ADDR1,ADDR2 , 認證入口對應群組 12. 新增IPV4政策 (internal-wan1) (SSLVPN-LAN) (SSLVPN-WAN1) ","date":"2022-09-18T00:00:00Z","image":"https://note.laurance.ml/p/fortinet-fortigate60e-ssl-vpn%E8%A8%AD%E7%BD%AE/100_hu34e33e709cfe1953b88f412f1a715a07_5414_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/fortinet-fortigate60e-ssl-vpn%E8%A8%AD%E7%BD%AE/","title":"Fortinet-FortiGate60E SSL-VPN設置"},{"content":"1. 新建機器上面先安裝SNMP，並確保火牆有通 UDP161port yum install -y net-snmp net-snmp-utils 2. Cacti 頁面新增 Device \u0026gt;\u0026gt; Add 3. Device 填入機器的 hostname 及監控協議 4. Datasource 新增要撈取的資料 5. Graph Management 新增監控圖表 6. Graph Trees 分類圖表群 ","date":"2022-09-14T00:00:00Z","image":"https://note.laurance.ml/p/cacti-%E6%96%B0%E5%A2%9E%E6%A9%9F%E5%99%A8%E5%8F%8A%E5%9C%96%E8%A1%A8/100_hub50bab8a129011c882645158bcca07f0_64329_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/cacti-%E6%96%B0%E5%A2%9E%E6%A9%9F%E5%99%A8%E5%8F%8A%E5%9C%96%E8%A1%A8/","title":"Cacti-新增機器及圖表"},{"content":"方法1. 透過內建Chrome截圖實驗功能\n步驟 1. 開啟 Google Chrome 網頁後，直接在網址列輸入「chrome://flags/」會立即打開 Chrome實驗性功能 步驟 2. 直接搜尋「Desktop Screenshots」、「Desktop Sharing Hub in Omnibox」、「Desktop Sharing Hub in App Menu」三項功能，全改為「Enabled」後，按下「Relaunch」重啟 Google Chrome 瀏覽器，就會啟用內建Chrome截圖快捷鍵隱藏功能 步驟 3. 如果要截圖時，直接點擊 Chrome 網址列右側的「分享圖示」，再點選「螢幕截圖」功能 方法2. 用內建Chrome 長截圖功能\n步驟1. 開啟 Google Chrome 瀏覽器後，先進入想要長截圖網頁，直接利用鍵盤按下F12快捷鍵，顯示開發人員資訊畫面 步驟2. 接下來再利用快捷鍵呼叫Chrome瀏覽器指令選單： 並輸入長截圖指令 Capture full size screenshot：長截圖 Capture screenshot：一般截圖 Capture node screenshot：預覽截圖 Capture area screenshot：自選區域截圖 ","date":"2022-09-14T00:00:00Z","image":"https://note.laurance.ml/p/windows-chrome%E9%95%B7%E6%88%AA%E5%9C%96%E6%95%99%E5%AD%B8/100_hue86d16e89f42e1cd25cf83156a3f9032_45736_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/windows-chrome%E9%95%B7%E6%88%AA%E5%9C%96%E6%95%99%E5%AD%B8/","title":"Windows-Chrome長截圖教學"},{"content":"上傳 image 報錯 docker push laurance/green denied: requested access to the resource is denied 解决方案\ndocker tag laurance/green ihatemis/green ihatemis 為 Docker hub 用戶名 後台查看已上傳 ","date":"2022-09-13T00:00:00Z","image":"https://note.laurance.ml/p/docker-error-requested-access-to-the-resource-is-denied/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-error-requested-access-to-the-resource-is-denied/","title":"Docker-Error-requested access to the resource is denied"},{"content":"docker system命令 docker system df 整體磁區使用狀況 docker system events 獲取系統即時LOG docker system info 查看整體系統基本信息 docker system prune 清理不常用的docker資源 (包括: 容器 鏡像 磁區 網路) ","date":"2022-09-13T00:00:00Z","image":"https://note.laurance.ml/p/docker-overlay2%E4%BD%94%E7%94%A8%E5%A4%A7%E9%87%8F%E7%A3%81%E7%A2%9F%E7%A9%BA%E9%96%93%E8%99%95%E7%90%86%E6%96%B9%E6%B3%95/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-overlay2%E4%BD%94%E7%94%A8%E5%A4%A7%E9%87%8F%E7%A3%81%E7%A2%9F%E7%A9%BA%E9%96%93%E8%99%95%E7%90%86%E6%96%B9%E6%B3%95/","title":"Docker-overlay2佔用大量磁碟空間處理方法"},{"content":"查看設定檔 show full-configuration 備份設定檔 exe backup config/allconfig/ipsuserdefsigfilename xx.x.x(tftp server) 還原設定檔 # exe restore config/allconfig/ipsuserdefsig/imagefilename x.x.x.x(tftp server) 顯示系統狀態 # get sys status 顯示系統效能介面 # get system interface #show system interface 顯示系統效能 # get system performance 顯示各service utilization #diag sys top (ctrl-c exit) 格式化硬碟以消除所有記錄 #exe formatlogdisk 手動同步HA設定 #exe ha synchronize config 查看HA 狀態 #diagnose sys ha checksum cluster #show system ha #get sys ha status 重新啟動 # execute reboot 關機 # execute shutdown 查看 arp table # get system arp 清除 arp table cache # execute clear system arp table ping #exe ping x.x.X.X ","date":"2022-09-13T00:00:00Z","image":"https://note.laurance.ml/p/fortinet-fortigate-%E5%B8%B8%E7%94%A8%E9%98%B2%E7%81%AB%E7%89%86cli%E6%8C%87%E4%BB%A4/100_hu34e33e709cfe1953b88f412f1a715a07_5414_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/fortinet-fortigate-%E5%B8%B8%E7%94%A8%E9%98%B2%E7%81%AB%E7%89%86cli%E6%8C%87%E4%BB%A4/","title":"Fortinet-FortiGate 常用防火牆CLI指令"},{"content":"在標示了衝突的那個檔案上點滑鼠左鍵兩下 會自動開啟內建的合併工具 左邊區塊是版本庫的檔案 右邊區塊是本機副本的檔案 底下區塊是合併後的結果，看得出來有一堆問號的部份就是無法自動合併的區塊 （也就是衝突） 在左邊區塊衝突的部分按「滑鼠右鍵」就可以跳出相關的快顯功能表 手動選擇後在下方的窗格會顯示合併後的結果 將所有的衝突都處理完畢後按工具列上的圖示 ","date":"2022-09-13T00:00:00Z","image":"https://note.laurance.ml/p/svn-%E6%9B%B4%E6%96%B0%E6%99%82%E7%99%BC%E7%94%9F%E8%A1%9D%E7%AA%81%E5%A6%82%E4%BD%95%E8%A7%A3%E6%B1%BA/100_hu791d074278204665296c002ec84be428_1698_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/svn-%E6%9B%B4%E6%96%B0%E6%99%82%E7%99%BC%E7%94%9F%E8%A1%9D%E7%AA%81%E5%A6%82%E4%BD%95%E8%A7%A3%E6%B1%BA/","title":"SVN-更新時發生衝突如何解決"},{"content":"{Step 1} 建立 IP match conditions\n{Step 2} 輸入名稱 , 區域 , 要封鎖的 IP\n{Step 3} 建立 Rules\n{Step 4} 輸入名稱 , 規則 , 掛進剛建立的 IP match conditions\n{Step 5} 編輯 Web ACL 將剛建立的 Rules 掛入\nWeb ACL 建置 點選 Create web ACL 區域選 Global CloudFront\n輸入名稱 , Cloudwatch metric 名稱 (這兩個名稱之後無法更改)\n選擇該 WAF 政策\n選擇該 WAF 規則\n建立\n","date":"2022-09-08T00:00:00Z","image":"https://note.laurance.ml/p/aws-waf-rules-%E5%BB%BA%E7%BD%AE/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-waf-rules-%E5%BB%BA%E7%BD%AE/","title":"AWS - WAF \u0026 Rules 建置"},{"content":"{Step 1} 獲取 Token [GetChangeToken]\n對WAF進行操作時,需要有一個Token,以防止衝突的請求 /usr/bin/aws waf get-change-token|jq -r \u0026#39;.ChangeToken\u0026#39; $Token = c93e119c-607e-43b5-98e3-66d3XXXXXXX {Step 2} 取得 IP address ID\n$addressID = XXXXXXXXX791cd453-01ba-46ed-8863 API :\n/usr/bin/aws waf update-ip-set --ip-set-id $addressID --change-token $Token --updates Action=\u0026#34;INSERT\u0026#34;,IPSetDescriptor=\u0026#39;{Type=\u0026#34;IPV4\u0026#34;,Value=\u0026#34; XX.XX.XX.XX/32\u0026#34;}\u0026#39; 參考: https://docs.aws.amazon.com/cli/latest/reference/waf/update-ip-set.html\n","date":"2022-09-08T00:00:00Z","image":"https://note.laurance.ml/p/aws-update-ip-set-to-block-based-ip-address-for-waf/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-update-ip-set-to-block-based-ip-address-for-waf/","title":"AWS- update-ip-set to block based IP address for WAF"},{"content":"到AWS-Cloudfront後台 選取要清除暫存的SITE 選取Invalidations /* 表示清除所有 再點選Create invalidation即可 ","date":"2022-09-08T00:00:00Z","image":"https://note.laurance.ml/p/aws-cloudfront-cdn%E5%BF%AB%E5%8F%96%E6%B8%85%E9%99%A4/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-cloudfront-cdn%E5%BF%AB%E5%8F%96%E6%B8%85%E9%99%A4/","title":"AWS-Cloudfront CDN快取清除"},{"content":"在ec2→ami底下Actions選Copy AMI 在Destination region 選擇要移轉的地區 在Pemissions底下按edit 在AWS Account Number 輸入要移轉的帳號 ","date":"2022-09-08T00:00:00Z","image":"https://note.laurance.ml/p/aws-ec2-ami%E8%BD%89%E5%9C%B0%E5%8D%80%E5%B8%B3%E8%99%9F/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-ec2-ami%E8%BD%89%E5%9C%B0%E5%8D%80%E5%B8%B3%E8%99%9F/","title":"AWS-EC2 AMI轉地區\u0026帳號"},{"content":"CALL mysql.rds_set_configuration('binlog retention hours', 12); show master status\\G; CALL mysql.rds_stop_replication; show slave status\\G; mysql -e \u0026quot;show databases;\u0026quot; -uroot -p -hRDS-master連結位置 | grep -Ev \u0026quot;Database|XXX_mariadb|information_schema|innodb|mysql|performance_schema\u0026quot; | xargs mysqldump -uroot -p -hRDS-master連結位置 --databases \u0026gt; db.sql mysqldump -uroot -p mysql rds_configuration rds_global_status_history rds_global_status_history_old rds_heartbeat2 rds_history rds_replication_status rds_sysinfo slow_log_template \u0026gt; RDS_mysql.sql rm -f /var/lib/mysql/mysql/rds* rm -f [大寫英文字母開頭的目錄] [白字檔] mysqld_save\u0026amp; mysql -uking -p \u0026lt; db.sql mysql -uking -p mysql \u0026lt; RDS_mysql.sql CHANGE MASTER TO MASTER_HOST='RDS-master連結位置', MASTER_USER='主從帳號', MASTER_PASSWORD='主從密碼'; ----跟隨RDS-master CHANGE MASTER TO MASTER_LOG_FILE = 'bin-log檔名',MASTER_LOG_POS =進度; start slave; show slave status\\G; ","date":"2022-09-08T00:00:00Z","image":"https://note.laurance.ml/p/aws-ec2-mysql-slave%E8%B7%9F%E9%9A%A8rds%E6%95%99%E5%AD%B8/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-ec2-mysql-slave%E8%B7%9F%E9%9A%A8rds%E6%95%99%E5%AD%B8/","title":"AWS-EC2 mysql-slave跟隨RDS教學"},{"content":"登入 AWS Management Console 在導覽列上選擇您的帳戶名稱 選擇 Settings (設定)，開啟 Unified Settings (統一設定) 頁面 在 Unified Settings (統一設定) 中，選擇位於 Localization and default Region (本地化和預設區域) 旁的 Edit (編輯) 選取您想在主控台使用的語言，然後選擇 Save changes (儲存變更) ","date":"2022-09-08T00:00:00Z","image":"https://note.laurance.ml/p/aws-%E8%AE%8A%E6%9B%B4-management-console-%E7%9A%84%E8%AA%9E%E8%A8%80/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-%E8%AE%8A%E6%9B%B4-management-console-%E7%9A%84%E8%AA%9E%E8%A8%80/","title":"AWS-變更 Management Console 的語言"},{"content":"安裝必要套件 yum install xz gcc make wget unzip kernel-devel-$(uname -r) iptablesdevel.$(uname -p) perl-Text-CSV_XS 確認目前的kernel版本 uname -r 確認底下的目錄名稱必須要跟上個步驟的版號完全相同，若不同時請確認yum安裝的kerneldevel套件版本，對不上時有下列幾種做法 ls /usr/src/kernels/ 1) 一般、非客制化Linux版本，請參照下述 移除目前裝的版本 rpm -e kernel-devel 至 rpm包網站 http://rpm.pbone.net 下載與kernel相同版號的 kernel-devel wget *.rpm 解壓kernel-devel套件 rpm -hiv *.rpm 確認目前的kernel版本 ls /usr/src/kernels/ 確認套件版本 uname -r 2) Aamzon EC2請參照下述 移除目前裝的版本 rpm -e kernel-devel kernel版本升級 yum install kernel 重開機 reboot 確認目前的kernel版本 uname -r 再次yum安裝kernel-devel套件 yum install kernel-devel-$(uname -r) 確認套件版本 ls /usr/src/kernels/ 確認iptables版本 iptables -V 下載與iptables相對應的套件版本 wget xtables-addons-*.tar.xz Iptables套件載點\n#iptables 1.47請用 xtables-addons-1.47.tar.xz #aws-ec2 請用 xtables-addons-3.0.tar.xz tar Jxf xtables-addons-1.47.tar.xz cd xtables-addons-1.47 ./configure make make install 編譯遇到以下錯誤 yum -y install iptables-devel 其中若有遇到問題，可調整mconfig中的模組留geoip即可。 若遇到 xtnu_ipv6_find_hdr' 錯誤處理程序如下 使用/* */注解此行 vim /lib/modules/`uname -r`/build/include/linux/autoconf.h #define CONFIG_IP6_NF_IPTABLES_MODULE 1 # 或是進入extensions資料夾執行 sed -i '/define WITH_IPV6/d' compat_xtables.c xt_psd.c xt_length2.c xt_TARPIT.c xt_SYSRQ.c xt_RAWNAT.c 若鍽譯時遇到 /lib/modules/XXXX.x86_64/build/ 路徑錯誤時 重新連結到正確的目錄 cd /lib/modules/XXXX.x86_64/ rm -rf build ln -s ../../../usr/src/kernels/XXX.x86_64/ build 開始建立IP資料庫 cd geoip 若是使用付費版的GeoIP2 Databases源 ./xt_geoip_dl ./xt_geoip_build GeoIPCountryWhois.csv 若是使用免費版的GeoLite2 Databases源 需要先注冊一個 maxmind.com 帳號後即可生成一個 License Key 註冊maxmind.com帳號\n下載轉格式工具程式GeoLite2xtables wget https://github.com/mschmitt/GeoLite2xtables/archive/master.zip unzip master.zip cd GeoLite2xtables-master echo \u0026quot;YOUR_LICENSE_KEY='你的金鑰'\u0026quot; \u0026gt;\u0026gt; geolite2.license echo \u0026quot;YOUR_LICENSE_KEY='tBobMt3HrPTWVJKP'\u0026quot; \u0026gt;\u0026gt; geolite2.license ./00_download_geolite2 ./10_download_countryinfo cat /tmp/GeoLite2-Country-Blocks-IPv4.csv | ./20_convert_geolite2 /tmp/CountryInfo.txt \u0026gt; ../GeoIPCountryWhois.csv cd .. ./xt_geoip_build GeoIPCountryWhois.csv 若是遇到下圖錯誤表示perl缺少模組 yum install *YAML* perl-CPAN perl -MCPAN -e shell #預設回答yes即可 cpan[1]\u0026gt; install NetAddr::IP cpan[1]\u0026gt; exit mkdir /usr/share/xt_geoip mv BE LE /usr/share/xt_geoip/ 確認是否有安裝成功 lsmod|grep geoip 一行命令中最多可以使用10個國家 iptables -I INPUT -m geoip --src-cc PH,KR -j DROP 只允許中國IP的TCP80連線 iptables -A except -p TCP --dport 80 -m geoip --src-cc CN -j ACCEPT 只允許中國IP的TCP80、443連線 iptables -A except -p TCP -m multiport --dports 80,443 -m geoip --src-cc CN -j ACCEPT 若是要加進火牆shell請用這組 iptables -A pig -m geoip --src-cc tw -j DROP 確認規則是不是有吃到 iptables -n --list INPUT ","date":"2022-09-08T00:00:00Z","image":"https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/100_hufccc25f98c07fbd5a07eedc8b57cae89_16682_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/centos7-%E5%85%A7%E6%A0%B83.10.0-957-iptables-%E4%BD%BF%E7%94%A8geoip%E9%81%8E%E6%BF%BE%E5%9C%8B%E5%AE%B6/","title":"centos7 內核3.10.0-957 iptables 使用geoip過濾國家"},{"content":"查看防火牆狀態 service iptables status 永久性生效 (重啟不復原) chkconfig iptables on (開啟) chkconfig iptables off (關閉) 即時性生效 (重啟後復原) service iptables start (開啟) service iptables stop (關閉) 設置後重啟 reboot ","date":"2022-09-08T00:00:00Z","image":"https://note.laurance.ml/p/linux-iptables-%E6%B0%B8%E4%B9%85%E9%97%9C%E9%96%89%E6%8C%87%E4%BB%A4/100_hufccc25f98c07fbd5a07eedc8b57cae89_16682_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/linux-iptables-%E6%B0%B8%E4%B9%85%E9%97%9C%E9%96%89%E6%8C%87%E4%BB%A4/","title":"Linux-Iptables-永久關閉指令"},{"content":"dnf --disablerepo '*' --enablerepo=extras swap centos-linux-repos centos-stream-repos dnf distro-sync ","date":"2022-08-19T00:00:00Z","image":"https://note.laurance.ml/p/centos8-%E6%89%BE%E4%B8%8D%E5%88%B0%E6%BA%90/100_huc03b46b7f8bda3b0ed1195c88ee7f533_13486_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos8-%E6%89%BE%E4%B8%8D%E5%88%B0%E6%BA%90/","title":"CentOS8-找不到源"},{"content":"卸載舊版本 yum remove docker \\ docker-client \\ docker-client-latest \\ docker-common \\ docker-latest \\ docker-latest-logrotate \\ docker-logrotate \\ docker-selinux \\ docker-engine-selinux \\ docker-engine rpm -qa |grep docker \u0026amp;\u0026amp; docker -e --nodeps 配置官方yum源 echo '[docker-ce-stable] name=Docker CE Stable - $basearch baseurl=https://download.docker.com/linux/centos/7/$basearch/stable enabled=1 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg [docker-ce-stable-debuginfo] name=Docker CE Stable - Debuginfo $basearch baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/stable enabled=0 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg [docker-ce-stable-source] name=Docker CE Stable - Sources baseurl=https://download.docker.com/linux/centos/7/source/stable enabled=0 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg [docker-ce-edge] name=Docker CE Edge - $basearch baseurl=https://download.docker.com/linux/centos/7/$basearch/edge enabled=0 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg [docker-ce-edge-debuginfo] name=Docker CE Edge - Debuginfo $basearch baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/edge enabled=0 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg [docker-ce-edge-source] name=Docker CE Edge - Sources baseurl=https://download.docker.com/linux/centos/7/source/edge enabled=0 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg [docker-ce-test] name=Docker CE Test - $basearch baseurl=https://download.docker.com/linux/centos/7/$basearch/test enabled=0 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg [docker-ce-test-debuginfo] name=Docker CE Test - Debuginfo $basearch baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/test enabled=0 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg [docker-ce-test-source] name=Docker CE Test - Sources baseurl=https://download.docker.com/linux/centos/7/source/test enabled=0 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg [docker-ce-nightly] name=Docker CE Nightly - $basearch baseurl=https://download.docker.com/linux/centos/7/$basearch/nightly enabled=0 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg [docker-ce-nightly-debuginfo] name=Docker CE Nightly - Debuginfo $basearch baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/nightly enabled=0 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg [docker-ce-nightly-source] name=Docker CE Nightly - Sources baseurl=https://download.docker.com/linux/centos/7/source/nightly enabled=0 gpgcheck=1 gpgkey=https://download.docker.com/linux/centos/gpg'\u0026gt;/etc/yum.repos.d/docker-ce.repo (要启用哪个版本的源就将其下的enable值设置为1，其余设置为0) 查看當前源的可用版本 yum list docker-ce --showduplicates|grep \u0026quot;^doc\u0026quot;|sort -r yum list docker-ce-cli --showduplicates|grep \u0026quot;^doc\u0026quot;|sort -r 指定安裝client跟server一樣的版本 (不指定版本會自動安裝最新版) yum install docker-ce-20.10.2-3.el7 docker-ce-cli-20.10.2-3.el7 containerd.io 查看版本 docker version 設置開機啟動 systemctl enable docker 安裝 docker-compose\nyum list docker-compose-plugin --showduplicates|grep \u0026quot;^doc\u0026quot;|sort -r yum install docker-compose-plugin-2.6.0-3.el7 ln -s /usr/libexec/docker/cli-plugins/docker-compose /usr/bin/docker-compose docker-compose version ","date":"2022-08-19T00:00:00Z","image":"https://note.laurance.ml/p/docker-%E5%AE%98%E6%96%B9yum%E6%BA%90%E5%AE%89%E8%A3%9D%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E6%B5%81%E7%A8%8B/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-%E5%AE%98%E6%96%B9yum%E6%BA%90%E5%AE%89%E8%A3%9D%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E6%B5%81%E7%A8%8B/","title":"Docker-官方yum源安裝指定版本流程"},{"content":"臨時添加 exprt HISTTIMEFORMAT=’%F %T ’ 永久套用 vim .bashrc HISTTIMEFORMAT=\u0026quot;%F %T \u0026quot; source .bashrc 寫入 /etc/profile 達到全體套用 … HISTTIMEFORMAT=\u0026quot;%F %T \u0026quot; source /etc/profile Shell 執行的方法 echo 'HISTTIMEFORMAT=\u0026quot;%F %T \u0026quot;' \u0026gt;\u0026gt; /etc/profile source /etc/profile ","date":"2022-08-16T00:00:00Z","image":"https://note.laurance.ml/p/linux-history%E5%A2%9E%E5%8A%A0%E6%99%82%E9%96%93%E9%A1%AF%E7%A4%BA/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-history%E5%A2%9E%E5%8A%A0%E6%99%82%E9%96%93%E9%A1%AF%E7%A4%BA/","title":"Linux-History增加時間顯示"},{"content":"-d是啟動一個守護程序； -m是分配給Memcache使用的記憶體數量，單位是MB； -u是執行Memcache的使用者； -l是監聽的伺服器IP地址，可以有多個地址； -p是設定Memcache監聽的埠，，最好是1024以上的埠； -c是最大執行的併發連線數，預設是1024； -P是設定儲存Memcache的pid檔案。 ","date":"2022-08-16T00:00:00Z","image":"https://note.laurance.ml/p/memcache-%E5%8F%83%E6%95%B8/100_hu73f91f28ac20a05a3c02db312866cae0_6272_120x120_fill_q75_box_smart1.jpeg","permalink":"https://note.laurance.ml/p/memcache-%E5%8F%83%E6%95%B8/","title":"Memcache-參數"},{"content":"依賴 yum install libevent libevent-devel yum install perl-Test* (make test報錯) wget http://memcached.googlecode.com/files/memcached-1.4.8.tar.gz tar zxvf memcached-1.4.8.tar.gz cd memcached-1.4.8 make \u0026amp;\u0026amp; make test make install ./memcached -d -m 2048 -u nobody -p 12000 -c 2048 -P /tmp/memcached.pid\t啟動服務 pkill memcached\t停止服務 ","date":"2022-08-16T00:00:00Z","image":"https://note.laurance.ml/p/memcache-%E5%AE%89%E8%A3%9D-centos7/100_hu73f91f28ac20a05a3c02db312866cae0_6272_120x120_fill_q75_box_smart1.jpeg","permalink":"https://note.laurance.ml/p/memcache-%E5%AE%89%E8%A3%9D-centos7/","title":"Memcache-安裝-CentOS7"},{"content":"連接memcache telnet 127.0.0.1 12000 添加緩存 add kk 1 0 4 #Enter 1234 #Enter STORED 修改緩存 replace kk 1 0 2 #Enter 11 #Enter STORED 設置緩存 set kk 1 0 4 #Enter 1234 #Enter STORED 讀取 get kk VALUE kk 1 4 1234 刪除 delete kk #Enter DELETED 清空所有缓存 flush_all OK 查看缓存服務器狀態 stats 命令格式 \\r\\n \\r\\n\n參數名稱 | 作用 \u0026mdash;\u0026mdash;\u0026ndash;|\u0026mdash;\u0026mdash; command | add， set或 replace key | 缓存的名字 flag | 16位无符号整数，和key要存储的数据一起存储，并在程序get缓存时，返回。 exptime | 过去时间，0 表示永远不过期，如果非零，表示unix时间或距此秒数 bytes | 存储数据的字节数 \\r\\n | 換行Enter\n","date":"2022-08-16T00:00:00Z","image":"https://note.laurance.ml/p/memcache-%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/100_hu73f91f28ac20a05a3c02db312866cae0_6272_120x120_fill_q75_box_smart1.jpeg","permalink":"https://note.laurance.ml/p/memcache-%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/","title":"Memcache-常用語法"},{"content":"MongoDB官網下載地址\nyum install libcurl openssl wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-4.0.28.tgz tar zxvf mongodb-linux-x86_64-4.0.28.tgz -C /usr/local/ mv /usr/local/mongodb-linux-x86_64-4.0.28/ mongodb/ cd /usr/local/mongodb/ mkdir data log conf cd data/ \u0026amp;\u0026amp; mkdir db/ cd /usr/local/mongodb/conf \u0026amp;\u0026amp; touch mongodb.conf vim mongodb.conf dbpath=/usr/local/mongodb/data/db logpath=/usr/local/mongodb/log/mongodb.log port=27017 fork=true bind_ip=0.0.0.0 cd .. ./bin/mongod --config ./conf/mongodb.conf //啟動服務 ./bin/mongod --config ./conf/mongodb.conf --shutdown //關閉服務 ./mongo\t//連線mongodb ","date":"2022-08-15T00:00:00Z","image":"https://note.laurance.ml/p/mongodb-%E5%AE%89%E8%A3%9D%E6%95%99%E5%AD%B8/100_hu5573e9113ac5ca93c9830f3619376466_35662_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mongodb-%E5%AE%89%E8%A3%9D%E6%95%99%E5%AD%B8/","title":"Mongodb-安裝教學"},{"content":"創建資料庫 (如果資料庫不存在，則創建並切換過去)\nuse DATABASE_NAME 創建集合\ndb.createCollection(\u0026quot;runoob\u0026quot;) 查看集合\nshow collections \u0026amp;\u0026amp; show tables 查看資料庫\ndb.col.find() 顯示目前數據庫\ndb 查看所有數據庫\nshow dbs 插入資料到數據庫\ndb.test222.insert({\u0026quot;name\u0026quot;:\u0026quot;菜鳥\u0026quot;}) 刪除數據庫\ndb.dropDatabase() 删除集合\ndb.collection.drop() 創建固定集合mycol，集合空間大小6142800B，文檔最大個數10000個\ndb.createCollection(\u0026quot;mycol\u0026quot;, { capped : true, autoIndexId : true, size : 6142800, max : 10000 } ) 集合插入多個文檔\ndb.col.insert({title: 'MongoDB教程', description: 'MongoDB 是一個Nosql數據庫', by: '菜鳥', url: 'https://note.laurance.ml', tags: ['mongodb', 'database', 'NoSQL'], likes: 100 }) 或是可以設成變量\ndocument=({title: 'MongoDB教程', description: 'MongoDB 是一個Nosql數據庫', by: '菜鳥', url: 'https://note.laurance.ml', tags: ['mongodb', 'database', 'NoSQL'], likes: 100 }); 在執行插入動作\ndb.col.insert(document) ","date":"2022-08-15T00:00:00Z","image":"https://note.laurance.ml/p/mongodb-%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/100_hu5573e9113ac5ca93c9830f3619376466_35662_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mongodb-%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/","title":"Mongodb-常用語法"},{"content":"MongoDB\nwget http://pecl.php.net/get/mongodb-1.3.4.tgz tar -zxvf mongodb-1.3.4.tgz cd mongodb-1.3.4.tgz /usr/local/web/php/bin/phpize ./configure -with-php-config=/usr/local/web/php/bin/php-config make \u0026amp; make test \u0026amp; make install vim /usr/local/php/etc/php.ini extension=mongodb.so ","date":"2022-08-15T00:00:00Z","image":"https://note.laurance.ml/p/php-%E5%AE%89%E8%A3%9Dmongodb%E6%93%B4%E5%B1%95/100_hu2ca637fb1d0a70ad637da30e1c6e56b4_46154_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/php-%E5%AE%89%E8%A3%9Dmongodb%E6%93%B4%E5%B1%95/","title":"PHP-安裝MongoDB擴展"},{"content":"REDIS\nwget http://pecl.php.net/get/redis-4.0.0RC2.tgz tar zxvf redis-4.0.0RC2.tgz cd redis-4.0.0RC2 /usr/local/web/php/bin/phpize ./configure -with-php-config=/usr/local/web/php/bin/php-config make \u0026amp;\u0026amp; make install vim /usr/local/php/etc/php.ini extension=redis.so ","date":"2022-08-15T00:00:00Z","image":"https://note.laurance.ml/p/php-%E5%AE%89%E8%A3%9Dredis%E6%93%B4%E5%B1%95/100_hu2ca637fb1d0a70ad637da30e1c6e56b4_46154_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/php-%E5%AE%89%E8%A3%9Dredis%E6%93%B4%E5%B1%95/","title":"PHP-安裝Redis擴展"},{"content":"\n","date":"2022-08-15T00:00:00Z","image":"https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/100_hu442ea9164a062f86740540d4232db639_41801_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/xenserver-%E5%AE%89%E8%A3%85%E6%95%99%E5%AD%B8/","title":"XenServer-安装教學"},{"content":"yum -y install nfs-utils nfs-utils-lib mkdir -p /data2/nfs chmod 777 /data2/nfs 允許172.16.0.0/16網段的機器掛載 /data2/nfs echo ‘data2/nfs 172.16.0.0/24(rw,sync,no_root_squash,no_all_squash)’ \u0026gt;\u0026gt; /etc/exports service nfs start 使用XenServer–170 匯出174的xva映像檔 mkdir -p /data2/export mount -t nfs 172.16.0.222:/data2/nfs /data2/export xe vm-list name-label=174\t(查看174的uuid) xe vm-export filename=/data2/export/174.xva vm=8fa16dde-c06d-726c-56da-c0fe47cf3d06\t(使用174的uuid 製作映像檔) XenServer – 180 匯入174的xva映像檔 mkdir -p /data2/export mount -t nfs 172.16.0.222:/data2/nfs /data2/export xe vm-import filename=/data2/export/174.xva 匯入完成之後在XenServer – 180底下會自動生成184 ","date":"2022-08-12T00:00:00Z","image":"https://note.laurance.ml/p/xenserver-%E9%80%8F%E9%81%8E%E8%99%9B%E6%93%AC%E6%A9%9F%E5%81%9Anfs-server/100_hu442ea9164a062f86740540d4232db639_41801_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/xenserver-%E9%80%8F%E9%81%8E%E8%99%9B%E6%93%AC%E6%A9%9F%E5%81%9Anfs-server/","title":"XenServer-透過虛擬機做NFS-Server "},{"content":"/var/log/message ---------------------------------------系統啟動後的資訊和錯誤日誌 /var/log/secure ------------------------------------------與安全相關的日誌資訊 /var/log/maillog ------------------------------------------與郵件相關的日誌資訊 /var/log/cron ----------------------------------------------與定時任務相關的日誌資訊 /var/log/spooler ------------------------------------------與UUCP和news裝置相關的日誌資訊 /var/log/boot.log -----------------------------------------守護程序啟動和停止相關的日誌訊息 /var/log/wtmp ---------------------------------------------永久記錄每個使用者登入、登出及系統的啟動、停機的事件 /var/run/utmp ---------------------------------------------記錄當前正在登入系統的使用者資訊； /var/log/btmp ----------------------------------------------記錄失敗的登入嘗試資訊。 #################################################################################################################### Linux 系統查詢機器最近重啟時間命令 last reboot -----------------------------------------------------------檢視所有重啟日誌資訊 last reboot | head -1 -------------------------------------------------檢視最近的一條 #################################################################################################################### last -x|grep shutdown | head -1 ---------------------------------------顯示上次關機的日期和時間 uptime -s -------------------------------------------------------------檢視系統正常的執行時間 ","date":"2022-08-11T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E7%B3%BB%E7%B5%B1%E9%87%8D%E5%95%9F-%E6%AA%A2%E8%A6%96%E6%97%A5%E8%AA%8C%E5%8F%8A%E6%AD%B7%E5%8F%B2%E7%B4%80%E9%8C%84/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E7%B3%BB%E7%B5%B1%E9%87%8D%E5%95%9F-%E6%AA%A2%E8%A6%96%E6%97%A5%E8%AA%8C%E5%8F%8A%E6%AD%B7%E5%8F%B2%E7%B4%80%E9%8C%84/","title":"Linux-系統重啟 \u0026 檢視日誌及歷史紀錄"},{"content":"# CentOS-Base.repo # # The mirror system uses the connecting IP address of the client and the # update status of each mirror to pick mirrors that are updated to and # geographically close to the client. You should use this for CentOS updates # unless you are manually picking other mirrors. # # If the mirrorlist= does not work for you, as a fall back you can try the # remarked out baseurl= line instead. # # [base] name=CentOS-$releasever – Base #mirrorlist=http://mirrorlist.centos.org/?release=$releasever\u0026amp;arch=$basearch\u0026amp;repo=os baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/os/$basearch/ gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #released updates [updates] name=CentOS-$releasever – Updates #mirrorlist=http://mirrorlist.centos.org/?release=$releasever\u0026amp;arch=$basearch\u0026amp;repo=updates baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/updates/$basearch/ gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #additional packages that may be useful [extras] name=CentOS-$releasever – Extras #mirrorlist=http://mirrorlist.centos.org/?release=$releasever\u0026amp;arch=$basearch\u0026amp;repo=extras baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/extras/$basearch/ gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #additional packages that extend functionality of existing packages [centosplus] name=CentOS-$releasever – Plus #mirrorlist=http://mirrorlist.centos.org/?release=$releasever\u0026amp;arch=$basearch\u0026amp;repo=centosplus baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/centosplus/$basearch/ gpgcheck=1 enabled=0 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #contrib – packages by Centos Users [contrib] name=CentOS-$releasever – Contrib #mirrorlist=http://mirrorlist.centos.org/?release=$releasever\u0026amp;arch=$basearch\u0026amp;repo=contrib baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/contrib/$basearch/ gpgcheck=1 enabled=0 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 #按Esc，打入 :wq 即寫入檔案， #完成後更新資料 yum clean all yum update -y ","date":"2022-08-10T00:00:00Z","image":"https://note.laurance.ml/p/centos7-%E6%9B%B4%E6%94%B9yum%E6%BA%90hinet/100_huc03b46b7f8bda3b0ed1195c88ee7f533_13486_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos7-%E6%9B%B4%E6%94%B9yum%E6%BA%90hinet/","title":"Centos7-更改Yum源(HiNet)"},{"content":"首先將image包成 .tar檔 docker save blazingdb/blazingsql \u0026gt; blazingsql.tar 再執行docker load指令 docker load -i blazingsql.tar ","date":"2022-08-10T00:00:00Z","image":"https://note.laurance.ml/p/docker-%E9%80%8F%E9%81%8Eimage%E5%82%B3%E8%BC%B8%E8%87%B3%E5%8F%A6%E4%B8%80%E5%8F%B0%E5%85%A7%E7%B6%B2%E6%A9%9F%E5%99%A8/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-%E9%80%8F%E9%81%8Eimage%E5%82%B3%E8%BC%B8%E8%87%B3%E5%8F%A6%E4%B8%80%E5%8F%B0%E5%85%A7%E7%B6%B2%E6%A9%9F%E5%99%A8/","title":"Docker-透過image傳輸至另一台內網機器"},{"content":"建立開機畫面motd文字 使用 vim, 替換 ^[ 為“轉義”字符 在 vim 內按 : 輸入以下內容 %s/\\^\\[/ (不要點擊Enter) 輸入 Ctrl+v 然後點擊 Esc 轉換字符 最後輸入 /g ，點擊 Enter 如果操作正確 ^[ 則從灰色變為藍色，如果沒有點擊 u 返回 另一種方法 (使用echo) echo $\u0026#39;\\e[1;37m\u0026#39; \u0026gt; myfile 各符號意思: %s\t搜索 /\t第一項 \\^\\[\t轉義版本^[ /\t第二項，使用鍵盤插入實際Esc /g\t重複所有出現 ","date":"2022-08-10T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E5%BB%BA%E7%AB%8B%E9%96%8B%E6%A9%9F%E7%95%AB%E9%9D%A2motd%E6%96%87%E5%AD%97/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E5%BB%BA%E7%AB%8B%E9%96%8B%E6%A9%9F%E7%95%AB%E9%9D%A2motd%E6%96%87%E5%AD%97/","title":"Linux-建立開機畫面motd文字"},{"content":"進入BIOS\n按F7進入進階模式\n點選Advanced 頁面，進入System Agent (SA) Configuration\n在System Agent (SA) Configuration底下點選Graphics Configuration\n進入Graphics Configuration項目後，把iGPU Multi-Monitor選項設定為Enable\n(Primary Display可以設定螢幕顯示方式: 1.為自動偵測(Auto)或 2. 獨立顯示卡(PCIE)輸出或 3. 內建顯示(iGPU) 輸出)\n按F10儲存後重新開機\nWIN+X+M 進入裝置管理員\n在裝置管理員，可以看到內建顯示晶片和外接獨立顯示卡兩個顯示卡輸出裝置\n","date":"2022-08-10T00:00:00Z","image":"https://note.laurance.ml/p/windows-bios%E9%80%8F%E9%81%8E%E5%85%A7%E9%A1%AF%E8%88%87%E7%8D%A8%E9%A1%AF%E5%81%9A%E5%A4%9A%E8%9E%A2%E5%B9%95%E8%BC%B8%E5%87%BA/100_hue86d16e89f42e1cd25cf83156a3f9032_45736_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/windows-bios%E9%80%8F%E9%81%8E%E5%85%A7%E9%A1%AF%E8%88%87%E7%8D%A8%E9%A1%AF%E5%81%9A%E5%A4%9A%E8%9E%A2%E5%B9%95%E8%BC%B8%E5%87%BA/","title":"Windows-BIOS透過內顯與獨顯做多螢幕輸出"},{"content":"動作\tLINUX\tWINDOWS\t進入目錄\tcd\tcd\t創建目錄\tmkdir\tmd\t當前目錄\tpwd\tcd\t展示目錄\tls\tdir\t移除目錄\trm\tdel\t打印文件\tlp\tprint\t複製文件\tcp\tcopy\t移動文件\tmv\tren\t指令查詢\tman\thelp\t顯示環境變數\tenv\tset\t設置環境變數\tsetenv\tset\t打印文件\tlp\tprint\t","date":"2022-08-10T00:00:00Z","image":"https://note.laurance.ml/p/windows-cmd%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/100_hue86d16e89f42e1cd25cf83156a3f9032_45736_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/windows-cmd%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/","title":"Windows-CMD常用指令"},{"content":"查看Git版本 git --version 查看Git設定內容 git config --list 設定帳戶，讓 Git 知道這台電腦做的修改要連結到哪一個使用者 git config --global user.name \u0026quot;\u0026lt;Your Name\u0026gt;\u0026quot; 設定電子郵件 git config --global user.email \u0026quot;\u0026lt;your@gmail.com\u0026gt;\u0026quot; 創建一個新的Repository (打開任何一個專案資料夾打上) git init 顯示目前工作環境狀態 git status 複製專案 git clone XXX 將專案加入追蹤(暫存起來) git add hello.py 將專案 commit 進去 repository (確定存入版本庫) git commit -m \u0026quot;Init hello.py\u0026quot; 比較現在檔案和上次 commit 之間的差異 git diff git diff |cat XXX git diff 785641bf91c11f25a01c0d48182e810bc8b3bc1c (git log產生的commit代碼) 詳細列出該次commit的修改內容 git show 查看目前所有commit的歷史紀錄 git log 檢查更改 git fetch 將這些更改應用到我們的本地倉庫 git merge 檔案尚未加入過追蹤時使用，即可恢復到檔案尚未加入暫存區 (取消add) git rm --cached hello.py 若檔案已經在 repository 內，則使用以下指令 repository 與 stage 的檔案都會被還原到 HEAD，但 working directory 內的檔案不變 git reset HARD 將本地端程式 push 到遠端檔案庫 git push -u origin master 切出自己的新分支（使用 -b） git checkout -b happycoder@feature_branch ","date":"2022-08-09T00:00:00Z","image":"https://note.laurance.ml/p/git-%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/100_hu84a3f5eaedd42f1ba0ce7aa2d6df9589_9187_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/git-%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/","title":"GIT-常用語法"},{"content":"將某庫某表轉成SQL檔 mysqldump -uroot -p UserAccount UserGame \u0026gt;/root/UserGame.sql ","date":"2022-08-09T00:00:00Z","image":"https://note.laurance.ml/p/mysql-%E5%B0%87%E5%BA%AB%E5%8F%8A%E8%A1%A8%E8%BD%89%E6%88%90sql%E6%AA%94/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-%E5%B0%87%E5%BA%AB%E5%8F%8A%E8%A1%A8%E8%BD%89%E6%88%90sql%E6%AA%94/","title":"MySQL-將庫及表轉成SQL檔"},{"content":"rpm -qa | grep mariadb rpm -qa | grep mysql yum install mysql-community-server mysql-devel ./configure --prefix=/usr/local/web/apache2 --enable-ssl --enable-so --enable-vhost-alias --with-mpm=prefork './configure' '--prefix=/usr/local/web/php' '--with-apxs2=/usr/local/web/apache2/bin/apxs' '--with-mysql' '--with-mysqli' '--disable-cgi' '--with-iconv' '--disable-inline-optimization' '--enable-mbstring=tw' '--enable-sysvshm' '--enable-sysvsem' '--enable-sockets' '--with-jpeg-dir' '--with-png-dir' '--with-gd' '--with-zlib' '--with-curl' '--enable-zip' '--with-openssl-dir=/usr/lib/openssl' '--with-openssl' '--enable-opcache' tar zxvf cacti-0.8.7g.tar.gz mv cacti-0.8.7g /home/cacti yum install -y net-snmp net-snmp-utils tar zxvf rrdtool-1.0.50.tar.gz cd rrdtool-1.0.50 ./configure --prefix=/usr/local/rrdtool make make install #ln -s /usr/local/libpng/lib/libpng.so /usr/lib/ #ln -s /usr/local/freetype/lib/libfreetype.so /usr/lib/ #yum -y install freetype-devel #yum -y install libpng-devel #yum -y install libart_lgpl-devel mysqld_safe \u0026amp; mysqladmin -u root password '密碼' mysqladmin --user=root -p create cacti cd /home/cacti/ mysql -u root -p cacti \u0026lt; cacti.sql mysql -u root -p mysql\u0026gt; grant all on cacti.* to cactiuser@localhost identified by '123456'; mysql\u0026gt; flush privileges; mysql\u0026gt; exit vim /home/cacti/include/config.php 26 $database_type = \u0026quot;mysql\u0026quot;; 27 $database_default = \u0026quot;cacti\u0026quot;; 28 $database_hostname = \u0026quot;localhost\u0026quot;; 29 $database_username = \u0026quot;cactiuser\u0026quot;; 30 $database_password = \u0026quot;kiwi888\u0026quot;; 31 $database_port = \u0026quot;3306\u0026quot;; useradd cactiuser su - cactiuser crontab -e */1 * * * * /usr/local/bin/php /home/cacti/poller.php \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 exit ","date":"2022-08-07T00:00:00Z","image":"https://note.laurance.ml/p/cacti-%E5%AE%89%E8%A3%9D%E6%96%B9%E6%B3%95/100_hub50bab8a129011c882645158bcca07f0_64329_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/cacti-%E5%AE%89%E8%A3%9D%E6%96%B9%E6%B3%95/","title":"Cacti-安裝方法"},{"content":"更改系統引數 vim /etc/locale.conf\t# CentOS 7 LANG=“zh_CN.UTF-8” source /etc/locale.conf vim /etc/sysconfig/i18n\t# CentOS6 LANG=“zh_CN.UTF-8” source /etc/sysconfig/i18n 重啟系統 reboot ","date":"2022-08-07T00:00:00Z","image":"https://note.laurance.ml/p/centos-%E6%9B%B4%E6%94%B9%E7%B3%BB%E7%B5%B1%E8%AA%9E%E8%A8%80/100_huc03b46b7f8bda3b0ed1195c88ee7f533_13486_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos-%E6%9B%B4%E6%94%B9%E7%B3%BB%E7%B5%B1%E8%AA%9E%E8%A8%80/","title":"Centos-更改系統語言"},{"content":"到AWS控制台 選擇AMIs \u0026gt; 點選 Modify Image Permissions 輸入 新帳號的Account Id \u0026gt; Add Permission \u0026gt; 下面的勾勾打勾 \u0026gt; save 再到新帳號的AWS控制台\u0026gt; EC2 \u0026gt; AMIs \u0026gt; private images 即可看到剛剛授權的AMIs 官方文件\n","date":"2022-08-05T00:00:00Z","image":"https://note.laurance.ml/p/aws-amis%E6%8E%88%E6%AC%8A%E7%B5%A6%E5%85%B6%E4%BB%96%E5%B8%B3%E8%99%9F/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-amis%E6%8E%88%E6%AC%8A%E7%B5%A6%E5%85%B6%E4%BB%96%E5%B8%B3%E8%99%9F/","title":"AWS-AMIs授權給其他帳號"},{"content":"設置 AWS-MFA - 二階段認證 Authy {Step 1} 搜尋 IAM 服務\n{Step 2} 選擇 Add MFA 添加 MFA\n{Step 3} 在選單 Multi-factor authentication (MFA) 中新增設備 Assign MFA device\n{Step 4} 選擇要驗證MFA的方式 ( 這邊選擇使用APP )\n{Step 5} 點擊 show QR code 並使用手機APP (Authy) 掃描驗證 \u0026amp; 並將驗證碼依序填入 MFA code1 , MFA code2\n{Step 6} 添加成功\n","date":"2022-08-05T00:00:00Z","image":"https://note.laurance.ml/p/aws-how-to-enable-mfa-for-aws-root-user/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-how-to-enable-mfa-for-aws-root-user/","title":"AWS-How to enable MFA for AWS Root user"},{"content":"1. 建立1個VPC 點選 Create VPC\n輸入名稱及網段 , 這邊設置為 172.25.0.0/16\n2. 新增4個subnets (2個Public、2個private) 用途:預防AZ出現故障無法切換\n點選 Create subnet\n確認 CIDR 為目前設置網段 \u0026amp;\u0026amp; 遮罩為 /16\n建立 public-a 為 172.25.1.0/24\n建立 public-c 為 172.25.2.0/24\n建立 private-a 為 172.25.3.0/24\n建立 private-c 為 172.25.4.0/24\n3. 新增Internet gateways，並將IGW掛上VPC 新增Internet gateways (此步驟要先做完，才能新增 NAT GW)\n輸入名稱 \u0026gt; Create internet gateway\n選取剛剛建立的 internet gateway 右鍵點選 attach\n選擇剛剛建立好的 VPC\n4.新增NAT gateways，選擇Public subnet，並給一個外網IP 新增 NAT Gateways\n設定名稱,subnet,Elastic IP 點選 Create\n5.新增2個route table，1個叫igw、1個叫nat 新增 route table\n建立1個 route for NAT gateway\n點選剛剛建立的 private-route-nat 設定 route 規則\n設定 NAT - route 目的為全通\n建立1個 route for Internet gateway\n點選剛剛建立的 public-route-igw 設定 route 規則\n設定 IGW - route 目的為全通\n6.subnets 套用route talbe，Public套用igw，private套用nat 回到 subnet 選擇 public-a 點選設置 route table\npublic-a 套用 public-route-igw 規則\n回到 subnet 選擇 public-c 點選設置 route table\npublic-c 套用 public-route-igw 規則\n回到 subnet 選擇 pricate-a 點選設置 route table\nprivate-a 套用 private-route-nat 規則\n回到 subnet 選擇 pricate-c 點選設置 route table\nprivate-c 套用 private-route-nat 規則\nVPC 設置完成 ","date":"2022-08-05T00:00:00Z","image":"https://note.laurance.ml/p/aws-vpc-%E5%BB%BA%E7%BD%AE/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-vpc-%E5%BB%BA%E7%BD%AE/","title":"AWS-VPC 建置"},{"content":"AWS CLI 安裝及更新 [ 官網: https://docs.aws.amazon.com/zh_tw/cli/latest/userguide/getting-started-install.html ]\ncurl \u0026quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\u0026quot; -o \u0026quot;awscliv2.zip\u0026quot; unzip awscliv2.zip sudo ./aws/install aws --version AWS CONFIGURE 設定檔設定 需要先建立 IAM USER 並 create access key\n設定步驟: (IAM download accesskey.csv)\nAWS Access Key ID [None]: XXXXXXXXXXXXXXXXXXX AWS Secret Access Key [None]: XXXXXXXXXXXXXXXXXXX Default region name [None]: ap-northeast-1 Default output format [None]: 設定檔路徑:\ncat ~/.aws/credentials [default] aws_access_key_id=XXXXXXXXXXXXXXXXXXXXXXXXXXX aws_secret_access_key=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX cat ~/.aws/config [default] region=us-west-2 output=json AWS 憑證原理:\n當您使用指定 AWS Identity and Access Management (IAM) 角色的共用設定檔時， AWS CLI 會呼叫 AWS STS AssumeRole 操作來擷取臨時憑證。然後會存放這些憑證 (在 ~/.aws/cli/cache 中)。 後續的 AWS CLI 命令會使用快取的臨時憑證，直到過期為止，此時 AWS CLI 會自動重新整理憑證 ","date":"2022-08-05T00:00:00Z","image":"https://note.laurance.ml/p/aws-%E4%B8%8B%E8%BC%89-aws-cli-aws-configure-%E8%A8%AD%E5%AE%9A/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-%E4%B8%8B%E8%BC%89-aws-cli-aws-configure-%E8%A8%AD%E5%AE%9A/","title":"AWS-下載 aws-cli \u0026\u0026 aws configure 設定"},{"content":"撈出 RDS binlog cd /home/mariadb/binlog mysqlbinlog --base64-output=decode-rows -v --set-charset=\u0026quot;utf8\u0026quot; --start-datetime=\u0026quot;2021-11-04 14:06:00\u0026quot; --stop-datetime=\u0026quot;2021-11-04 14:09:00\u0026quot; mysql-bin-changelog.450599 \u0026gt; /home/laurance/RDS-1104-1405-1410.sql SCP過去跳板機 scp RDS-1005-1330-1430.sql laurance@admin:~ ","date":"2022-08-05T00:00:00Z","image":"https://note.laurance.ml/p/aws-%E6%92%88%E5%87%BArds%E7%9A%84binlog/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-%E6%92%88%E5%87%BArds%E7%9A%84binlog/","title":"AWS-撈出RDS的binlog"},{"content":"aws configure AWS Access Key ID [None]: XXXXXXXXXXXXXXXXXXX AWS Secret Access Key [None]: XXXXXXXXXXXXXXXXXXX Default region name [None]: ap-northeast-1 Default output format [None]: json ","date":"2022-08-05T00:00:00Z","image":"https://note.laurance.ml/p/aws-%E9%85%8D%E7%BD%AE%E9%87%91%E9%91%B0%E5%9C%A8linux%E7%99%BB%E5%85%A5/100_hu4977afd0e8455b389e73ed8c78bcad93_31864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/aws-%E9%85%8D%E7%BD%AE%E9%87%91%E9%91%B0%E5%9C%A8linux%E7%99%BB%E5%85%A5/","title":"AWS-配置金鑰在LINUX登入"},{"content":"--------------------------------------- #svn --version svn: E200029: Couldn't perform atomic initialization svn: E200030: SQLite compiled for 3.19.2, but running with 3.6.20 這是因為編譯SVN用的sqlite 版本3.19.2和系統中已安裝的sqlite3.6.20版本不一致 #cd /usr/local/svn/bin #ldd svn 從輸出中看出 libsqlite3.so.0 =\u0026gt; /usr/lib64/libsqlite3.so.0 (0x00007f0f8572d000) [root@localhost lib64]# find / -name libsqlite3.so.0 -print /usr/local/sqlite/lib/libsqlite3.so.0 /usr/local/sqlite-autoconf-3190200/.libs/libsqlite3.so.0 /usr/local/lib/libsqlite3.so.0 /usr/lib64/libsqlite3.so.0 [root@localhost lib64]# mv libsqlite3.so.0 libsqlite3.so.0.old [root@localhost lib64]# ln -s /usr/local/lib/libsqlite3.so.0 libsqlite3.so.0 ","date":"2022-08-04T00:00:00Z","image":"https://note.laurance.ml/p/svn-error-sqlite-compiled-for-3.19.2-but-running-with-3.6.20/100_hu791d074278204665296c002ec84be428_1698_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/svn-error-sqlite-compiled-for-3.19.2-but-running-with-3.6.20/","title":"SVN-error (SQLite compiled for 3.19.2, but running with 3.6.20)"},{"content":"--------------------------------------- SVN出錯 symbol lookup error svn: symbol lookup error: /usr/local/lib/libsvn_fs_x-1.so.0: undefined symbol: svn_fs_util__version 系统中装了rpm版的subversion，跟APR，引起版本混乱。故清理这些RPM包试试： rpm -qa|grep subversion rpm -e --nodeps subversion-libs-1.7.14-16.el7.x86_64 rpm -qa|grep apr echo '/usr/local/APR/lib'\u0026gt;\u0026gt;/etc/ld.so.conf echo '/usr/local/ARP-util/lib'\u0026gt;\u0026gt;/etc/ld.so.conf ldconfig svnadmin create --pre-1.6-compatible /home/svn/mis-note ","date":"2022-08-04T00:00:00Z","image":"https://note.laurance.ml/p/svn-error-undefined-symbol-svn_fs_util__version/100_hu791d074278204665296c002ec84be428_1698_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/svn-error-undefined-symbol-svn_fs_util__version/","title":"SVN-error (undefined symbol: svn_fs_util__version)"},{"content":"編輯 Apache 設定檔 vim /etc/httpd/conf/httpd.conf ErrorLogFormat \u0026quot;[%{u}t] [%-m:%l] [pid %P:tid %T] %7F: %E: [client\\ %a] %M% ,\\ referer\\ %{Referer}i\u0026quot; \u0026lt;IfModule logio_module\u0026gt; LogFormat \u0026quot;%h %l %u %t \\\u0026quot;%r\\\u0026quot; %\u0026gt;s %O %I %T %b \\\u0026quot;%{Referer}i\\\u0026quot; \\\u0026quot;%{User-Agent}i\\\u0026quot;\u0026quot; nreporter \u0026lt;/IfModule\u0026gt; CustomLog \u0026quot;logs/access-NReporter_log\u0026quot; nreporter 重啟 Apache 服務和確認 Apache 服務狀態 systemctl restart httpd \u0026amp;\u0026amp; systemctl status httpd 編輯 rsyslog 設定檔 vim /etc/rsyslog.conf ###MODULES### $ModLoad imfile # provides support for file logging # Send Apache log to N-Reporter input(type=\u0026quot;imfile\u0026quot; File=\u0026quot;/var/log/httpd/access-NReporter_log\u0026quot; Tag=\u0026quot;apache\u0026quot; Severity=\u0026quot;info\u0026quot; Facility=\u0026quot;local6\u0026quot; Ruleset=\u0026quot;nreporter\u0026quot;) input(type=\u0026quot;imfile\u0026quot; File=\u0026quot;/var/log/httpd/error_log\u0026quot; Tag=\u0026quot;apache\u0026quot; Severity=\u0026quot;warning\u0026quot; Facility=\u0026quot;local6\u0026quot; Ruleset=\u0026quot;nreporter\u0026quot;) ruleset(name=\u0026quot;nreporter\u0026quot;){action(type=\u0026quot;omfwd\u0026quot; Target=\u0026quot;192.168.2.69\u0026quot; Port=\u0026quot;514\u0026quot; Protocol=\u0026quot;udp\u0026quot;)} 重啟 Rsyslog 服務和確認 Rsyslog 服務正常 systemctl restart rsyslog \u0026amp;\u0026amp; systemctl status rsyslog ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/apache-%E9%80%8F%E9%81%8Ersyslog%E5%90%8C%E6%AD%A5log/100_huc56479c16103f06e85c76b60f35aaa1f_12865_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/apache-%E9%80%8F%E9%81%8Ersyslog%E5%90%8C%E6%AD%A5log/","title":"Apache-透過rsyslog同步log"},{"content":"wget https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py vim speedtest.py \u0026gt;\u0026gt; (第一行#改python3) chmod a+rx speedtest.py mv speedtest.py /usr/local/bin/speedtest-cli chown root:root /usr/local/bin/speedtest-cli 命令後追加 --share 可以得到測試信息圖片 speedtest-cli --share 追加 --list 可以得到所有的測試服務器 speedtest-cli --list 使用 – server 測試指定服務器的下載或上傳速度 speedtest-cli --server 41009 (站点ID可通過 --list 獲取) ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/centos-%E5%AE%89%E8%A3%85speedtest-cli/100_huc03b46b7f8bda3b0ed1195c88ee7f533_13486_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos-%E5%AE%89%E8%A3%85speedtest-cli/","title":"CentOS-安装speedtest-cli"},{"content":"安裝xfsdump工具 yum install xfsdump -y 備份/home磁區的掛載內容 (一路按ENTER) xfsdump -f /home.xfsdump /home 這時候會再跟目錄出現剛剛備份的 /home \u0026gt;\u0026gt; home.xfsdump 成功備份後，將/home磁區移除掛載 (必須以root身分登入才能執行) umount /home 將/home磁區大小定義為50G lvreduce -L 50G /dev/mapper/centos-home 將其餘空間擴充到根目錄底下 lvextend -l +100%FREE /dev/mapper/centos-root 使根目錄擴充生效 xfs_growfs /dev/mapper/centos-root 格式化/home掛載對應的磁區 mkfs.xfs -f /dev/mapper/centos-home 重新掛載/home mount /home 將原本備份的內容寫入/home xfsrestore -f /home.xfsdump /home 可以看倒已將磁區容量擴充 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/100_huc03b46b7f8bda3b0ed1195c88ee7f533_13486_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos-%E6%A0%B9%E7%9B%AE%E9%8C%84%E7%A3%81%E5%8D%80%E6%93%B4%E5%85%85/","title":"CentOS-根目錄磁區擴充"},{"content":"yum install coreutils --allowerasing \u0026amp;\u0026amp; or dnf install scp DIR_COLORS root@172.17.0.2:~ mv DIR_COLORS ~/.dir_colors reboot ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/centos-%E7%9B%AE%E9%8C%84%E6%B2%92%E9%A1%AF%E7%A4%BA%E9%A1%8F%E8%89%B2/100_huc03b46b7f8bda3b0ed1195c88ee7f533_13486_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos-%E7%9B%AE%E9%8C%84%E6%B2%92%E9%A1%AF%E7%A4%BA%E9%A1%8F%E8%89%B2/","title":"CentOS-目錄沒顯示顏色"},{"content":" sed -i -e \u0026#34;s/^mirrorlist=http:\\/\\/mirrorlist.centos.org/#mirrorlist=http:\\/\\/mirrorlist.centos.org/g\u0026#34; /etc/yum.repos.d/CentOS-Base.repo sed -i -e \u0026#34;s/^#baseurl=http:\\/\\/mirror.centos.org/baseurl=http:\\/\\/vault.centos.org/g\u0026#34; /etc/yum.repos.d/CentOS-Base.repo ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/centos6-%E4%BF%AE%E6%94%B9yum%E6%BA%90/100_huc03b46b7f8bda3b0ed1195c88ee7f533_13486_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos6-%E4%BF%AE%E6%94%B9yum%E6%BA%90/","title":"CentOS6-修改yum源"},{"content":"wget https://nchc.dl.sourceforge.net/project/ss5/ss5/3.8.9-8/ss5-3.8.9-8.tar.gz yum -y install gcc automake make yum -y install pam-devel openldap-devel cyrus-sasl-devel openssl-devel tar xvf ss5-3.8.9-8.tar.gz cd ss5-3.8.9 ./configure \u0026amp;\u0026amp; make \u0026amp;\u0026amp; make install vi /etc/opt/ss5/ss5.conf auth 0.0.0.0/0 - - permit - 0.0.0.0/0 - 0.0.0.0/0 加入用戶名及密碼 /etc/opt/ss5/ss5.passwd 修改ss5啟動的port(默認是1080) vi /etc/sysconfig/ss5 #SS5_OPTS=” -u root” 註解新增 SS5_OPTS=\u0026quot; -u root -b 0.0.0.0:8080\u0026quot; bash檔增執行權限 /etc/rc.d/init.d/ss5 chmod 755 /etc/rc.d/init.d/ss5 service ss5 start ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/centos6-%E5%AE%89%E8%A3%9Dsocks5%E4%BB%A3%E7%90%86/100_huc03b46b7f8bda3b0ed1195c88ee7f533_13486_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/centos6-%E5%AE%89%E8%A3%9Dsocks5%E4%BB%A3%E7%90%86/","title":"CentOS6-安裝socks5代理"},{"content":"DNS正解／反解 ：主要是來說明〝IP位置〞與〝網址〞之間關連的狀況。 ●DNS正解：是指〝網址〞對應到〝主機IP〞的關連狀況，亦為使用者在DNS Server上，透過A 指向、MX 指向、TXT指向、NS指向的設定，用來表示連結網址時會通到的IP位置的主機；或是寄信時該投遞到主機位置 ●DNS反解：是指 IP 位址對映到主機的關連狀況，亦為IP透過PTR指向設定，用來表示IP對應到的網址，這個通常是設定伺服器名稱hostname，一般搭配正解的設定來達到驗證效果，如：MAIL的收信方會檢查發信IP 之反解設定是否與正解的NS指向一致；或系統有驗證到反解的訊息才會寄出系統通知信件…等 正解／反解 的設定對象為何\u0026gt;\u0026gt; ●正解需求的設定對象：為網址的擁有者。 ●反解需求的設定對象：有ROOT權限的主機商。 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/dns-%E6%AD%A3%E8%A7%A3%E8%88%87%E5%8F%8D%E8%A7%A3/100_hu4f6562e501064fb4525a6459b027d812_33292_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/dns-%E6%AD%A3%E8%A7%A3%E8%88%87%E5%8F%8D%E8%A7%A3/","title":"DNS-正解與反解"},{"content":"#查看目前使用的服務 docker system df #Docker passwd存放位置 /root/.docker/config.json #設定docker啟動，容器自動啟動 docker run 容器 --restart=always #使用update參數修改配置 docker update --restart=always ***(容器名) #重啟Docker後，不啟動該容器 docker update --restart=no mysqld-exporter #啟動錯誤查看目錄位置 /etc/docker/daemon.json #使用root權限進入容器 exec -u 0 docker exec -ti -u 0 779afa4111c2 /bin/bash #完全停止容器 docker stop $(docker ps -a -q) #完全刪除容器 docker rm $(docker ps -a -q) #docker默认网段的修改 \u0026quot;/etc/docker/daemon.json\u0026quot; \u0026gt;\u0026gt; { \u0026quot;bip\u0026quot;:\u0026quot;192.168.0.1/24\u0026quot; } #docker network : #創建network docker network create influxdb #建立自訂義 Network docker network create --driver bridge --subnet 172.16.50.0/24 --gateway=172.16.50.1 --ip-range 172.16.50.0/24 \u0026lt;network name\u0026gt; #查看network細節 docker network inspect influxdb #拉取container設定檔 docker run --rm telegraf telegraf config \u0026gt; telegraf.conf #運行容器 docker run -di #使得 Container 裡面的檔案路徑Mapping 到實體主機的檔案路徑 docker -v XXX #搜尋鏡像 docker search mariadb #拉取鏡像 docker pull mariadb #啟動容器 docker run -d --name prometheus2022 prom/prometheus #複製容器內檔掛載到本機目錄 docker cp -a prometheus2022:/etc/prometheus/ /root/docker-service/prometheus #砍掉容器 docker rm -f prometheus2020 #清理掉所有的container docker rm -fv $(docker ps -a -q) #刪除images docker stop containerID docker rm containerID docker rmi imageID #重新命名容器名稱 docker rename \u0026lt;my_container\u0026gt; \u0026lt;my_new_container\u0026gt; ############################################################# ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/docker-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E5%8F%83%E6%95%B8/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E5%8F%83%E6%95%B8/","title":"Docker-常用指令\u0026\u0026參數"},{"content":"[Node-exporter] docker run -d -p 9100:9100 \\ -v \u0026quot;/proc:/host/proc\u0026quot; \\ -v \u0026quot;/sys:/host/sys\u0026quot; \\ -v \u0026quot;/:/rootfs\u0026quot; \\ --net=host \\ prom/node-exporter \\ --path.procfs /host/proc \\ --path.sysfs /host/sys \\ --collector.filesystem.ignored-mount-points \u0026quot;^/(sys|proc|dev|host|etc)($|/)\u0026quot; [Mysql-exporter] docker run -d --restart=always --name mysqld-exporter -p 9104:9104 --net=host --pid=\u0026quot;host\u0026quot; -e DATA_SOURCE_NAME=\u0026quot;exporter:123456@(172.16.0.222:3307)/\u0026quot; bitnami/mysqld-exporter ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Bexporter/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Bexporter/","title":"Docker-建立exporter"},{"content":"搜尋鏡像 docker search mariadb 拉取鏡像 docker pull mariadb 本地建立目錄掛載進docker來管理 mkdir -p /root/docker-service/mysql/conf/ \u0026amp;\u0026amp; mkdir -p /root/docker-service/mysql/data/ 跑起服務 docker run -d -p 3307:3306 -e MARIADB_ROOT_PASSWORD=123456 -v /root/docker-service/mysql/data/:/var/lib/mysql/ -v /root/docker-service/mysql/conf/:/etc/mysql/ --name mariadb mariadb:latest ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Bgrafana%E7%9B%A3%E6%8E%A7%E4%B8%A6%E6%8E%9B%E8%BC%89%E5%9C%A8%E6%9C%AC%E6%A9%9F/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Bgrafana%E7%9B%A3%E6%8E%A7%E4%B8%A6%E6%8E%9B%E8%BC%89%E5%9C%A8%E6%9C%AC%E6%A9%9F/","title":"Docker-建立Grafana監控並掛載在本機"},{"content":"建立本機須掛載的目錄 mkdir -p /root/docker-service/grafana/etc mkdir -p /root/docker-service/grafana/share 拉取映象 docker pull grafana 執行映象 docker run -d --name grafana -p 3000:3000 grafana/grafana 複製docker裡的設定檔到本機 docker cp -a 594649e64f24:/etc/grafana /root/docker-service/grafana/etc/ docker cp -a 594649e64f24:/usr/share/grafana /root/docker-service/grafana/share/ 刪除container docker stop container_id docker rm container_id 重跑設定檔 重跑掛載 docker run -d -i -p 3000:3000 \\ -e \u0026quot;GF_SERVER_ROOT_URL=http://grafana.server.name\u0026quot; \\ -e \u0026quot;GF_SECURITY_ADMIN_PASSWORD=admin\u0026quot; \\ -v /root/docker-service/grafana/etc/grafana/grafana.ini:/etc/grafana/grafana.ini \\ -v /root/docker-service/grafana/share/grafana/conf/defaults.ini:/usr/share/grafana/conf/defaults.ini \\ --net=host \\ grafana/grafana ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Bmariadb/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Bmariadb/","title":"Docker-建立MariaDB"},{"content":"[prometheus] docker run -d -p 9090:9090 \\ -v /root/docker-service/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml \\ --name prometheus \\ --net=host \\ prom/prometheus ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Bprometheus/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Bprometheus/","title":"Docker-建立Prometheus"},{"content":"[prometheus] docker run -d -p 9090:9090 \\ -v /root/docker-service/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml \\ --name prometheus \\ --net=host \\ prom/prometheus ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Btelegraf/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Btelegraf/","title":"Docker-建立telegraf"},{"content":"建立Namesppace \u0026gt;\u0026gt; zabbix-net docker network create --subnet 172.20.0.0/16 --ip-range 172.20.240.0/20 zabbix-net 建立docker容器工作目錄 mkdir -p /usr/local/docker/mysql 建立mysql容器 docker run --name mysql-server --hostname=mysql-server -t \\ -e MYSQL_DATABASE=\u0026quot;zabbix\u0026quot; \\ -e MYSQL_USER=\u0026quot;zabbix\u0026quot; \\ -e MYSQL_PASSWORD=\u0026quot;zabbix\u0026quot; \\ -e MYSQL_ROOT_PASSWORD=\u0026quot;123456\u0026quot; \\ --network=zabbix-net \\ -v /usr/local/docker/mysql:/var/lib/mysql \\ -v /etc/localtime:/etc/localtime \\ -d mysql:5.7 建立zabbix-server-mysql容器 docker run --name zabbix-server-mysql --hostname=zabbix-server-mysql -t \\ -e DB_SERVER_HOST=\u0026quot;mysql-server\u0026quot; \\ -e MYSQL_DATABASE=\u0026quot;zabbix\u0026quot; \\ -e MYSQL_USER=\u0026quot;zabbix\u0026quot; \\ -e MYSQL_PASSWORD=\u0026quot;zabbix\u0026quot; \\ -e MYSQL_ROOT_PASSWORD=\u0026quot;123456\u0026quot; \\ --network=zabbix-net \\ --link mysql-server:mysql \\ -p 10051:10051 \\ -d zabbix/zabbix-server-mysql:alpine-4.0.24 建立前端 zabbix-web-nginx-mysql容器 docker run --name zabbix-web-nginx-mysql --hostname=zabbix-web-nginx-mysql -t \\ -e DB_SERVER_HOST=\u0026quot;mysql-server\u0026quot; \\ -e MYSQL_DATABASE=\u0026quot;zabbix\u0026quot; \\ -e MYSQL_USER=\u0026quot;zabbix\u0026quot; \\ -e MYSQL_PASSWORD=\u0026quot;zabbix\u0026quot; \\ -e MYSQL_ROOT_PASSWORD=\u0026quot;123456\u0026quot; \\ --network=zabbix-net \\ --link mysql-server:mysql \\ --link zabbix-server-mysql:zabbix-server \\ -p 85:8080 \\ -d zabbix/zabbix-web-nginx-mysql:alpine-4.0.24 建立Client端的控制元件 docker run --name some-zabbix-agent --hostname=some-zabbix-agent \\ -e ZBX_HOSTNAME=\u0026quot;zabbix-server-agent\u0026quot; \\ -e ZBX_SERVER_HOST=\u0026quot;zabbix-server-mysql\u0026quot; \\ -e ZBX_METADATA=\u0026quot;zabbix-server-agent\u0026quot; \\ --network=zabbix-net \\ --restart=always \\ -p 10050:10050 \\ -d zabbix/zabbix-agent 登入檢測 預設: 賬號：Admin 密碼：zabbix Configuration \u0026gt; Hosts \u0026gt; Create host \u0026gt; Host name : some-zabbix-agent \u0026gt; Groups : Linux servers \u0026gt; IP : 172.20.240.4 \u0026gt; Port : 10050 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Bzabbix%E5%88%86%E6%95%A3%E5%BC%8F%E7%9B%A3%E6%8E%A7/100_hu3201776fa374726f6ce1bc51624a8839_26222_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/docker-%E5%BB%BA%E7%AB%8Bzabbix%E5%88%86%E6%95%A3%E5%BC%8F%E7%9B%A3%E6%8E%A7/","title":"Docker-建立Zabbix分散式監控"},{"content":"--------------------------- 資訊回應 (100–199), 成功回應 (200–299), 重定向 (300–399), 用戶端錯誤 (400–499), 伺服器端錯誤 (500–599). --------------------------- 100\t此臨時回應表明，目前為止的一切完好，而用戶端應當繼續完成請求 101\t此狀態碼乃為用戶端 Upgrade (en-US) 請求標頭發送之回應、且表明伺服器亦切換中。 102\t此狀態碼表明伺服器收到並處理請求中，但目前未有回應。 200 OK 201\t請求成功且新的資源成功被創建，通常用於 POST 或一些 PUT 請求後的回應。 202\t此請求已經被接受但尚未處理。 300\t請求擁有一個以上的回應。 301\t請求資源的 URI 已被改變。 302\t此響應代碼表示請求資源的 URI 已臨時更改。 400 此回應意味伺服器因為收到無效語法，而無法理解請求。 401\t需要授權以回應請求。它有點像 403，但這裡的授權，是有可能辦到的。 403\t用戶端並無訪問權限，例如未被授權，所以伺服器拒絕給予應有的回應。不同於 401，伺服端知道用戶端的身份。 404\t伺服器找不到請求的資源。 500\t請求已進入伺服器，\t可能原因:程式錯誤-php-error 501\t伺服器不支援請求的方法，僅有GET與HEAD是伺服器必須支援的方法。 502\t作為閘道的伺服器，在獲取處理請求所需的回應時，得到無效回應。 503\t常見原因是服務器因維護而停機或過載。 504\t伺服器作為閘道器時無法及時得到回應。\t可能原因:cloudfront節點未更新 505\t請求使用的 HTTP 版本不被伺服器支援。 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/http-%E5%B8%B8%E8%A6%8B%E7%8B%80%E6%85%8B%E9%8C%AF%E8%AA%A4%E7%A2%BC/100_hu49f31a6f3a9c1a197b067ff0fd6e94a5_141914_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/http-%E5%B8%B8%E8%A6%8B%E7%8B%80%E6%85%8B%E9%8C%AF%E8%AA%A4%E7%A2%BC/","title":"HTTP-常見狀態錯誤碼"},{"content":"返回具有最新时间戳的点 ORDER BY time DESC 時間格式 --precision rfc3339 在查詢語句的最後加上tz('Asia/Shanghai')，這樣查詢的時間纔是糾正爲中國時區顯示 tz('Asia/Taipei') tz('Asia/Shanghai') 查詢某個時間返回的數據，設置時區爲上海時區 select * from CPU_ALL where time \u0026gt;= '2018-11-23 14:30:39' and time \u0026lt;= '2019-11-23 14:32:32' tz('Asia/Shanghai') 查詢特定字段數據 SELECT * FROM \u0026quot;cpu\u0026quot; WHERE time \u0026lt; now() - 5m and \u0026quot;cpu\u0026quot; =~ /cpu0/ 创建measurement insert myapp,host=127.0.0.1,service=app.service.index qps=1340,rt=1313,cpu=45.23,mem=\u0026quot;4145m\u0026quot;,load=1.21 查看使用者 SHOW USERS 刪除使用者 DROP USER \u0026quot;admin-mysql\u0026quot;\t新增使用者 CREATE USER jdoe WITH PASSWORD '1337password' 新增使用者並給予最高權限 CREATE USER jdoe WITH PASSWORD '1337password' WITH ALL PRIVILEGES 取消使用者最高權限 REVOKE ALL PRIVILEGES FROM \u0026quot;mysql-server\u0026quot; 給予使用者讀mydb的權限 GRANT READ ON mydb TO \u0026quot;mysql-server\u0026quot; 查詢當前資料庫中含有的表 SHOW MEASUREMENTS 查看key數據 SHOW series from pay 刪除key DROP SERIES FROM WHERE ='' 查看表中的TAG SHOW TAG KEYS FROM \u0026quot;system\u0026quot; 查看表中的TAG-host SHOW TAG VALUES FROM \u0026quot;system\u0026quot; WITH KEY = \u0026quot;host\u0026quot; 查詢所有監控項目 show field keys 查詢當前資料庫下所有表的第一行記錄 SELECT * FROM /.*/ LIMIT 1 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/influxdb-%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/100_hu3943a49f3cf3881293921668d3732a89_68244_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/influxdb-%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/","title":"InfluxDB 常用語法"},{"content":"方法一\t(設置crontab) EX:\t(每10秒執行一次) #* * * * * php /root/test/php/crontab/tolog.php #* * * * * sleep 10; php /root/test/php/crontab/tolog.php #* * * * * sleep 20; php /root/test/php/crontab/tolog.php #* * * * * sleep 30; php /root/test/php/crontab/tolog.php #* * * * * sleep 40; php /root/test/php/crontab/tolog.php #* * * * * sleep 50; php /root/test/php/crontab/tolog.php 方法二 (設置腳本shell) EX:\t(最多每2秒執行) #/bin/bash step=2 #間隔的秒數 for (( i=0; i \u0026lt; 60; i=(i+step) )); do XXX sleep $step done exit 0 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-crontab%E5%AF%A6%E7%8F%BE%E4%BB%A5%E7%A7%92%E7%82%BA%E5%96%AE%E4%BD%8D%E6%8E%92%E7%A8%8B/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-crontab%E5%AF%A6%E7%8F%BE%E4%BB%A5%E7%A7%92%E7%82%BA%E5%96%AE%E4%BD%8D%E6%8E%92%E7%A8%8B/","title":"Linux-Crontab實現以秒為單位排程"},{"content":"參數說明： -F ：清除所有的已訂定的規則； -X ：殺掉所有使用者建立的 tables ； -Z ：將所有的 chain 的計數與流量統計都歸零 -N ：建立新的規則鏈(chain) -E ：更改指定的規則鏈(chain)名稱 -A ：追加規則:新增規則到某個規則鏈中，該規則將會成為規則鏈中的最後一條規則 -R ：修改規則--\u0026gt;iptables -R INPUT 1 -s 192.168.12.0 -j DROP 取代現行規則，順序不變(1是位置) -I ：插入規則--\u0026gt;iptables -I INPUT 1 --dport 80 -j ACCEPT 插入一條規則，原本位置上的規則將會往後移動一個順位 -L ：查看規則--\u0026gt;iptables -L INPUT 列出規則鏈中的所有規則 -P ：policy , 定義過濾政策。 也就是未符合過濾條件之封包，預設的處理方式 -t ：參數後跟上要單獨查看的表名 $IPTABLES -F -t nat (清空nat表) -p ：協定：tcp、upd、icmp... -m ：模組：state、mac、limit、owner、multiport... -m state --state : 新的（NEW） — 某個封包請求開啟新的連線，例如 HTTP 請求。 已建立（ESTABLISHED） — 屬於某個現有連線的封包。 相關的（RELATED） — 屬於現有連線的封包，請求開啟一個新的連線，例如被動式 FTP 的連線，其連接埠為 20；但資料傳輸埠則是 1024 以上，未使用的連接埠。 無效的（INVALID） — 在連結追蹤表中，不屬於任何連線的封包。 lo : 只要是本机进程内相互访问的，都会去到lo这张网卡上，所以在外部IP时对于iptables选择的是eth0这样的网卡，要捕获本机时是lo这个网卡 -o ：網路介面：-o 為 out 網路介面就填 eth0... (用於 POSTROUTING、OUTPUT、FORWARD) -i ：網路介面：-i 為 in 網路介面就填 eth0... (用於 PREROUTING、INPUT、FORWARD) -s ：來源：可為 IP Address、IP 網段、網域名稱 --sport：指定封包來源 Port、Port Range (配合 -p tcp、-p udp) -d ：目的地：可為 IP、IP 網段、網域名稱 --dport：指定封包目的地 Port、Port Range (配合 -p tcp、-p udp) -j ：政策 / 目標：ACCEPT、DROP、REJECT、SNAT、DNAT、MASQUERADE、REDIRECT、RETURN... ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-iptables%E5%8F%83%E6%95%B8/100_hufccc25f98c07fbd5a07eedc8b57cae89_16682_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/linux-iptables%E5%8F%83%E6%95%B8/","title":"Linux-Iptables參數"},{"content":"iptables -A [規則] [-s 要動作的IP] [-d 目的地IP] [-p 協定] [-j 動作] 查看目前設定 iptables -nL 清除所有規則鏈中的規則 iptables -F\t(不能透過SSH操作,不然會鎖住) 清除使用者自訂鏈中的規則 iptables -X\t(不能透過SSH操作,不然會鎖住) 清除mangle表中，所有規則鏈中的規則 iptables -F -t mangle\t(不能透過SSH操作,不然會鎖住) 查看IP鎖了幾個 iptables -n --list pig|wc -l 查看此IP有沒有被鎖在裡面 iptables -nL |grep XXX 增加規則except允許此IP 80 port通過 iptables -A except -p tcp -s XXX/32 --dport 80 -j ACCEPT 刪除規則pig此IP iptables -D pig -s XXX -j DROP 查看INPUT裡的規則此IP iptables -L INPUT -n --line-numbers |grep \u0026quot;XXX\u0026quot; 以數字的方式顯示pig的總數 iptables -n --list pig|wc -l 新建機器執行增加火牆規則 ./root/iptables/ipfish.sh iptables 刪除某行規則 增加此行規則 iptables -A INPUT -s 123.123.123.123 -j DROP # 將 123.123.123.123 全部擋掉 列出所有規則，前面加上行號 iptables -L INPUT -n --line-numbers 要刪除某一行的規則 iptables -D INPUT 1 # 若只有上述那行，那就是 1 iptables -D INPUT 3 # 若有多行，只要刪除第三行 保存iptables規則 iptables-save \u0026gt;rules-0 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-iptables%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/100_hufccc25f98c07fbd5a07eedc8b57cae89_16682_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/linux-iptables%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/","title":"Linux-Iptables常用語法"},{"content":"daily ：指定轉儲週期爲每天 weekly ：指定轉儲週期爲每週 monthly ：指定轉儲週期爲每月 rotate count ：指定日誌文件刪除之前轉儲的次數，0 指沒有備份，5 指保留 5 個備份 tabooext [+] list：讓 logrotate 不轉儲指定擴展名的文件，缺省的擴展名是：.rpm-orig, .rpmsave, v, 和～ missingok：在日誌輪循期間，任何錯誤將被忽略，例如 “文件無法找到” 之類的錯誤。 size size：當日志文件到達指定的大小時才轉儲，bytes (缺省) 及 KB (sizek) 或 MB (sizem) compress： 通過 gzip 壓縮轉儲以後的日誌 nocompress： 不壓縮 copytruncate：用於還在打開中的日誌文件，把當前日誌備份並截斷 nocopytruncate： 備份日誌文件但是不截斷 create mode owner group ： 轉儲文件，使用指定的文件模式創建新的日誌文件 nocreate： 不建立新的日誌文件 delaycompress： 和 compress 一起使用時，轉儲的日誌文件到下一次轉儲時才壓縮 nodelaycompress： 覆蓋 delaycompress 選項，轉儲同時壓縮。 errors address ： 專儲時的錯誤信息發送到指定的 Email 地址 ifempty ：即使是空文件也轉儲，這個是 logrotate 的缺省選項。 notifempty ：如果是空文件的話，不轉儲 mail address ： 把轉儲的日誌文件發送到指定的 E-mail 地址 nomail ： 轉儲時不發送日誌文件 olddir directory：儲後的日誌文件放入指定的目錄，必須和當前日誌文件在同一個文件系統 noolddir： 轉儲後的日誌文件和當前日誌文件放在同一個目錄下 prerotate/endscript： 在轉儲以前需要執行的命令可以放入這個對，這兩個關鍵字必須單獨成行 EX: log保留三天,執行完以上重啟 /usr/local/web/nginx/logs/*.acc { daily rotate 3 create sharedscripts postrotate /usr/local/web/nginx/sbin/nginx -s reload endscript } ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-logrotate-%E5%8F%83%E6%95%B8/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-logrotate-%E5%8F%83%E6%95%B8/","title":"Linux-Logrotate 參數"},{"content":"yum install epel-release yum install nodejs wget https://nodejs.org/download/release/v8.9.4/node-v8.9.4-linux-x64.tar.gz tar --strip-components 1 -xzvf node-v* -C /usr/local node -v npm -v ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-nodejs-%E5%AE%89%E8%A3%9D/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-nodejs-%E5%AE%89%E8%A3%9D/","title":"Linux-Nodejs-安裝"},{"content":"新增yum源 tee /etc/yum.repos.d/influxdb.repo \u0026lt;\u0026lt;-'EOF' [influxdb] name = InfluxDB Repository - RHEL \\$releasever baseurl = https://repos.influxdata.com/rhel/6Server/x86_64/stable enabled = 1 gpgcheck = 1 gpgkey = https://repos.influxdata.com/influxdb.key EOF 安裝telegraf服務 yum -y install telegraf 安裝telnet測試連線 yum -y install telnet 修改設定 vim /etc/telegraf/telegraf.conf [[outputs.influxdb]] urls = [\u0026quot;http://XXX.XXX.XXX.XXX:8086\u0026quot;] database = \u0026quot;XXX\u0026quot; username = \u0026quot;XXX\u0026quot; password = \u0026quot;XXX\u0026quot; 增加監控模組 [[inputs.net]] [[inputs.netstat]] 確認telegraf-server 的 8086 port有通 telnet XXX.XXX.XXX.XXX 8086 ----------------------------------------------------------------------- 啟動 telegraf service telegraf start -------------------------- ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-telegraf-%E8%92%90%E9%9B%86%E8%B3%87%E6%96%99%E8%87%B3influxdb/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-telegraf-%E8%92%90%E9%9B%86%E8%B3%87%E6%96%99%E8%87%B3influxdb/","title":"Linux-Telegraf-蒐集資料至InfluxDB"},{"content":"vim /etc/vimrc 標註行數 第 10 行加上 set nu ############################################################################################### 1. 選定文字塊。使用v進入可視模式,移動游標鍵選定內容。 2.複製的命令是y,即yank(提起) ,常用的命令如下: y 在使用v模式選定了某一塊的時候,複製選定塊到緩衝區用; yy 複製整行(nyy或者yny ,複製n行,n為數字); y^ 複製當前到行頭的內容; y$ 複製當前到行尾的內容; yw 複製一個word (nyw或者ynw,複製n個word,n為數字); yG 複製至檔尾(nyG或者ynG,複製到第n行,例如1yG或者y1G,複製到檔尾) 3. 剪下的命令是d,即delete,d與y命令基本類似,所以兩個命令用法一樣,包括含有數字的用法. d 剪下選定塊到緩衝區; dd 剪下整行 d^ 剪下至行首 d$ 剪下至行尾 dw 剪下一個word dG 剪下至檔尾 4. 貼上的命令式p,即put(放下) p 小寫p代表貼至遊標後(下),因為遊標是在具體字元的位置上,所以實際是在該字元的後面 P 大寫P代表貼至遊標前(上) 整行的複製貼上在遊標的上(下)一行,非整行的複製則是貼上在遊標的前(後) 注: 在正則表示式中,^表示匹配字串的開始位置,$表示匹配字串的結束位置。 命令前面加數字表示重複的次數,加字母表示使用的緩衝區名稱。使用英文句號\u0026quot;.\u0026quot;可以重複上一個命令。 在複製貼上時,另一組常用的命令是u(撤銷操作),U(撤銷某一行最近所有修改),Ctrl+R(重做),這些功能主要是vim中的,vi中略有差別 ############################################################################################### ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-vim%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-vim%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/","title":"Linux-VIM常用指令"},{"content":"新增帳號+ide useradd XXXide su - XXXide ssh-keygen 一路按Enter cd /home/XXXide/.ssh/ 使用putty-keygen.exe 製作 authorized_keys內容 按下Generate (滑鼠在進度調上游移會快一點) 跑完後 複製上面的內容貼進帳號的.ssh/authorized_keys再給權限600 chmod 600 .ssh/authorized_keys 按下save pubilc key 儲存檔案 andyide.pub 按下save private key 儲存檔案 andyide.ppk (若PPK連不進去，可以將PPK轉PEM) \u0026gt;\u0026gt; 先import_key *.ppk 後在 Export_key *.pem 再將帳號登入權限的bash拿掉 vim /etc/passwd /bin/bash \u0026gt;\u0026gt;/sbin/nologin ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8puttygen%E7%94%A2%E7%94%9Fssh%E9%80%A3%E7%B7%9Akey/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E4%BD%BF%E7%94%A8puttygen%E7%94%A2%E7%94%9Fssh%E9%80%A3%E7%B7%9Akey/","title":"Linux-使用PuTTYgen產生SSH連線key"},{"content":"找出殭屍程序\nps -Al | grep -w Z 從找到的程序資訊中，分析出 pid\nps -Al | grep -w Z | awk '{print $4}' 將分析出來的 pid 串連成一個陣列\nps -Al | grep -w Z | awk '{print $4}' | xargs 將陣列中的每一個 pid 的程序，利用 kill 來終止、刪除它們\nps -Al | grep -w Z | awk '{print $4}' | xargs sudo kill -9 若再跑一次 ps -Al | grep -w Z 還是看到有 zombie process\n先確認父程序資訊\nps -Al | grep -w Z | awk '{print $5}' | xargs ps -lp 再確認相依的子程序資訊\nps -Al | grep -w Z | awk '{print $5}' | xargs ps -l --ppid 如果其中沒有重要程序或是其他正在執行中程序的話，就可以安心地將父程序給刪除掉\nps -Al | grep -w Z | awk '{print $5}' | xargs sudo kill -9 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E5%88%AA%E9%99%A4%E6%AE%AD%E5%B1%8D%E7%A8%8B%E5%BA%8F/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E5%88%AA%E9%99%A4%E6%AE%AD%E5%B1%8D%E7%A8%8B%E5%BA%8F/","title":"Linux-刪除殭屍程序"},{"content":"新增yum源 tee /etc/yum.repos.d/influxdb.repo \u0026lt;\u0026lt;-'EOF' [influxdb] name = InfluxDB Repository - RHEL \\$releasever baseurl = https://repos.influxdata.com/rhel/6Server/x86_64/stable enabled = 1 gpgcheck = 1 gpgkey = https://repos.influxdata.com/influxdb.key EOF 安裝telegraf服務 yum -y install telegraf yum -y install telnet 修改設定 vim /etc/telegraf/telegraf.conf [[outputs.influxdb]] urls = [\u0026quot;http://172.15.1.251:8086\u0026quot;] database = \u0026quot;telegraf\u0026quot; username = \u0026quot;telegraf\u0026quot; password = \u0026quot;metrics\u0026quot; [[inputs.net]] [[inputs.netstat]] 確認telegraf-server 的 8086 port有通 telnet 172.15.1.251 8086 ----------------------------------------------------------------------- 啟動 telegraf service telegraf start -------------------------- ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E5%AE%89%E8%A3%9Dtelegraf-agent%E5%AF%A6%E7%8F%BE%E7%9B%A3%E6%8E%A7/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E5%AE%89%E8%A3%9Dtelegraf-agent%E5%AF%A6%E7%8F%BE%E7%9B%A3%E6%8E%A7/","title":"Linux-安裝telegraf-agent實現監控"},{"content":"解決RAM不足問題 - 在 LINUX 新增 SWAP 虛擬記憶體 以一台 1Gb 記憶體的主機而言，我們在這裡建立 2G的 Swap 虛擬記憶體儲存空間 cd / fallocate -l 2G swapfile chmod 600 swap-sda1 初始化 Swap 空間 透過 mkswap 將 /swapfile 建立為 Linux 交換區，讓這個資料夾被分割為一個磁碟區 mkswap /swapfile 啟動交換區 swapon /swapfile 開機啟動 swapon -s 如果不使用，可透過以下指令終止： sudo swapoff /swapfile 如果想先主要以實體記憶體為主，swap 為輔，可以透過 swappiness 來設定分配方式 sysctl vm.swappiness=10 \u0026gt;\u0026gt; 預設通常會是 60 （值越高，表示會越優先使用 swap，範圍 0~100） 開機自動設定 echo \u0026quot;vm.swappiness=10\u0026quot; \u0026gt;\u0026gt; /etc/sysctl.conf\u0026quot; ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E6%96%B0%E5%A2%9Eswap%E8%A8%98%E6%86%B6%E9%AB%94/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E6%96%B0%E5%A2%9Eswap%E8%A8%98%E6%86%B6%E9%AB%94/","title":"Linux-新增SWAP記憶體"},{"content":"查看当前文件目录各个文件夹大小 du -h --max-depth=1 |sort -hr (排序) 查看指定目錄 du -h --max-depth=1 /path 查看當層目錄 du -h - . 深入到第一層目錄 --max-depth=1 查看當前目錄下user目錄的大小，并不想看其他目錄以及其子目錄 du -sh user 要通過以1024字節為單位顯示一個目錄樹及其每個子樹的磁盤使用情况 du -k /home/linux 以MB為單位顯示一個目錄樹及其每個子樹的磁盤使用情况 du -m /home/linux 以GB為單位顯示一個目錄樹及其每個子樹的磁盤使用情况 du -g /home/linux 列出當前目錄中的目錄名不包括xyz字符串的目錄的大小 du -h --exclude='*xyz*' 只顯示一個目錄樹的全部磁盤使用情况 du -s /home/linux ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E6%9F%A5%E7%9C%8B%E7%95%B6%E5%89%8D%E6%96%87%E4%BB%B6%E7%9B%AE%E9%8C%84%E5%A4%A7%E5%B0%8F/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E6%9F%A5%E7%9C%8B%E7%95%B6%E5%89%8D%E6%96%87%E4%BB%B6%E7%9B%AE%E9%8C%84%E5%A4%A7%E5%B0%8F/","title":"Linux-查看當前文件目錄大小"},{"content":"手機先下載APP app store: Twilio Authy googleplay store: Twilio Authy 2-Factor Authentication ------------------------------------------------------------ 輸入使用要設定的帳號輸入 su - nadal $ google-authenticator \u0026gt; 按y按到結束 \u0026gt;帳號家目錄下面會有一支 .google_authenticator #mkdir /home/gauth/username/ 將 .google_authenticator 移動到/home/gauth/username/ 下面 #mv /home/username/.google_authenticator /home/gauth/username/ 權限改給root #chown root.root /home/gauth/username/.google_authenticator 再將上面顯示的網址 輸入到瀏覽器即可得到一張QR Code 再使用APP掃瞄那張QR Code即可成功加入設定 ------------------------------------------------------------ 使用XShell登入時 選擇下面的 keyboard Interactive 登入 第一次輸入密碼 第二次輸入 APP顯示的六位數字 即可登入 機器服務安裝教學: https://shenyu.me/2016/09/05/centos-google-authenticator.html --------------------------------------------------------------------------------------------------- 機器服務安裝步驟 安裝依賴套件 yum -y install gcc make pam-devel libpng-devel libtool wget git 直接安裝EPEL源RPM包 #CentOS 6 rpm -Uvh http://mirrors.ustc.edu.cn/fedora/epel/epel-release-latest-6.noarch.rpm # CentOS 7 rpm -Uvh http://mirrors.ustc.edu.cn/fedora/epel/epel-release-latest-7.noarch.rpm 安裝Qrencode，谷歌身份驗證器需要調用該程序生成二維碼並顯示 yum install -y qrencode 安裝谷歌身份驗證器 git clone https://github.com/google/google-authenticator-libpam.git cd google-authenticator-libpam/ 編譯並安裝 ./bootstrap.sh ./configure --prefix=/usr/local/google-authenticator make \u0026amp;\u0026amp; make install 複製google身份驗證器pam模塊到系統下 cp /usr/local/google-authenticator/lib/security/pam_google_authenticator.so /lib64/security/ 建立指令連結到環境變數 ln -s /usr/local/google-authenticator/bin/google-authenticator /usr/bin/ 配置/etc/pam.d/sshd 在 auth substack password-auth 下面 新增 auth required pam_google_authenticator.so user=root secret=/home/gauth/${USER}/.google_authenticator nullok 配置SSH服務 vim /etc/ssh/sshd_config 修改以下參數 ChallengeResponseAuthentication yes PasswordAuthentication no PubkeyAuthentication yes UsePAM yes 重啟ssh服務 service sshd restart ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E6%A9%9F%E5%99%A8%E7%99%BB%E5%85%A5%E4%BA%8C%E9%9A%8E%E6%AE%B5%E8%AA%8D%E8%AD%89mfa/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E6%A9%9F%E5%99%A8%E7%99%BB%E5%85%A5%E4%BA%8C%E9%9A%8E%E6%AE%B5%E8%AA%8D%E8%AD%89mfa/","title":"Linux-機器登入二階段認證MFA"},{"content":"建立 logrotate 目錄\nmkdir /root/logrotate/ 建立 shell\nvim /root/logrotate/logrotate.sh #!/bin/bash /usr/sbin/logrotate -f /root/logrotate/weblog 建立要輪詢的設定檔\nvim /root/logrotate/weblog /usr/local/web/nginx/logs/*.acc { daily rotate 3 create sharedscripts postrotate /usr/local/web/nginx/sbin/nginx -s reload endscript } 建立排程\ncrontab -e 10 05 * * * sh /root/logrotate/logrotate.sh 參數 說明 daily 表示每日一份 create 輪替之後，自動建立新的記錄檔 minsize 大小超過100k，才會發生滾動，即使時間沒到下一個滾動週期內，也不會發生滾動 maxsize 大小超過100k，即使時間沒到下一個滾動週期內，也會發生滾動 dateext %Y%m%d作為字尾 rotate 5 保留最近的5個備份 compress 切換之後壓縮.tar.gz create 644 root root 權限壓644 root sharedscripts 整個日誌組執行一次 postrotate 在與 endscript 的區間內是 rotate 結束後會執行的指令 endscript 同上 copytruncate 用於還在打開中的日誌文件，把當前日誌備份並截斷 missingok 大小超過100k，才會發生滾動，即使時間沒到下一個滾動週期內，也不會發生滾動 參數 說明 -d, \u0026ndash;debug debug 模式，測試配置文件是否有錯誤 -f, \u0026ndash;force 強制轉儲文件 -m, \u0026ndash;mail=command 壓縮日誌後，發送日誌到指定郵箱 -s, \u0026ndash;state=statefile 使用指定的狀態文件 -v, \u0026ndash;verbose 顯示轉儲過程 查看執行狀態 cat /var/lib/logrotate/logrotate.status ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/linux-%E8%A8%AD%E5%AE%9Alogrotate-%E8%BC%AA%E8%A9%A2/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/linux-%E8%A8%AD%E5%AE%9Alogrotate-%E8%BC%AA%E8%A9%A2/","title":"Linux-設定logrotate 輪詢"},{"content":"Master Slave Replication 的架構 在 master 的 server 執行的 SQL command 會被記錄在 Binary Log 裡面\nmaster 將 Binary Log 傳送到 slave 的 Relay Log\nslave 依據 Relay Log 做資料的變更\n建立 MySQL Replication 實作紀錄 [ Slave 設定為不寫 binlog] Master server 設定 : 修改 Master 設定檔\nvim /etc/mysql/my.cnf [mysqld] skip-external-locking sql_mode=NO_AUTO_Create_USER,NO_ENGINE_SUBSTITUTION #default-storage-engine=MYISAM explicit_defaults_for_timestamp=true #-------------------------------------- #default-tmp-storage-engine=MYISAM character_set_server = utf8 innodb_buffer_pool_size = 1500M innodb_log_buffer_size = 32M innodb_log_file_size = 16M innodb_flush_log_at_trx_commit = 2 innodb_buffer_pool_instances = 1 innodb_file_per_table=1 #------------------------------------- max_connections = 2000 max_allowed_packet = 64M table_open_cache = 512 sort_buffer_size = 4M net_buffer_length = 8K read_buffer_size = 256K read_rnd_buffer_size = 512K myisam_sort_buffer_size = 128M #key_buffer = 256M #------------------------------------- socket = /var/lib/mysql/mysql.sock pid-file = mysql.pid log-error = mysql.err log-slave-updates max_binlog_size = 500M binlog_format=\u0026#34;MIXED\u0026#34; log-bin = log-bin server_id = 999 relay-log-purge = 1 max-relay-log-size = 500M relay-log-space-limit = 500M slow_query_log = 1 slow_query_log_file = slow-queries.log long_query_time = 1 #--------------------------------------------- [mysqld_multi] mysqld = /usr/bin/mysqld_safe mysqladmin = /usr/bin/mysqladmin 重新啟動 MySQL 服務 [使設定檔生效]\nmysqladmin -uroot -p shutdown mysqld_safe \u0026amp; 登陸 Master 建立 Slave 帳號\nmysql -u root -p STOP SLAVE; GRANT REPLICATION SLAVE ON *.* TO \u0026#39;輸入使用者名稱\u0026#39;@\u0026#39;輸入來源 + %\u0026#39; IDENTIFIED BY \u0026#39;輸入密碼\u0026#39;; FLUSH PRIVILEGES; SHOW MASTER STATUS; exit; DUMP 語法\nmysqldump -uroot -p --all-databases \u0026gt; masterdatabase.sql 登陸 Master 查看 Master 資訊\nmysql -u root -p show master status; exit; 將 SQL 檔 SCP 至 Slave\nscp masterdatabase.sql root@slave主機來源:~ Slave server 設定 : Slave 停 DB\nmysqladmin -uroot -p shutdown 將 Master 的 SQL 檔匯入 Slave\nmysql -u root -p \u0026lt; /home/masterdatabase.sql 修改 Slave 設定檔\nvim /etc/my.cnf [mysqld] skip-external-locking #skip-innodb #skip-name-resolve sql_mode=NO_AUTO_Create_USER,NO_ENGINE_SUBSTITUTION server_id = 998 innodb_buffer_pool_size = 1500M innodb_log_buffer_size = 32M innodb_log_file_size = 16M innodb_flush_log_at_trx_commit = 2 innodb_buffer_pool_instances = 1 #innodb_file_format = barracuda #innodb_file_format_max = barracuda innodb_file_per_table = 1 read-only = 1 #------------------------------------- max_connections = 2000 max_allowed_packet = 64M table_open_cache = 512 sort_buffer_size = 4M net_buffer_length = 8K read_buffer_size = 256K read_rnd_buffer_size = 512K myisam_sort_buffer_size = 128M #key_buffer = 256M #------------------------------------- socket = /var/lib/mysql/mysql.sock pid-file = mysql.pid log-error = mysql.err log-slave-updates port = 3306 relay-log-purge = 1 max-relay-log-size = 500M relay-log-space-limit = 500M slow_query_log = 1 slow_query_log_file = slow-queries.log #long_query_time = 1 #--------------------------------------------- [mysqld_multi] mysqld = /usr/bin/mysqld_safe mysqladmin = /usr/bin/mysqladmin 啟動 Slave DB\nmysqld_safe \u0026amp; 設定 SlaveDB，指定 Master DB 登入資訊，並啟動 Replication\nmysql -u root -p STOP SLAVE; CHANGE MASTER TO MASTER_HOST=\u0026#39;輸入Master主機ip\u0026#39;, MASTER_USER=\u0026#39;輸入使用者名稱\u0026#39;, MASTER_PASSWORD=\u0026#39;輸入密碼\u0026#39;, MASTER_LOG_FILE=\u0026#39;mariadb-bin.000001\u0026#39;, MASTER_LOG_POS=479; start slave; SHOW SLAVE STATUS \\G; ############################################\n","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/mariadb-replication-%E4%B8%BB%E5%BE%9E%E5%BC%8F%E8%B7%9F%E9%9A%A8%E6%9E%B6%E6%A7%8B%E8%A8%AD%E5%AE%9A/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mariadb-replication-%E4%B8%BB%E5%BE%9E%E5%BC%8F%E8%B7%9F%E9%9A%A8%E6%9E%B6%E6%A7%8B%E8%A8%AD%E5%AE%9A/","title":"MariaDB-Replication 主從式跟隨架構設定"},{"content":"echo [mariadb] \u0026gt; /etc/yum.repos.d/MariaDB.repo echo name = MariaDB \u0026gt;\u0026gt; /etc/yum.repos.d/MariaDB.repo echo baseurl = http://mirror.mariadb.org/yum/10.8.6/centos74-amd64/ \u0026gt;\u0026gt; /etc/yum.repos.d/MariaDB.repo echo gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB \u0026gt;\u0026gt; /etc/yum.repos.d/MariaDB.repo echo gpgcheck=1 \u0026gt;\u0026gt; /etc/yum.repos.d/MariaDB.repo ########################################## yum install -y MariaDB-server MariaDB-client MariaDB-devel* mysql_secure_installation\t#初始化 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/mariadb-yum_repo/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mariadb-yum_repo/","title":"MariaDB-yum_repo"},{"content":"背景啟動 mysqld_safe \u0026amp; 停掉服務 mysqladmin -u root -p shutdown 創建密碼 mysqladmin -u root password \u0026#39;密碼\u0026#39; 列出該 database_name 所有資料表 mysqlshow -u user_name -p db_name 檢視伺服器埠 show global variables like \u0026#39;port\u0026#39;; 查詢ID SHOW VARIABLES LIKE \u0026#39;%server_%\u0026#39;; 忘記密碼時在my.cnf增加參數 [mysqld] skip-grant-tables 在mysql介面執行更改密碼 use mysql; UPDATE user SET Password = password(\u0026#39;123456\u0026#39;) WHERE User = \u0026#39;root\u0026#39;; 檢查是否有支援 Partition SHOW PLUGINS; SELECT PLUGIN_NAME as Name, PLUGIN_VERSION as Version, PLUGIN_STATUS as Status FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_TYPE=\u0026#39;STORAGE ENGINE\u0026#39;; 若要關閉 partition 支援，可在 my.cnf 加上 skip-partition，再重新啟動 查看型號 mysql\u0026gt; select version(); 或是在Linux介面執行 mysql -V 查看表的存储引擎 show create table proc \\G 直接更改存储引擎 alter table UserConf engine=MyISAM;\t顯示數據表結構： describe 表名; 查看MySQL的時間 select now(); 查看MySQL時區 show variables like \u0026#34;%time_zone%\u0026#34;; 顯示哪個執行緒正在運行 SHOW PROCESSLIST; 顯示資料表的欄位 show columns from 資料表名稱; 顯示user裡的資料 SELECT * FROM user \\G 新增帳號 CREATE USER \u0026#39;laurance\u0026#39;@\u0026#39;10.10.%.%\u0026#39; IDENTIFIED BY \u0026#39;123456\u0026#39;; 給予全部權限 grant all on *.* to \u0026#39;laurance\u0026#39;@\u0026#39;10.10.%.%\u0026#39;; 修改使用者 update user set User=\u0026#39;laurance\u0026#39; where User=\u0026#39;root\u0026#39;; 刪除使用者 drop user \u0026#39;laurance\u0026#39;@\u0026#39;localhost\u0026#39;; 查看使用者權限 show grants for \u0026#39;laurance\u0026#39;@\u0026#39;localhost\u0026#39;; 安裝MySQL密碼強度插件 INSTALL PLUGIN validate_password SONAME \u0026#39;validate_password.so\u0026#39;; 臨時改密碼強度規則 SET GLOBAL validate_password_policy=LOW; 查看密碼強度規則 show variables like \u0026#39;validate_pass%\u0026#39;; 查看密碼長度規則 select @@validate_password_length; 更換主從語法 change master to MASTER_HOST=\u0026#39;10.10.10.10\u0026#39;, MASTER_USER=\u0026#39;laurance\u0026#39;, MASTER_PASSWORD=\u0026#39;123456\u0026#39;, MASTER_LOG_FILE=\u0026#39;log-bin.000018\u0026#39;, MASTER_LOG_POS=815722; 查詢MySQL密碼 select * from mysql.user \\G 將*開頭的亂碼貼到MD5解 https://www.cmd5.com/ 重新設為預設資料庫 mysql_install_db --datadir=/var/lib/mysql/master01/ --user=mysql \u0026amp; 新增 TABLE CREATE TABLE ithelp1007a( id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, class CHAR(1) NOT NULL, name CHAR(20) NOT NULL, score TINYINT UNSIGNED NOT NULL ); 插入 TABLE INSERT INTO ithelp1007a(class, name, score) VALUES (\u0026#39;A\u0026#39;, \u0026#39;Tom\u0026#39;, 78), (\u0026#39;A\u0026#39;, \u0026#39;Mary\u0026#39;, 25), (\u0026#39;A\u0026#39;, \u0026#39;John\u0026#39;, 65), (\u0026#39;B\u0026#39;, \u0026#39;Hitomi\u0026#39;, 95), (\u0026#39;B\u0026#39;, \u0026#39;Asami\u0026#39;, 84), (\u0026#39;B\u0026#39;, \u0026#39;Keiko\u0026#39;, 73); ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/mysql-%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-%E5%B8%B8%E7%94%A8%E8%AA%9E%E6%B3%95/","title":"MySQL-常用語法"},{"content":"備份單一資料庫 mysqldump -h hostname -u root -p database_name \u0026gt; backup.sql; 備份資料庫中單一資料表 mysqldump -u root -p database_name table_name \u0026gt; backup.sql; 匯出資料庫中的某張資料表的表結構（不含資料） mysqldump -u username -p -d dbname tablename \u0026gt; tablename.sql 備份資料庫中多張資料表 mysqldump -u root -p database_name table1 table2 \u0026gt; backup.sql; 備份多個資料庫 mysqldump -u root -p --databases db1 db2 \u0026gt; backup.sql; 備份所有資料庫 mysqldump -u root -p --all-databases \u0026gt; backup.sql; 匯出資料庫結構（不含資料） mysqldump -u username -p -d dbname \u0026gt; dbname.sql ---------------------------- 復原單一資料庫 mysql -u root -p database_name \u0026lt; backup.sql 復原多個資料庫 mysql -u root -p \u0026lt; backup.sql ---------------------------- ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/mysqldump-%E5%82%99%E4%BB%BD%E9%82%84%E5%8E%9F%E8%B3%87%E6%96%99%E5%BA%AB/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysqldump-%E5%82%99%E4%BB%BD%E9%82%84%E5%8E%9F%E8%B3%87%E6%96%99%E5%BA%AB/","title":"Mysqldump-備份\u0026還原資料庫"},{"content":"#定義Nginx運行的用戶和用戶組 user www www; #nginx進程數，建議設置為等於CPU總核心數。 worker_processes 8; #全局錯誤日誌定義類型，[ debug | info | notice | warn | error | crit ] error_log /var/log/nginx/error.log info; #進程文件 pid /var/run/nginx.pid; #一個nginx進程打開的最多文件描述符數目，理論值應該是最多打開文件數（系統的值ulimit -n）與nginx進程數相除，但是nginx分配請求並不均勻，所以建議與ulimit -n的值保持一致。 worker_rlimit_nofile 65535; #工作模式與連接數上限 events { #參考事件模型，use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; epoll模型是Linux 2.6以上版本內核中的高性能網絡I/O模型，如果跑在FreeBSD上面，就用kqueue模型。 use epoll; #單個進程最大連接數（最大連接數=連接數*進程數） worker_connections 65535; } #設定http伺服器 http { include mime.types; #文件擴展名與文件類型映射表 default_type application/octet-stream; #默認文件類型 #charset utf-8; #默認編碼 server_names_hash_bucket_size 128; #伺服器名字的hash表大小 client_header_buffer_size 32k; #上傳文件大小限制 large_client_header_buffers 4 64k; #設定請求緩 client_max_body_size 8m; #設定請求緩 sendfile on; #開啟高效文件傳輸模式，sendfile指令指定nginx是否調用sendfile函數來輸出文件，對於普通應用設為 on，如果用來進行下載等應用磁碟IO重負載應用，可設置為off，以平衡磁碟與網絡I/O處理速度，降低系統的負載。注意：如果圖片顯示不正常把這個改成off。 autoindex on; #開啟目錄列表訪問，合適下載伺服器，默認關閉。 tcp_nopush on; #防止網絡阻塞 tcp_nodelay on; #防止網絡阻塞 keepalive_timeout 120; #長連接超時時間，單位是秒 #FastCGI相關參數是為了改善網站的性能：減少資源占用，提高訪問速度。下面參數看字面意思都能理解。 fastcgi_connect_timeout 300; fastcgi_send_timeout 300; fastcgi_read_timeout 300; fastcgi_buffer_size 64k; fastcgi_buffers 4 64k; fastcgi_busy_buffers_size 128k; fastcgi_temp_file_write_size 128k; #gzip模塊設置 gzip on; #開啟gzip壓縮輸出 gzip_min_length 1k; #最小壓縮文件大小 gzip_buffers 4 16k; #壓縮緩衝區 gzip_http_version 1.0; #壓縮版本（默認1.1，前端如果是squid2.5請使用1.0） gzip_comp_level 2; #壓縮等級 gzip_types text/plain application/x-javascript text/css application/xml; #壓縮類型，默認就已經包含text/html，所以下面就不用再寫了，寫上去也不會有問題，但是會有一個warn。 gzip_vary on; #limit_zone crawler $binary_remote_addr 10m; #開啟限制IP連接數的時候需要使用 upstream blog.ha97.com { #upstream的負載均衡，weight是權重，可以根據機器配置定義權重。weigth參數表示權值，權值越高被分配到的機率越大。 server 192.168.80.121:80 weight=3; server 192.168.80.122:80 weight=2; server 192.168.80.123:80 weight=3; } #虛擬主機的配置 server { #監聽埠 listen 80; #域名可以有多個，用空格隔開 server_name www.ha97.com ha97.com; index index.html index.htm index.php; root /data/www/ha97; location ~ .*\\.(php|php5)?$ { fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; include fastcgi.conf; } #圖片緩存時間設置 location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$ { expires 10d; } #JS和CSS緩存時間設置 location ~ .*\\.(js|css)?$ { expires 1h; } #日誌格式設定 log_format access '$remote_addr - $remote_user [$time_local] \u0026quot;$request\u0026quot; ' '$status $body_bytes_sent \u0026quot;$http_referer\u0026quot; ' '\u0026quot;$http_user_agent\u0026quot; $http_x_forwarded_for'; #定義本虛擬主機的訪問日誌 access_log /var/log/nginx/ha97access.log access; #對 \u0026quot;/\u0026quot; 啟用反向代理 location / { proxy_pass http://127.0.0.1:88; proxy_redirect off; proxy_set_header X-Real-IP $remote_addr; #後端的Web伺服器可以通過X-Forwarded-For獲取用戶真實IP proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; #以下是一些反向代理的配置，可選。 proxy_set_header Host $host; client_max_body_size 10m; #允許客戶端請求的最大單文件字節數 client_body_buffer_size 128k; #緩衝區代理緩衝用戶端請求的最大字節數， proxy_connect_timeout 90; #nginx跟後端伺服器連接超時時間(代理連接超時) proxy_send_timeout 90; #後端伺服器數據回傳時間(代理髮送超時) proxy_read_timeout 90; #連接成功後，後端伺服器響應時間(代理接收超時) proxy_buffer_size 4k; #設置代理伺服器（nginx）保存用戶頭信息的緩衝區大小 proxy_buffers 4 32k; #proxy_buffers緩衝區，網頁平均在32k以下的設置 proxy_busy_buffers_size 64k; #高負荷下緩衝大小（proxy_buffers*2） proxy_temp_file_write_size 64k; #設定緩存文件夾大小，大於這個值，將從upstream伺服器傳 } #設定查看Nginx狀態的地址 location /NginxStatus { stub_status on; access_log on; auth_basic \u0026quot;NginxStatus\u0026quot;; auth_basic_user_file conf/htpasswd; #htpasswd文件的內容可以用apache提供的htpasswd工具來產生。 } #本地動靜分離反向代理配置 #所有jsp的頁面均交由tomcat或resin處理 location ~ .(jsp|jspx|do)?$ { proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://127.0.0.1:8080; } #所有靜態文件由nginx直接讀取不經過tomcat或resin location ~ .*.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|pdf|xls|mp3|wma)$ { expires 15d; } location ~ .*.(js|css)?$ { expires 1h; } } } ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/nginx-config%E9%85%8D%E7%BD%AE/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-config%E9%85%8D%E7%BD%AE/","title":"Nginx-Config配置"},{"content":"############################################################################# Location可以有以下几种形式 : =\t精确匹配 ～\t正则匹配,大小写敏感 ～*\t正则匹配, 大小写不敏感 ^~\t忽略正则表达式的前缀匹配 没有修饰符,前缀匹配 @\t命名location,可用来做内部重定向 其中=和^~修饰符都可以認為是特殊形式的前缀匹配 ############################################################################# location{ default_type text/html ;\t# return 輸出為文字 } ############################################################################# Location Example * : server { listen 80 default_server; server_name _; # A location = / { return 200 \u0026quot;A\u0026quot;; } # B location / { return 200 \u0026quot;B\u0026quot;; } # C location /docs { return 200 \u0026quot;C\u0026quot;; } # D location ^~ /imgs { return 200 \u0026quot;D\u0026quot;; } # E location ~* \\.(gif|jpg|png)$ { return 200 \u0026quot;E\u0026quot;; } # F location ~ /a/.*$ { return 200 \u0026quot;F\u0026quot;; } } ############################################################################# input\toutput\t说明 http://127.0.0.1\tA\t匹配到A跟B,精确匹配优先级较高 http://127.0.0.1/test\tB\t只匹配到B http://127.0.0.1/docs/1\tC\t匹配到B跟C,C前缀比B长 http://127.0.0.1/docs/2.jpg\tE\t匹配到B、C、E，正则匹配比普通前缀匹配优先级高 http://127.0.0.1/imgs/1\tD\t只匹配到B、D,D前缀比B长 http://127.0.0.1/imgs/1.jpg\tD\t匹配到B、D、E，由于D是最长匹配且有^~修饰符， 所以不会再检查正则匹配 http://127.0.0.1/docs/a/1\tF\t匹配到B、C、F ############################################################################# Location @name的用法 @前缀可以用来定义一个命名的location,该location不处理正常的外部请求,一般用来供内部重定向使用。 它们不能嵌套,也不能包含嵌套的location。 Location Example * location /try { try_files $uri $uri/ @name; } location /error { error_page 404 = @name; return 404; } location @name { return 200 \u0026quot;@name\u0026quot;; } # 这时访问/try或者/error都会返回\u0026quot;@name\u0026quot; ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/nginx-location%E5%8F%83%E6%95%B8/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-location%E5%8F%83%E6%95%B8/","title":"Nginx-Location參數"},{"content":"引數 說明 示例 $remote_addr 客戶端地址 192.168.122.1 $remote_user 客戶端使用者名稱稱 -- $time_local 訪問時間和時區 17/Dec/2018:10:47:58 +0800 $request 請求的URI和HTTP協議 \u0026quot;GET / HTTP/1.1\u0026quot; $status HTTP請求狀態 304 $upstream_status upstream狀態 0 $body_bytes_sent 傳送給客戶端檔案內容大小 - $http_referer url跳轉來源,用於記錄是從哪個頁面連結訪問過來的 $http_user_agent 使用者終端瀏覽器等資訊,即客戶瀏覽器的相關資訊 \u0026quot;Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Firefox/52.0\u0026quot; $http_host 請求地址，即瀏覽器中你輸入的地址（IP或域名） www.wang.com 192.168.100.100 $ssl_protocol SSL協議版本 TLSv1 $ssl_cipher 交換資料中的演算法 RC4-SHA $upstream_addr 後臺upstream的地址，即真正提供服務的主機地址 10.10.10.100:80 $request_time 整個請求的總時間 0.205 $upstream_response_time 請求過程中，upstream響應時間 0.002 $http_x_forwarded_for\t客户端的真实ip 如果包含多個IP [ X-Forwarded-For: client1, proxy1, proxy2, ... ] ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/nginx-log_format%E9%85%8D%E7%BD%AE/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-log_format%E9%85%8D%E7%BD%AE/","title":"Nginx-log_format配置"},{"content":"PageSpeed模組(自動優化網站動態)下載 wget https://github.com/apache/incubator-pagespeed-ngx/archive/v1.13.35.2-stable.tar.gz tar zxvf v1.13.35.2-stable.tar.gz cd incubator-pagespeed-ngx-1.13.35.2-stable #這一步一定要做 不然nginx會無法加入模組 解壓縮會在根目錄下生成一個psol的資料夾 (解壓後將psol/放到incubator-pagespeed-ngx-1.13.35.2-stable/裡) cat PSOL_BINARY_URL wget https://dl.google.com/dl/page-speed/psol/1.13.35.2-x64.tar.gz tar zxvf 1.13.35.2-x64.tar.gz cd ../ mv incubator-pagespeed-ngx-1.13.35.2-stable /usr/local/incubator-pagespeed-ngx-1.13.35.2-stable/ nginx-http-concat模組(合併HTTP請求)下載 wget https://github.com/alibaba/nginx-http-concat/archive/1.2.2.tar.gz tar zxvf 1.2.2.tar.gz mv nginx-http-concat-1.2.2/ /usr/local/nginx-http-concat/ nginx編譯安裝 cd nginx-1.21.6/ ./configure --user=nginx --group=nginx --prefix=/usr/local/web/nginx --sbin-path=/usr/local/web/nginx/sbin/nginx --conf-path=/usr/local/web/nginx/conf/nginx.conf --error-log-path=/usr/local/web/nginx/logs/error.log --http-log-path=/usr/local/web/nginx/logs/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/lock/subsys/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-pcre --with-http_realip_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_secure_link_module --with-http_v2_module --with-http_stub_status_module --with-http_sub_module --add-module=/usr/local/incubator-pagespeed-ngx-1.13.35.2-stable/ --add-module=/usr/local/nginx-http-concat/ make \u0026amp;\u0026amp; make install (重新編譯的話不需要make install) [重新編譯執行以下步驟] /usr/local/web/nginx/sbin/nginx -s stop cp /usr/local/nginx/sbin/nginx/ /usr/local/nginx/sbin/nginx.bak cp /root/installation/nginx-1.21.6/objs/nginx /usr/local/nginx/sbin/nginx 檢查是否有加入模組 /usr/local/web/nginx/sbin/nginx -V nginx.conf設定檔新增pagespeed配置 http區段加入 pagespeed on; pagespeed FileCachePath /var/cache/nginx/ngx_pagespeed_cache; server區段加入 # Rewrite Level pagespeed RewriteLevel CoreFilters; # Minimize and optimize HTTP requests pagespeed EnableFilters rewrite_css; pagespeed EnableFilters rewrite_javascript; pagespeed EnableFilters combine_css; pagespeed EnableFilters combine_javascript; pagespeed EnableFilters inline_css; pagespeed CssInlineMaxBytes 4096; pagespeed EnableFilters inline_javascript; pagespeed JsInlineMaxBytes 4096; # Image Optimization and lazy load pagespeed EnableFilters rewrite_images; pagespeed EnableFilters inline_images; pagespeed EnableFilters resize_images; pagespeed EnableFilters recompress_images; # Controlling the use of beacons pagespeed AvoidRenamingIntrospectiveJavascript off; pagespeed CriticalImagesBeaconEnabled false; location ~ \u0026quot;\\.pagespeed\\.([a-z]\\.)?[a-z]{2}\\.[^.]{10}\\.[^.]+\u0026quot; { add_header \u0026quot;\u0026quot; \u0026quot;\u0026quot;; } location ~ \u0026quot;^/pagespeed_static/\u0026quot; { } location ~ \u0026quot;^/ngx_pagespeed_beacon$\u0026quot; { } 重啟nginx /usr/local/web/nginx/sbin/nginx -s reload ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/nginx-%E5%8A%A0%E5%85%A5pagespeed%E6%A8%A1%E7%B5%84%E5%8F%8Anginx-http-concat/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-%E5%8A%A0%E5%85%A5pagespeed%E6%A8%A1%E7%B5%84%E5%8F%8Anginx-http-concat/","title":"Nginx-加入PageSpeed模組及nginx-http-concat"},{"content":"########################################################################### 統計IP訪問量 awk \u0026#39;{print $l}\u0026#39; /var/log/nginx-access.log | sort -n | uniq | wc -l 查看某一時間段IP的訪問量 grep \u0026#34;14/Jul/2021:0[2-10]\u0026#34; /var/log/nginx-access.log | awk \u0026#39;{print $l}\u0026#39; | sort | uniq -c | sort -nr | wc -l 查看訪問次數最頻繁的前100個IP awk \u0026#39;{print $l}\u0026#39; /var/log/nginx-access.log | sort -n | uniq -c | sort -rn | head -n 100 查看訪問次數100以上的IP awk \u0026#39;{print $l}\u0026#39; /var/log/nginx-access.log |sort -n |uniq -c |awk \u0026#39;{if($l \u0026gt;100) print $0 } \u0026#39; | sort -rn 查詢某個IP的詳細訪問情況,按訪問頻率排序 grep \u0026#39;172.16.0.6\u0026#39; /var/log/nginx-access.log |awk \u0026#39;{print $7}\u0026#39;|sort |uniq -c |sort -rn |head -n 100 ########################################################################### 頁面訪問統計 ########################################################################### 查看訪問最頻繁的頁面 awk \u0026#39;{print $7}\u0026#39; /var/log/nginx-access.log | sort | uniq -c | sort -rn | head -n 100 查看訪問最頻繁的頁面(排除PHP頁面) grep -v \u0026#34;.php\u0026#34; /var/log/nginx-access.log |awk \u0026#39;{print $7}\u0026#39;|sort|uniq -c|sort -rn|head -n 100 查看頁面訪問次數超過100的頁面 cat /var/log/nginx-access.log | cut -d \u0026#39;\u0026#39; -f 7 | sort | uniq -c | awk \u0026#39;(if ($l \u0026gt;100) print $0}\u0026#39; | less 查看最近1000條紀錄,訪問量最高的頁面 tail -1000 /var/log/nginx-access.log | awk \u0026#39;{print $7} \u0026#39; |sort|uniq -c|sort -nr|less ########################################################################### 每秒請求量統計 awk \u0026#39;{print $4}\u0026#39; /var/log/nginx-access.log |cut -c 14-21|sort|uniq -c|sort -nr|head -n 100 每分鐘請求統計 awk \u0026#39;{print $4}\u0026#39; /var/log/nginx-access.log|cut -c 14-18|sort|uniq -c|sort -nr|head -n 100 每小時請求統計 awk \u0026#39;{print $4}\u0026#39; /var/log/nginx-access.log |cut -c 14-15|sort|uniq -c|sort -nr|head -n 100 ########################################################################### 性能分析 ########################################################################### 列出傳輸時間超過3秒的頁面,顯示前20條 cat /var/log/nginx-access.log |awk \u0026#39;($NF \u0026gt; 3){print $7}\u0026#39;|sort -n|uniq -c|sort -nr|head -20 列出PHP頁面請求時間超過3秒的頁面,並統計其出現的次數,顯示前100條 cat /var/log/nginx-access.log|awk \u0026#39;($NF \u0026gt; 1 \u0026amp;\u0026amp; $7~/\\.php/){print $7}\u0026#39;|sort -n|uniq -c|sort -nr|head -100 ########################################################################### 蜘蛛抓取統計 ########################################################################### 統計蜘蛛抓取次數 grep \u0026#39;Baiduspider\u0026#39; /var/log/nginx-access.log |wc -l 統計蜘蛛抓取404的次數 grep \u0026#39;Baiduspider\u0026#39; /var/log/nginx-access.log | grep \u0026#39;404\u0026#39; |wc -l ########################################################################### TCP連接統計 ########################################################################### 查看當前TCP連接數 netstat -tan | grep \u0026#34;ESTABLISHED\u0026#34; | grep \u0026#34;:80\u0026#34; | wc -l 用 Tcpdump 嗅探80端口的訪問看誰高 tcpdump -i enp0s3 -tnn dst port 80 -c 1000 | awk -F\u0026#34;.\u0026#34; \u0026#39;{print $1\u0026#34;.\u0026#34;$2\u0026#34;.\u0026#34;$3\u0026#34;.\u0026#34;$4}\u0026#39; | sort | uniq -c | sort -nr ########################################################################### head -5 # 前五行LOG 數據 sort -k 1nr\t# 按照第一個字段 , 數值排序 , 且為逆序 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/nginx-%E5%B8%B8%E7%94%A8%E7%9A%84log%E6%90%9C%E7%B4%A2%E6%8C%87%E4%BB%A4/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-%E5%B8%B8%E7%94%A8%E7%9A%84log%E6%90%9C%E7%B4%A2%E6%8C%87%E4%BB%A4/","title":"Nginx-常用的LOG搜索指令"},{"content":"首先需要建立一個密碼檔, 裡面包含了使用者名稱, 以及加密了的密碼, 如果系統有安裝 Apache, 可以用以下語法建立密碼檔: htpasswd -c /path/to/file/.htpasswd username 但如果沒有 htpasswd 指令可以使用, 那便要手動建立密碼檔, 但也是很簡單的。密碼檔的格式如下: username 是使用者名稱, 可以自行定義, 而 encrypted-password 則是加密的密碼, username:encrypted-password:comment 建立密碼檔: vim /home/opencli/.htpasswd 將要設定的使用者名稱及上面的加密密碼複製到檔案, 即以下格式: username:saoYYKpu2QSsA 現在開啟 Nginx 的設定檔設定, 以下假設檔案在 /etc/nginx/conf.d/default.conf: vim /etc/nginx/conf.d/default.conf 假設我要設定密碼保護的目錄是 /usr/share/nginx/html/admin, 在 server 段落加入以下幾行: location /admin/ { auth_basic \u0026#34;Restricted\u0026#34;; auth_basic_user_file /home/opencli/.htpasswd; } 儲存檔案後需要重新啟動 Nginx: systemctl restart nginx ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/nginx-%E8%A8%AD%E5%AE%9A%E7%9B%AE%E9%8C%84%E5%AF%86%E7%A2%BC%E4%BF%9D%E8%AD%B7/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-%E8%A8%AD%E5%AE%9A%E7%9B%AE%E9%8C%84%E5%AF%86%E7%A2%BC%E4%BF%9D%E8%AD%B7/","title":"Nginx-設定目錄密碼保護"},{"content":"########################################################################## 重新編譯 cd nginx-1.21.6/ ./configure --user=nginx --group=nginx --prefix=/usr/local/nginx --sbin-path=/usr/local/nginx/sbin/nginx --conf-path=/usr/local/nginx/conf/nginx.conf --error-log-path=/usr/local/nginx/logs/error.log --http-log-path=/usr/local/nginx/logs/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/lock/subsys/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-pcre --with-debug make 不要做 make install ########################################################################## 停 Nginx /usr/local/web/nginx/sbin/nginx -s stop 備份舊的nginx程式 cp /usr/local/web/nginx/sbin/nginx/ /usr/local/web/nginx/sbin/nginx.bak 把新的nginx程式覆蓋舊的 cp /root/installation/nginx-1.21.6/objs/nginx /usr/local/web/nginx/sbin/nginx 檢視ngixn版本極其編譯引數 /usr/local/web/nginx/sbin/nginx -V 測試新的nginx程式是否正確 /usr/local/web/nginx/sbin/nginx -t 平滑重啟nginx /usr/local/web/nginx/sbin/nginx -s reload ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/nginx-%E9%87%8D%E6%96%B0%E7%B7%A8%E8%AD%AF/100_hud639c4e125de7e8ad17e2519279d4fee_29636_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/nginx-%E9%87%8D%E6%96%B0%E7%B7%A8%E8%AD%AF/","title":"Nginx-重新編譯"},{"content":"安裝依賴 wget ftp://mcrypt.hellug.gr/pub/crypto/mcrypt/attic/libmcrypt/libmcrypt-2.5.7.tar.gz tar -zxvf libmcrypt-2.5.7.tar.gz cd libmcrypt-2.5.7 ./configure --prefix=/usr/local make \u0026amp; make install yum -y install gcc gcc-c++ make cmake automake autoconf kernel-devel ncurses-devel libxml2-devel openssl-devel curl-devel libjpeg-devel libpng-devel pcre-devel libtool libtool-libs freetype-devel gd zlib-devel file bison patch mlocate flex diffutils readline-devel glibc-devel glib2-devel bzip2-devel gettext-devel libcap-devel openldap openldap-devel libxslt-devel sqlite-devel yum install mysql-devel [官網安裝tar包](https://www.php.net/releases/index.php) vim /etc/ld.so.conf.d/local.conf /usr/local/lib # 添加该行 , 如果不行 , 则用/usr/local/lib64 :wq ldconfig -v # 使之生效 ######################################## cp -frp /usr/lib64/libldap* /usr/lib/ ln -s /usr/lib64/liblber* /usr/lib/ ######################################## tar -zxvf php-7.0.1.tar.gz \u0026#39;./configure\u0026#39; \u0026#39;--prefix=/usr/local/web/php\u0026#39; \u0026#39;--with-config-file-path=/usr/local/web/php/etc\u0026#39; \u0026#39;--with-mysqli=/usr/bin/mysql_config\u0026#39; \u0026#39;--with-iconv-dir=/usr/local\u0026#39; \u0026#39;--with-freetype-dir\u0026#39; \u0026#39;--with-jpeg-dir\u0026#39; \u0026#39;--with-png-dir\u0026#39; \u0026#39;--with-zlib\u0026#39; \u0026#39;--with-libxml-dir=/usr\u0026#39; \u0026#39;--enable-xml\u0026#39; \u0026#39;--disable-rpath\u0026#39; \u0026#39;--enable-bcmath\u0026#39; \u0026#39;--enable-shmop\u0026#39; \u0026#39;--enable-sysvsem\u0026#39; \u0026#39;--enable-inline-optimization\u0026#39; \u0026#39;--with-curl\u0026#39; \u0026#39;--enable-mbregex\u0026#39; \u0026#39;--enable-fpm\u0026#39; \u0026#39;--enable-mbstring\u0026#39; \u0026#39;--with-mcrypt\u0026#39; \u0026#39;--with-gd\u0026#39; \u0026#39;--enable-gd-native-ttf\u0026#39; \u0026#39;--with-openssl\u0026#39; \u0026#39;--with-mhash\u0026#39; \u0026#39;--enable-pcntl\u0026#39; \u0026#39;--enable-sockets\u0026#39; \u0026#39;--with-ldap\u0026#39; \u0026#39;--with-ldap-sasl\u0026#39; \u0026#39;--with-xmlrpc\u0026#39; \u0026#39;--enable-zip\u0026#39; \u0026#39;--enable-soap\u0026#39; \u0026#39;--enable-opcache\u0026#39; \u0026#39;--enable-ftp\u0026#39; vim Makefile \u0026gt;\u0026gt;\u0026gt;EXTRA_LIBS = ... -lcrypt -llber -liconv make \u0026amp; make test \u0026amp; make install ######################################## cp php.ini-production /usr/local/web/php/etc/php.ini cp sapi/fpm/php-fpm.service /usr/lib/systemd/system/ cp /usr/local/web/php/etc/php-fpm.conf.default /usr/local/web/php/etc/php-fpm.conf cp /usr/local/web/php/etc/php-fpm.d/www.conf.default /usr/local/web/php/etc/php-fpm.d/www.conf ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/php-%E4%BD%BF%E7%94%A8tarball%E5%AE%89%E8%A3%9D/100_hu2ca637fb1d0a70ad637da30e1c6e56b4_46154_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/php-%E4%BD%BF%E7%94%A8tarball%E5%AE%89%E8%A3%9D/","title":"PHP-使用TARBALL安裝"},{"content":"安装必要 yum -y install gcc gcc-c++ 要安装PHP 7，使用以下命令在CentOS 7系统上安装和启用EPEL和Remi存储库。 yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm yum install http://rpms.remirepo.net/enterprise/remi-release-7.rpm 安装yum-utils，这是一组用于管理yum存储库和包的有用程序。它有基本上扩展yum默认功能的工具。 它可用于管理（启用或禁用）yum存储库以及包，无需任何手动配置等等#yum -y install yum-utils yum-utils提供的程序之一是yum-config-manager，使用它来启用Remi存储库作为安装不同PHP版本的默认存储库 yum-config-manager --enable remi-php71 [ 安装PHP 7.1 ] yum-config-manager --enable remi-php72 [ 安装PHP 7.2 ] yum-config-manager --enable remi-php73 [ 安装PHP 7.3 ] 使用以下命令安装PHP 7以及所有必需的模块。 yum -y install php php-mcrypt php-devel php-cli php-gd php-pear php-curl php-fpm php-mysql php-ldap php-zi 查看php版本 [root@VM_159_140_centos lnmp]# php -v ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/php-%E4%BD%BF%E7%94%A8yum%E5%AE%89%E8%A3%9D/100_hu2ca637fb1d0a70ad637da30e1c6e56b4_46154_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/php-%E4%BD%BF%E7%94%A8yum%E5%AE%89%E8%A3%9D/","title":"PHP-使用YUM安裝"},{"content":"################################### Centos7 配置php-fpm服务到systemctl ################################### vim /usr/local/php/etc/php-fpm.conf ################################### ; Pid file ; Note: the default prefix is /usr/local/php/var ; Default Value: none pid = /var/run/php-fpm.pid ################################### touch /usr/lib/systemd/system/php-fpm.service ################################### vim /usr/lib/systemd/system/php-fpm.service ################################### [Unit] Description=The PHP FastCGI Process Manager After=syslog.target network.target [Service] Type=forking PIDFile=/var/run/php-fpm.pid ExecStart=/usr/local/php/sbin/php-fpm ExecReload=/bin/kill -USR2 $MAINPID PrivateTmp=true [Install] WantedBy=multi-user.target ################################### systemctl daemon-reload ################################### ps aux|grep php-fpm ################################### kill -9 ################################### systemctl start php-fpm ################################### ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/php-%E6%B7%BB%E5%8A%A0%E5%88%B0linux%E7%B3%BB%E7%B5%B1%E5%95%9F%E5%8B%95/100_hu2ca637fb1d0a70ad637da30e1c6e56b4_46154_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/php-%E6%B7%BB%E5%8A%A0%E5%88%B0linux%E7%B3%BB%E7%B5%B1%E5%95%9F%E5%8B%95/","title":"PHP-添加到LINUX系統啟動"},{"content":"# yum -y update # yum -y install vim wget # yum -y install python-setuptools # easy_install pip # yum -y install make gcc gcc-c++ # yum -y install zlib-devel # yum -y install readline* # yum -y install openssl-devel # yum -y install tk-devel # yum -y install sqlite-devel $ wget https://www.python.org/ftp/python/3.6.3/Python-3.6.3.tgz $ tar -zxvf Python-3.6.3.tgz $ cd Python-3.6.3 $ ./configure --enable-loadable-sqlite-extensions $ make $ sudo make install # mv /usr/bin/python /usr/bin/python.bak # ln -s /usr/local/bin/python3 /usr/bin/python # vim /usr/bin/yum # vim /usr/libexec/urlgrabber-ext-down # vim /usr/bin/firewall-cmd # vim /usr/sbin/firewalld 註：被​將每個文件的第一句話 #!/usr/bin/python 改為 #!/usr/bin/python2.7，保存退出即可 # service firewalld restart # service firewalld status # pip install [packages] ex: numpy、scipy、matplotlib、scikit-learn... ERR: Command \u0026quot;python setup.py egg_info\u0026quot; failed with error code 1 in /tmp/pip-build-j_ho_m/setuptools/ pip3 install --upgrade setuptools 載不下來可以添加參數 XXX --use-deprecated=backtrack-on-build-failures curl https://bootstrap.pypa.io/get-pip.py \u0026gt; get-pip.py python get-pip.py pip -V , pip3 -V ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/python2.7-%E5%8D%87%E7%B4%9A%E6%88%90-python3.6/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/python2.7-%E5%8D%87%E7%B4%9A%E6%88%90-python3.6/","title":"Python2.7 升級成 Python3.6"},{"content":"step=2 #間隔的秒數 TOKEN=\u0026#34;XXX\u0026#34; message=\u0026#34;%0D%0A TEST-222 Telegraf offline\u0026#34; l_process=`ps aux |grep telegraf |grep -v \u0026#39;grep\u0026#39;|awk \u0026#39;{print $2}\u0026#39;` curl -i -XPOST \u0026#39;http://localhost:8086/query?db=telegraf\u0026#39; --data-urlencode \u0026#34;q=drop series FROM \u0026#34;live\u0026#34; where \u0026#34;host\u0026#34;=\u0026#39;222\u0026#39; \u0026#34; for (( i=0; i \u0026lt; 60; i=(i+step) )); do if [ ! -n \u0026#34;$l_process\u0026#34; ]; then curl -i -XPOST \u0026#39;http://localhost:8086/write?db=telegraf\u0026#39; --data-binary \u0026#39;live,host=222 value=0\u0026#39; curl https://notify-api.line.me/api/notify -H \u0026#34;Authorization: Bearer ${TOKEN}\u0026#34; -d \u0026#34;message=${message}\u0026#34; else curl -i -XPOST \u0026#39;http://localhost:8086/write?db=telegraf\u0026#39; --data-binary \u0026#39;live,host=222 value=1\u0026#39; fi sleep $step done exit 0 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/shell-script-%E5%81%B5%E6%B8%ACtelegraf%E6%9C%8D%E5%8B%99/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/shell-script-%E5%81%B5%E6%B8%ACtelegraf%E6%9C%8D%E5%8B%99/","title":"shell script-偵測telegraf服務"},{"content":"抓影片腳本 (youtube,pornhhub \u0026hellip;\u0026hellip;) #!/bin/bash #date=`date +%Y%m%d` binpath=\u0026#34;/usr/bin\u0026#34; savedpath=\u0026#34;/home/videorecord\u0026#34; youtubedl=\u0026#34;$binpath/python $savedpath/youtube_dl/__main__.py\u0026#34; while [ \u0026#34;$anser\u0026#34; != \u0026#34;y\u0026#34; -a \u0026#34;$anser\u0026#34; != \u0026#34;Y\u0026#34; ] do while : do while : do while : do while : do echo \u0026#34; \u0026#34; read -p \u0026#34;請輸入要下載或裁切影片的日期 ex:20230226: \u0026#34; datee echo $datee | egrep -q \u0026#39;^[[:digit:]]{8}$\u0026#39; if [ \u0026#34;$?\u0026#34; == \u0026#34;0\u0026#34; ]; then break else echo \u0026#34; \u0026#34; echo \u0026#34;日期輸入錯誤 please try again...\u0026#34; echo \u0026#34; \u0026#34; fi done if [ ! -f \u0026#34;${datee}NSV.mp4\u0026#34; ]; then echo \u0026#34; \u0026#34; read -p \u0026#34;請輸入要下載影片的 \u0026#34;m3u8\u0026#34; : \u0026#34; m3u8 echo \u0026#34; \u0026#34; $youtubedl -F $m3u8 if [ \u0026#34;$?\u0026#34; != \u0026#34;0\u0026#34; ];then exit fi echo \u0026#34; \u0026#34; read -p \u0026#34;請輸入要下載影片的 format code : \u0026#34; formatcode echo \u0026#34; \u0026#34; $youtubedl $m3u8 -f $formatcode -o $savedpath/${datee}NSV.mp4 code3=\u0026#34;$?\u0026#34; else code3=\u0026#34;666\u0026#34; echo \u0026#34; \u0026#34; echo \u0026#34;${datee}NSV.mp4 已存在 , 準備裁切影片\u0026#34; fi break done case $code3 in \u0026#34;0\u0026#34;) break ;; \u0026#34;666\u0026#34;) break ;; *) exit 1 ;; esac done echo \u0026#34; \u0026#34; read -p \u0026#34;請輸入開始裁切時間 ex:00:00:00 : \u0026#34; starting read -p \u0026#34;請輸入結束裁切時間 ex:00:00:00 : \u0026#34; ending echo $starting | egrep -q \u0026#39;^[[:digit:]]{2}\\:[[:digit:]]{2}\\:[[:digit:]]{2}$\u0026#39; code1=\u0026#34;$?\u0026#34; echo $ending | egrep -q \u0026#39;^[[:digit:]]{2}\\:[[:digit:]]{2}\\:[[:digit:]]{2}$\u0026#39; code2=\u0026#34;$?\u0026#34; #\techo \u0026#34;$code1\u0026#34; #\techo \u0026#34;$code2\u0026#34; if [ \u0026#34;$code1\u0026#34; -a \u0026#34;$code2\u0026#34; == \u0026#34;0\u0026#34; ]; then break else echo \u0026#34; \u0026#34; echo \u0026#34;時間格式輸入錯誤 please try again...\u0026#34; continue fi done echo \u0026#34; \u0026#34; echo \u0026#34;===========================================\u0026#34; echo \u0026#34; 請確認開始裁切時間為: $starting\u0026#34; echo \u0026#34; 請確認結束裁切時間為: $ending\u0026#34; echo \u0026#34;===========================================\u0026#34; echo \u0026#34; \u0026#34; read -p \u0026#34;are you sure [y or n] :\u0026#34; anser done endd=$(date -d \u0026#34;$ending\u0026#34; +%s) startt=$(date -d \u0026#34;$starting\u0026#34; +%s) second=$(($endd-$startt)) if [ \u0026#34;$second\u0026#34; -gt \u0026#34;0\u0026#34; ]; then $binpath/ffmpeg -i $savedpath/${datee}NSV.mp4 -ss $starting -t $second -c copy $savedpath/${datee}TBL.mp4 echo -e \u0026#34; \u0026#34; echo \u0026#34;======================================================================\u0026#34; echo -e \u0026#34; \u0026#34; echo -e \u0026#34;請確認影片是否上傳: \u0026#34; echo -e \u0026#34; \u0026#34; echo -e \u0026#34;$VIDEOURL/$dateeTBL.mp4\u0026#34; echo -e \u0026#34; \u0026#34; echo \u0026#34;======================================================================\u0026#34; echo -e \u0026#34; \u0026#34; else echo \u0026#34; \u0026#34; echo \u0026#34;錄製時間輸入錯誤 please try again...\u0026#34; echo \u0026#34; \u0026#34;\tfi ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/shell-script-%E6%8A%93youtube%E5%BD%B1%E7%89%87%E8%85%B3%E6%9C%AC/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/shell-script-%E6%8A%93youtube%E5%BD%B1%E7%89%87%E8%85%B3%E6%9C%AC/","title":"shell script-抓youtube影片腳本"},{"content":"#!/bin/bash while [ \u0026quot;i\u0026quot; != \u0026quot;1\u0026quot; ] do echo -n new user name: read name useradd $name echo \u0026quot;123456\u0026quot; | passwd --stdin $name echo finish new user name is:$name done sed -i \u0026quot;s/GSSAPIAuthentication yes/GSSAPIAuthentication no/g\u0026quot; /etc/ssh/sshd_config sed -i \u0026quot;s/#UseDNS yes/UseDNS no/g\u0026quot; /etc/ssh/sshd_config service sshd restart ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/shell-script-%E6%96%B0%E5%A2%9E%E4%BD%BF%E7%94%A8%E8%80%85/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/shell-script-%E6%96%B0%E5%A2%9E%E4%BD%BF%E7%94%A8%E8%80%85/","title":"shell script-新增使用者"},{"content":"#!/bin/bash rndc flush service named restart rndc flush ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/shell-script-%E6%B8%85%E9%99%A4%E5%85%A7%E9%83%A8%E8%A7%A3%E6%9E%90%E6%9A%AB%E5%AD%98/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/shell-script-%E6%B8%85%E9%99%A4%E5%85%A7%E9%83%A8%E8%A7%A3%E6%9E%90%E6%9A%AB%E5%AD%98/","title":"shell script-清除內部解析暫存"},{"content":"#!/bin/bash step=2 #間隔的秒數 TOKEN=\u0026#34;XXX\u0026#34; #LINE TOKEN MESSAGE1=\u0026#34;Mysql Connection Failed!! TCP:3306 offline.\u0026#34; MESSAGE2=\u0026#34;Mysql Connection Failed!! TCP:3307 offline.\u0026#34; for (( i=0;i\u0026lt;60;i=(i+step) )); do echo \u0026#34;quit\u0026#34; | telnet 127.0.0.1 3306 | grep \u0026#34;Escape character is\u0026#34; code1=\u0026#34;$?\u0026#34; echo \u0026#34;quit\u0026#34; | telnet 127.0.0.1 3307 | grep \u0026#34;Escape character is\u0026#34; code2=\u0026#34;$?\u0026#34; if [ \u0026#34;$code1\u0026#34; -ne 0 ]; then echo \u0026#34;`date +%H:%M:%S` - TCP:3306 offline.\u0026#34; \u0026gt;\u0026gt; /root/line/mysql/mysql-error.txt curl -X POST https://notify-api.line.me/api/notify -H \u0026#34;Authorization: Bearer ${TOKEN}\u0026#34; -d \u0026#34;message=${MESSAGE1}\u0026#34; elif [ \u0026#34;$code2\u0026#34; -ne 0 ]; then echo \u0026#34;`date +%H:%M:%S` - TCP:3307 offline.\u0026#34; \u0026gt;\u0026gt; /root/line/mysql/mysql-error.txt curl -X POST https://notify-api.line.me/api/notify -H \u0026#34;Authorization: Bearer ${TOKEN}\u0026#34; -d \u0026#34;message=${MESSAGE2}\u0026#34; fi sleep $step done exit 0 ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/shell-script-%E5%81%B5%E6%B8%AC-mysql-%E6%9C%8D%E5%8B%99%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%E9%81%8B%E4%BD%9C/100_hu1acf48b62c2e007a3a704d91e9dd9674_43864_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/shell-script-%E5%81%B5%E6%B8%AC-mysql-%E6%9C%8D%E5%8B%99%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%E9%81%8B%E4%BD%9C/","title":"shell-script-偵測 mysql 服務是否正常運作"},{"content":"--------------------------------------- SVN綠色勾勾消失 1. Win + R \u0026gt;\u0026gt; regedit \u0026gt;\u0026gt; HKEY_LOCAL_MACHINE-\u0026gt;SOFTWARE-\u0026gt;Microsoft-\u0026gt;Windows-\u0026gt;CurrentVersion-\u0026gt;Explorer-\u0026gt;ShellIconOverlayIdentifiers 2. 查看註冊表中是否有Tortoisesvn相關選項，如果有，將Tortoisesvn相關移到最前端，將首字母改爲數字，或者空格 (如果註冊表中沒有Tortoisesvn相關，則將Tortoisesvn導入到註冊表，具體內容爲： Windows Registry Editor Version 5.00) [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\1TortoiseNormal] @=\u0026quot;{C5994560-53D9-4125-87C9-F193FC689CB2}\u0026quot; [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\2TortoiseModified] @=\u0026quot;{C5994561-53D9-4125-87C9-F193FC689CB2}\u0026quot; [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\3TortoiseConflict] @=\u0026quot;{C5994562-53D9-4125-87C9-F193FC689CB2}\u0026quot; [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\4TortoiseLocked] @=\u0026quot;{C5994563-53D9-4125-87C9-F193FC689CB2}\u0026quot; [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\5TortoiseReadOnly] @=\u0026quot;{C5994564-53D9-4125-87C9-F193FC689CB2}\u0026quot; [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\6TortoiseDeleted] @=\u0026quot;{C5994565-53D9-4125-87C9-F193FC689CB2}\u0026quot; [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\7TortoiseAdded] @=\u0026quot;{C5994566-53D9-4125-87C9-F193FC689CB2}\u0026quot; [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\8TortoiseIgnored] @=\u0026quot;{C5994567-53D9-4125-87C9-F193FC689CB2}\u0026quot; [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\9TortoiseUnversioned] @=\u0026quot;{C5994568-53D9-4125-87C9-F193FC689CB2}\u0026quot; [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\Offline Files] @=\u0026quot;{750fdf0e-2a26-11d1-a3ea-080036587f03}\u0026quot; 將上面內容保存到svn.reg文件中，然後導入註冊表 3. 重啓Explorer CND : taskkill /f /im explorer.exe \u0026gt; start explorer.exe PW : stop-process -name explorer -force 4. EX: 電腦\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\ 001Tortoise1Normal 001Tortoise2Modified 001Tortoise3Conflict 001Tortoise4Locked 001Tortoise5ReadOnly 001Tortoise6Deleted 001Tortoise7Added 001Tortoise8Ignored 001Tortoise9Unversioned ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/svn-%E7%B6%A0%E8%89%B2%E5%8B%BE%E5%8B%BE%E6%B6%88%E5%A4%B1/100_hu791d074278204665296c002ec84be428_1698_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/svn-%E7%B6%A0%E8%89%B2%E5%8B%BE%E5%8B%BE%E6%B6%88%E5%A4%B1/","title":"SVN-綠色勾勾消失"},{"content":"XEN-center \u0026gt;\u0026gt; storage \u0026gt;\u0026gt; ADD disk 新增30G 查看各區硬碟 df -h 查看總硬碟有無新增30G fdisk -l 檢視已經存在的pv（物理卷） pvdisplay 檢視當前已經存在的vg（邏輯卷組） vgdisplay 檢視已經存在的lv（邏輯卷） lvdisplay 把/dev/xvdb加入與/目錄相同的vg（邏輯卷組） vgextend centos /dev/xvdb 擴容lv（邏輯卷） lvextend -L +30.0GB -n /dev/mapper/centos-root 使其生效 xfs_growfs /dev/mapper/centos-root df -h ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/xenserver-%E6%93%B4%E5%85%85root%E7%A3%81%E5%8D%80/100_hu442ea9164a062f86740540d4232db639_41801_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/xenserver-%E6%93%B4%E5%85%85root%E7%A3%81%E5%8D%80/","title":"XenServer-擴充root磁區"},{"content":"開啟windoes元件 \u0026lt;\u0026lt; samba ","date":"2022-08-03T00:00:00Z","image":"https://note.laurance.ml/p/xenserver-%E7%84%A1%E6%B3%95%E5%82%B3iso%E6%98%A0%E5%83%8F%E6%AA%94/100_hu442ea9164a062f86740540d4232db639_41801_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/xenserver-%E7%84%A1%E6%B3%95%E5%82%B3iso%E6%98%A0%E5%83%8F%E6%AA%94/","title":"XenServer-無法傳ISO映像檔"},{"content":"GCP 剩餘時間 在 [帳單 \u0026gt; 帳戶管理] 可以看到有帳單帳戶管理員\n我們可以先用新 email 註冊一個新 GCP\n建立一個新的 email 並綁定同一張信用卡,領取300美抵免額\nps. 這時會出現卡被扣40塊,放心後面會退刷的\n在舊 GCP帳號裡新增剛剛新創立的新 GCP帳號\n帳單 \u0026gt; 帳戶管理 \u0026gt; 新增主體 將新的 gmail填入並選擇帳單帳戶管理員\n儲存後可以看到帳單帳戶管理員多了 新的GCP帳號\n接著到新的GCP帳號選擇管理帳單帳戶\n在新 GCP帳號裡新增舊 GCP帳號\n將舊的 gmail填入並選擇帳單帳戶管理員\n儲存後可以看到帳單帳戶管理員多了 舊的GCP帳號\n重新開啟後可以看到舊帳號已延續新帳號的抵免額及天數\n最後一步: 將舊帳號GCP裡面保留新帳號的帳單 (將舊的gmail砍掉) 從新帳號GCP裡面保留舊帳號的帳單 (將新的gmail砍掉) 新的GCP沒有跑機器,不會產生費用 用新的抵免額延續舊帳號裡的機器 ","date":"2022-02-16T00:00:00Z","image":"https://note.laurance.ml/p/gcp-%E7%84%A1%E7%97%9B%E8%BD%89%E7%A7%BB%E5%B8%B3%E5%96%AE%E5%85%8D%E8%B2%BB%E9%A1%8D%E5%BA%A6/100_hu955ca03f846527c7d15132e3291bde7f_39307_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/gcp-%E7%84%A1%E7%97%9B%E8%BD%89%E7%A7%BB%E5%B8%B3%E5%96%AE%E5%85%8D%E8%B2%BB%E9%A1%8D%E5%BA%A6/","title":"GCP-無痛轉移帳單免費額度"},{"content":"版本 [MySQL-5.1.73 + Apache-2.2.27 + PHP-5.5.16] 環境安裝 {MySQL-5.1.73} (centos6 預設版本) Sever 安裝\nyum install mysql-server mysql-client mysql-devel* 啟動服務\nservice mysqld start 設置 root 密碼\nmysqladmin -u root password '123456' 建立 database-newdb\nmysqladmin -uroot -p create \u0026quot;newdb\u0026quot; {Apache-2.2.27} 安裝依賴\nyum -y install gcc+ gcc-c++ 解壓 \u0026amp; 安裝\ntar zxvf httpd-2.2.27.kiwi.tar.gz ./configure --prefix=/usr/local/web/apache2 --enable-ssl --enable-so --enable-vhost-alias --with-mpm=prefork make \u0026amp;\u0026amp; make install 啟動服務\n/usr/local/web/apache2/bin/apachectl {PHP-5.5.16} 安裝依賴\nyum -y install gcc gcc-c++ make cmake automake autoconf kernel-devel ncurses-devel libxml2-devel openssl-devel curl-devel libjpeg-devel libpng-devel pcre-devel libtool libtool-libs freetype-devel gd zlib-devel file bison patch mlocate flex diffutils readline-devel glibc-devel glib2-devel bzip2-devel gettext-devel libcap-devel openldap openldap-devel libxslt-devel sqlite-devel 解壓 \u0026amp; 安裝\ntar zxvf php-5.5.16.kiwi.tar.gz './configure' '--prefix=/usr/local/web/php' '--with-apxs2=/usr/local/web/apache2/bin/apxs' '--with-mysql' '--with-mysqli' '--disable-cgi' '--with-iconv' '--disable-inline-optimization' '--enable-mbstring=tw' '--enable-sysvshm' '--enable-sysvsem' '--enable-sockets' '--with-jpeg-dir' '--with-png-dir' '--with-gd' '--with-zlib' '--with-curl' '--enable-zip' '--with-openssl-dir=/usr/lib/openssl' '--with-openssl' '--enable-opcache' make \u0026amp;\u0026amp; make install 複製設定檔及 link\ncp php.ini-development /usr/local/web/php/etc/php.ini cp /usr/local/web/php/bin/* /usr/bin/ ln -s /usr/local/web/php/etc/php.ini /etc/php.ini 設定 DB \u0026amp; WEB [mysql] 下載框架\ngit clone https://github.com/dingbangli/dbmonitor-case.git 將 SQL 框架匯入 DB\nmysql -uroot -p newdb \u0026lt; dbmonitor_newdb.sql Mysql 建立使用者 \u0026amp; DB 資料\nmysql\u0026gt; GRANT ALL PRIVILEGES ON *.* TO 'ckdb'@'localhost' IDENTIFIED BY 'XXX' mysql\u0026gt; insert into dbwhere(wid,dbname,dbip,dbtype,id2,dbport) values('22','DB-22','172.16.0.222','m','2106','3306'); mysql\u0026gt; insert into dbwhere(wid,dbname,dbip,dbtype,id2,dbport) values('23','DB-23','172.16.0.223','s','2107','3306'); mysql\u0026gt; insert into web(wname,wid) values('lv22','22'); mysql\u0026gt; insert into web(wname,wid) values('lv23','23'); mysql\u0026gt; \\q [Apache] 建立資料夾放 vhost\nmkdir /usr/local/web/apache2/conf/extra/vhost-list 將 git 拉出的 web 框架移至 home\ntar zxvf dbmonitor.tar.gz -C /home/ 編輯 web 框架設定\nvim /home/dbmonitor/sys_config.php \u0026lt;?php error_reporting (16); $db_ip=\u0026#34;localhost:/var/lib/mysql/mysql.sock\u0026#34;; $db_user=\u0026#34;ckdb\u0026#34;; $db_pas=\u0026#34;XXX\u0026#34;; $go_user=\u0026#34;ckdb\u0026#34;; $go_pas=\u0026#34;XXX\u0026#34;; ?\u0026gt; 編輯 httpd-vhost 設定\nvim httpd-vhosts.conf NameVirtualHost *:80 Include conf/extra/vhost-list/*.conf 編輯 dbmonitor 設定\nvim /usr/local/web/apache2/conf/extra/vhost-list/dbmonitor.conf \u0026lt;VirtualHost *:80\u0026gt; ServerAdmin root@localhost DocumentRoot \u0026#34;/home/dbmonitor/\u0026#34; ServerName dbmonitor.net ServerAlias dbmonitor2.net ErrorLog \u0026#34;logs/dbmonitor.err\u0026#34; CustomLog \u0026#34;logs/dbmonitor.acc\u0026#34; common \u0026lt;/VirtualHost\u0026gt; 編輯 httpd 主設定檔\nvim /usr/local/web/apache2/conf/httpd.conf # # This is the main Apache HTTP server configuration file. It contains the # configuration directives that give the server its instructions. # See \u0026lt;URL:http://httpd.apache.org/docs/2.2\u0026gt; for detailed information. # In particular, see # \u0026lt;URL:http://httpd.apache.org/docs/2.2/mod/directives.html\u0026gt; # for a discussion of each configuration directive. # # Do NOT simply read the instructions in here without understanding # what they do. They\u0026#39;re here only as hints or reminders. If you are unsure # consult the online docs. You have been warned. # # Configuration and logfile names: If the filenames you specify for many # of the server\u0026#39;s control files begin with \u0026#34;/\u0026#34; (or \u0026#34;drive:/\u0026#34; for Win32), the # server will use that explicit path. If the filenames do *not* begin # with \u0026#34;/\u0026#34;, the value of ServerRoot is prepended -- so \u0026#34;logs/foo_log\u0026#34; # with ServerRoot set to \u0026#34;/usr/local/web/apache2\u0026#34; will be interpreted by the # server as \u0026#34;/usr/local/web/apache2/logs/foo_log\u0026#34;. # # ServerRoot: The top of the directory tree under which the server\u0026#39;s # configuration, error, and log files are kept. # # Do not add a slash at the end of the directory path. If you point # ServerRoot at a non-local disk, be sure to point the LockFile directive # at a local disk. If you wish to share the same ServerRoot for multiple # httpd daemons, you will need to change at least LockFile and PidFile. # ServerRoot \u0026#34;/usr/local/web/apache2\u0026#34; # # Listen: Allows you to bind Apache to specific IP addresses and/or # ports, instead of the default. See also the \u0026lt;VirtualHost\u0026gt; # directive. # # Change this to Listen on specific IP addresses as shown below to # prevent Apache from glomming onto all bound IP addresses. # #Listen 12.34.56.78:80 Listen 80 # # Dynamic Shared Object (DSO) Support # # To be able to use the functionality of a module which was built as a DSO you # have to place corresponding `LoadModule\u0026#39; lines at this location so the # directives contained in it are actually available _before_ they are used. # Statically compiled modules (those listed by `httpd -l\u0026#39;) do not need # to be loaded here. # # Example: # LoadModule foo_module modules/mod_foo.so LoadModule php5_module modules/libphp5.so #LoadModule proxy_module modules/mod_proxy.so #LoadModule proxy_http_module modules/mod_proxy_http.so # \u0026lt;IfModule !mpm_netware_module\u0026gt; \u0026lt;IfModule !mpm_winnt_module\u0026gt; # # If you wish httpd to run as a different user or group, you must run # httpd as root initially and it will switch. # # User/Group: The name (or #number) of the user/group to run httpd as. # It is usually good practice to create a dedicated user and group for # running httpd, as with most system services. # User daemon Group daemon \u0026lt;/IfModule\u0026gt; \u0026lt;/IfModule\u0026gt; # \u0026#39;Main\u0026#39; server configuration # # The directives in this section set up the values used by the \u0026#39;main\u0026#39; # server, which responds to any requests that aren\u0026#39;t handled by a # \u0026lt;VirtualHost\u0026gt; definition. These values also provide defaults for # any \u0026lt;VirtualHost\u0026gt; containers you may define later in the file. # # All of these directives may appear inside \u0026lt;VirtualHost\u0026gt; containers, # in which case these default settings will be overridden for the # virtual host being defined. # # # ServerAdmin: Your address, where problems with the server should be # e-mailed. This address appears on some server-generated pages, such # as error documents. e.g. admin@your-domain.com # ServerAdmin you@example.com # # ServerName gives the name and port that the server uses to identify itself. # This can often be determined automatically, but we recommend you specify # it explicitly to prevent problems during startup. # # If your host doesn\u0026#39;t have a registered DNS name, enter its IP address here. # ServerName www.example.com:80 # # DocumentRoot: The directory out of which you will serve your # documents. By default, all requests are taken from this directory, but # symbolic links and aliases may be used to point to other locations. # DocumentRoot \u0026#34;/usr/local/web/apache2//htdocs\u0026#34; #DocumentRoot \u0026#34;/home/dbmonitor\u0026#34; # # Each directory to which Apache has access can be configured with respect # to which services and features are allowed and/or disabled in that # directory (and its subdirectories). # # First, we configure the \u0026#34;default\u0026#34; to be a very restrictive set of # features. # \u0026lt;Directory /\u0026gt; Options FollowSymLinks AllowOverride None Order allow,deny allow from all \u0026lt;/Directory\u0026gt; # # Note that from this point forward you must specifically allow # particular features to be enabled - so if something\u0026#39;s not working as # you might expect, make sure that you have specifically enabled it # below. # # # This should be changed to whatever you set DocumentRoot to. # \u0026lt;Directory \u0026#34;/usr/local/web/apache2//htdocs\u0026#34;\u0026gt; # # Possible values for the Options directive are \u0026#34;None\u0026#34;, \u0026#34;All\u0026#34;, # or any combination of: # Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews # # Note that \u0026#34;MultiViews\u0026#34; must be named *explicitly* --- \u0026#34;Options All\u0026#34; # doesn\u0026#39;t give it to you. # # The Options directive is both complicated and important. Please see # http://httpd.apache.org/docs/2.2/mod/core.html#options # for more information. # Options Indexes FollowSymLinks # # AllowOverride controls what directives may be placed in .htaccess files. # It can be \u0026#34;All\u0026#34;, \u0026#34;None\u0026#34;, or any combination of the keywords: # Options FileInfo AuthConfig Limit # AllowOverride None # # Controls who can get stuff from this server. # Order allow,deny Allow from all \u0026lt;/Directory\u0026gt; # # DirectoryIndex: sets the file that Apache will serve if a directory # is requested. # \u0026lt;IfModule dir_module\u0026gt; DirectoryIndex index.html index.php indexs.php \u0026lt;/IfModule\u0026gt; # # The following lines prevent .htaccess and .htpasswd files from being # viewed by Web clients. # \u0026lt;FilesMatch \u0026#34;^\\.ht\u0026#34;\u0026gt; Order allow,deny Deny from all Satisfy All \u0026lt;/FilesMatch\u0026gt; # # ErrorLog: The location of the error log file. # If you do not specify an ErrorLog directive within a \u0026lt;VirtualHost\u0026gt; # container, error messages relating to that virtual host will be # logged here. If you *do* define an error logfile for a \u0026lt;VirtualHost\u0026gt; # container, that host\u0026#39;s errors will be logged there and not here. # ErrorLog \u0026#34;logs/error_log\u0026#34; # # LogLevel: Control the number of messages logged to the error_log. # Possible values include: debug, info, notice, warn, error, crit, # alert, emerg. # LogLevel warn \u0026lt;IfModule log_config_module\u0026gt; # # The following directives define some format nicknames for use with # a CustomLog directive (see below). # LogFormat \u0026#34;%h \\\u0026#34;%{x-forwarded-for}i\\\u0026#34; %l %u %t \\\u0026#34;%r\\\u0026#34; %\u0026gt;s %b \\\u0026#34;%{Referer}i\\\u0026#34; \\\u0026#34;%{User-Agent}i\\\u0026#34;\u0026#34; combined LogFormat \u0026#34;%h %l %u %t \\\u0026#34;%r\\\u0026#34; %\u0026gt;s %b\u0026#34; common \u0026lt;IfModule logio_module\u0026gt; # You need to enable mod_logio.c to use %I and %O LogFormat \u0026#34;%h %l %u %t \\\u0026#34;%r\\\u0026#34; %\u0026gt;s %b \\\u0026#34;%{Referer}i\\\u0026#34; \\\u0026#34;%{User-Agent}i\\\u0026#34; %I %O\u0026#34; combinedio \u0026lt;/IfModule\u0026gt; # # The location and format of the access logfile (Common Logfile Format). # If you do not define any access logfiles within a \u0026lt;VirtualHost\u0026gt; # container, they will be logged here. Contrariwise, if you *do* # define per-\u0026lt;VirtualHost\u0026gt; access logfiles, transactions will be # logged therein and *not* in this file. # CustomLog \u0026#34;logs/access_log\u0026#34; common # # If you prefer a logfile with access, agent, and referer information # (Combined Logfile Format) you can use the following directive. # #CustomLog \u0026#34;logs/access_log\u0026#34; combined \u0026lt;/IfModule\u0026gt; \u0026lt;IfModule alias_module\u0026gt; # # Redirect: Allows you to tell clients about documents that used to # exist in your server\u0026#39;s namespace, but do not anymore. The client # will make a new request for the document at its new location. # Example: # Redirect permanent /foo http://www.example.com/bar # # Alias: Maps web paths into filesystem paths and is used to # access content that does not live under the DocumentRoot. # Example: # Alias /webpath /full/filesystem/path # # If you include a trailing / on /webpath then the server will # require it to be present in the URL. You will also likely # need to provide a \u0026lt;Directory\u0026gt; section to allow access to # the filesystem path. # # ScriptAlias: This controls which directories contain server scripts. # ScriptAliases are essentially the same as Aliases, except that # documents in the target directory are treated as applications and # run by the server when requested rather than as documents sent to the # client. The same rules about trailing \u0026#34;/\u0026#34; apply to ScriptAlias # directives as to Alias. # ScriptAlias /cgi-bin/ \u0026#34;/usr/local/web/apache2//cgi-bin/\u0026#34; \u0026lt;/IfModule\u0026gt; \u0026lt;IfModule cgid_module\u0026gt; # # ScriptSock: On threaded servers, designate the path to the UNIX # socket used to communicate with the CGI daemon of mod_cgid. # #Scriptsock logs/cgisock \u0026lt;/IfModule\u0026gt; # # \u0026#34;/usr/local/web/apache2/cgi-bin\u0026#34; should be changed to whatever your ScriptAliased # CGI directory exists, if you have that configured. # \u0026lt;Directory \u0026#34;/usr/local/web/apache2//cgi-bin\u0026#34;\u0026gt; AllowOverride None Options None Order allow,deny Allow from all \u0026lt;/Directory\u0026gt; # # DefaultType: the default MIME type the server will use for a document # if it cannot otherwise determine one, such as from filename extensions. # If your server contains mostly text or HTML documents, \u0026#34;text/plain\u0026#34; is # a good value. If most of your content is binary, such as applications # or images, you may want to use \u0026#34;application/octet-stream\u0026#34; instead to # keep browsers from trying to display binary files as though they are # text. # DefaultType text/plain \u0026lt;IfModule mime_module\u0026gt; # # TypesConfig points to the file containing the list of mappings from # filename extension to MIME-type. # TypesConfig conf/mime.types # # AddType allows you to add to or override the MIME configuration # file specified in TypesConfig for specific file types. # #AddType application/x-gzip .tgz # # AddEncoding allows you to have certain browsers uncompress # information on the fly. Note: Not all browsers support this. # #AddEncoding x-compress .Z #AddEncoding x-gzip .gz .tgz # # If the AddEncoding directives above are commented-out, then you # probably should define those extensions to indicate media types: # AddType application/x-compress .Z AddType application/x-gzip .gz .tgz AddType application/x-httpd-php .php .phtml AddType application/x-httpd-php-source .phps # # AddHandler allows you to map certain file extensions to \u0026#34;handlers\u0026#34;: # actions unrelated to filetype. These can be either built into the server # or added with the Action directive (see below) # # To use CGI scripts outside of ScriptAliased directories: # (You will also need to add \u0026#34;ExecCGI\u0026#34; to the \u0026#34;Options\u0026#34; directive.) # #AddHandler cgi-script .cgi # For type maps (negotiated resources): #AddHandler type-map var # # Filters allow you to process content before it is sent to the client. # # To parse .shtml files for server-side includes (SSI): # (You will also need to add \u0026#34;Includes\u0026#34; to the \u0026#34;Options\u0026#34; directive.) # #AddType text/html .shtml #AddOutputFilter INCLUDES .shtml \u0026lt;/IfModule\u0026gt; # # The mod_mime_magic module allows the server to use various hints from the # contents of the file itself to determine its type. The MIMEMagicFile # directive tells the module where the hint definitions are located. # #MIMEMagicFile conf/magic # # Customizable error responses come in three flavors: # 1) plain text 2) local redirects 3) external redirects # # Some examples: #ErrorDocument 500 \u0026#34;The server made a boo boo.\u0026#34; #ErrorDocument 404 /missing.html #ErrorDocument 404 \u0026#34;/cgi-bin/missing_handler.pl\u0026#34; #ErrorDocument 402 http://www.example.com/subscription_info.html # # # MaxRanges: Maximum number of Ranges in a request before # returning the entire resource, or one of the special # values \u0026#39;default\u0026#39;, \u0026#39;none\u0026#39; or \u0026#39;unlimited\u0026#39;. # Default setting is to accept 200 Ranges. #MaxRanges unlimited # # EnableMMAP and EnableSendfile: On systems that support it, # memory-mapping or the sendfile syscall is used to deliver # files. This usually improves server performance, but must # be turned off when serving from networked-mounted # filesystems or if support for these functions is otherwise # broken on your system. # #EnableMMAP off #EnableSendfile off # Supplemental configuration # # The configuration files in the conf/extra/ directory can be # included to add extra features or to modify the default configuration of # the server, or you may simply copy their contents here and change as # necessary. # Server-pool management (MPM specific) #Include conf/extra/httpd-mpm.conf # Multi-language error messages Include conf/extra/httpd-multilang-errordoc.conf # Fancy directory listings #Include conf/extra/httpd-autoindex.conf # Language settings Include conf/extra/httpd-languages.conf # User home directories #Include conf/extra/httpd-userdir.conf # Real-time info on requests and configuration #Include conf/extra/httpd-info.conf # Virtual hosts Include conf/extra/httpd-vhosts.conf # Local access to the Apache HTTP Server Manual Include conf/extra/httpd-manual.conf # Distributed authoring and versioning (WebDAV) #Include conf/extra/httpd-dav.conf # Various default settings Include conf/extra/httpd-default.conf # Secure (SSL/TLS) connections #Include conf/extra/httpd-ssl.conf # # Note: The following must must be present to support # starting without SSL on platforms with no /dev/random equivalent # but a statically compiled-in mod_ssl. # \u0026lt;IfModule ssl_module\u0026gt; SSLRandomSeed startup builtin SSLRandomSeed connect builtin \u0026lt;/IfModule\u0026gt; # Virtual dir for programmer use #Include conf/httpd-vdir.conf AddDefaultCharset utf-8 重啟服務\n/usr/local/web/apache2/bin/apachectl graceful {PHP 不用設定} mysql 監控主從進度及 binlog ","date":"2022-01-27T00:00:00Z","image":"https://note.laurance.ml/p/mysql-%E5%BB%BA%E7%AB%8B%E4%B8%BB%E5%BE%9E%E7%9B%A3%E6%8E%A7-dbmonitor/100_huad49eaec4f433d83d4d3047da152b4f9_9127_120x120_fill_box_smart1_3.png","permalink":"https://note.laurance.ml/p/mysql-%E5%BB%BA%E7%AB%8B%E4%B8%BB%E5%BE%9E%E7%9B%A3%E6%8E%A7-dbmonitor/","title":"Mysql-建立主從監控 -dbmonitor"},{"content":"正文测试 而这些并不是完全重要，更加重要的问题是， 带着这些问题，我们来审视一下学生会退会。 既然如何， 对我个人而言，学生会退会不仅仅是一个重大的事件，还可能会改变我的人生。 我们不得不面对一个非常尴尬的事实，那就是， 可是，即使是这样，学生会退会的出现仍然代表了一定的意义。 学生会退会，发生了会如何，不发生又会如何。 经过上述讨论， 生活中，若学生会退会出现了，我们就不得不考虑它出现了的事实。 学生会退会，到底应该如何实现。 这样看来， 在这种困难的抉择下，本人思来想去，寝食难安。 对我个人而言，学生会退会不仅仅是一个重大的事件，还可能会改变我的人生。 就我个人来说，学生会退会对我的意义，不能不说非常重大。 莎士比亚曾经提到过，人的一生是短的，但如果卑劣地过这一生，就太长了。这似乎解答了我的疑惑。 莫扎特说过一句富有哲理的话，谁和我一样用功，谁就会和我一样成功。这启发了我， 对我个人而言，学生会退会不仅仅是一个重大的事件，还可能会改变我的人生。 学生会退会，到底应该如何实现。 一般来说， 从这个角度来看， 这种事实对本人来说意义重大，相信对这个世界也是有一定意义的。 在这种困难的抉择下，本人思来想去，寝食难安。 了解清楚学生会退会到底是一种怎么样的存在，是解决一切问题的关键。 一般来说， 生活中，若学生会退会出现了，我们就不得不考虑它出现了的事实。 问题的关键究竟为何？ 而这些并不是完全重要，更加重要的问题是。\n奥斯特洛夫斯基曾经说过，共同的事业，共同的斗争，可以使人们产生忍受一切的力量。　带着这句话，我们还要更加慎重的审视这个问题： 一般来讲，我们都必须务必慎重的考虑考虑。 既然如此， 这种事实对本人来说意义重大，相信对这个世界也是有一定意义的。 带着这些问题，我们来审视一下学生会退会。 我认为， 我认为， 在这种困难的抉择下，本人思来想去，寝食难安。 问题的关键究竟为何？ 每个人都不得不面对这些问题。 在面对这种问题时， 要想清楚，学生会退会，到底是一种怎么样的存在。 我认为， 既然如此， 每个人都不得不面对这些问题。 在面对这种问题时， 那么， 我认为， 学生会退会因何而发生。\n引用 思念是最暖的忧伤像一双翅膀\n让我停不了飞不远在过往游荡\n不告而别的你 就算为了我着想\n这么沉痛的呵护 我怎么能翱翔\n最暖的憂傷 - 田馥甄\n图片 ![Photo by Florian Klauer on Unsplash](florian-klauer-nptLmg6jqDo-unsplash.jpg) ![Photo by Luca Bravo on Unsplash](luca-bravo-alS7ewQ41M8-unsplash.jpg) ![Photo by Helena Hertz on Unsplash](helena-hertz-wWZzXlDpMog-unsplash.jpg) ![Photo by Hudai Gayiran on Unsplash](hudai-gayiran-3Od_VKcDEAA-unsplash.jpg) 相册语法来自 Typlog\n","date":"2020-09-09T00:00:00Z","image":"https://note.laurance.ml/p/test-chinese/helena-hertz-wWZzXlDpMog-unsplash_hu45a5e3ad5e058da6a00650ed8fd40bea_15530_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/test-chinese/","title":"Chinese Test"},{"content":"This article offers a sample of basic Markdown syntax that can be used in Hugo content files, also it shows whether basic HTML elements are decorated with CSS in a Hugo theme.\nHeadings The following HTML \u0026lt;h1\u0026gt;—\u0026lt;h6\u0026gt; elements represent six levels of section headings. \u0026lt;h1\u0026gt; is the highest section level while \u0026lt;h6\u0026gt; is the lowest.\nH1 H2 H3 H4 H5 H6 Paragraph Xerum, quo qui aut unt expliquam qui dolut labo. Aque venitatiusda cum, voluptionse latur sitiae dolessi aut parist aut dollo enim qui voluptate ma dolestendit peritin re plis aut quas inctum laceat est volestemque commosa as cus endigna tectur, offic to cor sequas etum rerum idem sintibus eiur? Quianimin porecus evelectur, cum que nis nust voloribus ratem aut omnimi, sitatur? Quiatem. Nam, omnis sum am facea corem alique molestrunt et eos evelece arcillit ut aut eos eos nus, sin conecerem erum fuga. Ri oditatquam, ad quibus unda veliamenimin cusam et facea ipsamus es exerum sitate dolores editium rerore eost, temped molorro ratiae volorro te reribus dolorer sperchicium faceata tiustia prat.\nItatur? Quiatae cullecum rem ent aut odis in re eossequodi nonsequ idebis ne sapicia is sinveli squiatum, core et que aut hariosam ex eat.\nBlockquotes The blockquote element represents content that is quoted from another source, optionally with a citation which must be within a footer or cite element, and optionally with in-line changes such as annotations and abbreviations.\nBlockquote without attribution Tiam, ad mint andaepu dandae nostion secatur sequo quae. Note that you can use Markdown syntax within a blockquote.\nBlockquote with attribution Don\u0026rsquo;t communicate by sharing memory, share memory by communicating.\n— Rob Pike1\nTables Tables aren\u0026rsquo;t part of the core Markdown spec, but Hugo supports supports them out-of-the-box.\nName Age Bob 27 Alice 23 Inline Markdown within tables Italics Bold Code italics bold code A B C D E F Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ultricies, sapien non euismod aliquam, dui ligula tincidunt odio, at accumsan nulla sapien eget ex. Proin eleifend dictum ipsum, non euismod ipsum pulvinar et. Vivamus sollicitudin, quam in pulvinar aliquam, metus elit pretium purus Proin sit amet velit nec enim imperdiet vehicula. Ut bibendum vestibulum quam, eu egestas turpis gravida nec Sed scelerisque nec turpis vel viverra. Vivamus vitae pretium sapien Code Blocks Code block with backticks \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Code block indented with four spaces \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026quot;en\u0026quot;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026quot;utf-8\u0026quot;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Code block with Hugo\u0026rsquo;s internal highlight shortcode \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Diff code block [dependencies.bevy] git = \u0026#34;https://github.com/bevyengine/bevy\u0026#34; rev = \u0026#34;11f52b8c72fc3a568e8bb4a4cd1f3eb025ac2e13\u0026#34; - features = [\u0026#34;dynamic\u0026#34;] + features = [\u0026#34;jpeg\u0026#34;, \u0026#34;dynamic\u0026#34;] List Types Ordered List First item Second item Third item Unordered List List item Another item And another item Nested list Fruit Apple Orange Banana Dairy Milk Cheese Other Elements — abbr, sub, sup, kbd, mark GIF is a bitmap image format.\nH2O\nXn + Yn = Zn\nPress CTRL+ALT+Delete to end the session.\nMost salamanders are nocturnal, and hunt for insects, worms, and other small creatures.\nHyperlinked image The above quote is excerpted from Rob Pike\u0026rsquo;s talk during Gopherfest, November 18, 2015.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2019-03-11T00:00:00Z","image":"https://note.laurance.ml/p/markdown-syntax-guide/pawel-czerwinski-8uZPynIu-rQ-unsplash_hud7e36f7e20e71be184458283bdae4646_55974_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/markdown-syntax-guide/","title":"Markdown Syntax Guide"},{"content":"Hugo ships with several Built-in Shortcodes for rich content, along with a Privacy Config and a set of Simple Shortcodes that enable static and no-JS versions of various social media embeds.\nYouTube Privacy Enhanced Shortcode Twitter Simple Shortcode “In addition to being more logical, asymmetry has the advantage that its complete appearance is far more optically effective than symmetry.”\n— Jan Tschichold pic.twitter.com/gcv7SrhvJb\n\u0026mdash; Graphic Design History (@DesignReviewed) January 17, 2019 Vimeo Simple Shortcode bilibilibi Shortcode Gist Shortcode Gitlab Snippets Shortcode Quote Shortcode Stack adds a quote shortcode. For example:\nLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n― A famous person, The book they wrote Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n― Anonymous book Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n― Some book Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n― Somebody","date":"2019-03-10T00:00:00Z","permalink":"https://note.laurance.ml/p/rich-content/","title":"Rich Content"},{"content":"فقرة 1 هذا النص هو مثال لنص يمكن أن يستبدل في نفس المساحة، لقد تم توليد هذا النص من مولد النص العربى، حيث يمكنك أن تولد مثل هذا النص أو العديد من النصوص الأخرى إضافة إلى زيادة عدد الحروف التى يولدها التطبيق. إذا كنت تحتاج إلى عدد أكبر من الفقرات يتيح لك مولد النص العربى زيادة عدد الفقرات كما تريد، النص لن يبدو مقسما ولا يحوي أخطاء لغوية، مولد النص العربى مفيد لمصممي المواقع على وجه الخصوص، حيث يحتاج العميل فى كثير من الأحيان أن يطلع على صورة حقيقية لتصميم الموقع. ومن هنا وجب على المصمم أن يضع نصوصا مؤقتة على التصميم ليظهر للعميل الشكل كاملاً،دور مولد النص العربى أن يوفر على المصمم عناء البحث عن نص بديل لا علاقة له بالموضوع الذى يتحدث عنه التصميم فيظهر بشكل لا يليق. هذا النص يمكن أن يتم تركيبه على أي تصميم دون مشكلة فلن يبدو وكأنه نص منسوخ، غير منظم، غير منسق، أو حتى غير مفهوم. لأنه مازال نصاً بديلاً ومؤقتاً.\nفقرة 2 هذا النص هو مثال لنص يمكن أن يستبدل في نفس المساحة، لقد تم توليد هذا النص من مولد النص العربى، حيث يمكنك أن تولد مثل هذا النص أو العديد من النصوص الأخرى إضافة إلى زيادة عدد الحروف التى يولدها التطبيق. إذا كنت تحتاج إلى عدد أكبر من الفقرات يتيح لك مولد النص العربى زيادة عدد الفقرات كما تريد، النص لن يبدو مقسما ولا يحوي أخطاء لغوية، مولد النص العربى مفيد لمصممي المواقع على وجه الخصوص، حيث يحتاج العميل فى كثير من الأحيان أن يطلع على صورة حقيقية لتصميم الموقع. ومن هنا وجب على المصمم أن يضع نصوصا مؤقتة على التصميم ليظهر للعميل الشكل كاملاً،دور مولد النص العربى أن يوفر على المصمم عناء البحث عن نص بديل لا علاقة له بالموضوع الذى يتحدث عنه التصميم فيظهر بشكل لا يليق. هذا النص يمكن أن يتم تركيبه على أي تصميم دون مشكلة فلن يبدو وكأنه نص منسوخ، غير منظم، غير منسق، أو حتى غير مفهوم. لأنه مازال نصاً بديلاً ومؤقتاً.\nتجربة RTL كلمة 1 Text كلمة 2\n","date":"2019-03-09T00:00:00Z","image":"https://note.laurance.ml/p/%D9%85%D8%AB%D8%A7%D9%84-%D9%86%D8%B5/matt-le-SJSpo9hQf7s-unsplash_hu958d513eeefe5556a31d065479ecc5ac_14205_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/%D9%85%D8%AB%D8%A7%D9%84-%D9%86%D8%B5/","title":"مثال نص"},{"content":"Mathematical notation in a Hugo project can be enabled by using third party JavaScript libraries.\nIn this example we will be using KaTeX\nCreate a partial under /layouts/partials/math.html Within this partial reference the Auto-render Extension or host these scripts locally. Include the partial in your templates like so: {{ if or .Params.math .Site.Params.math }} {{ partial \u0026#34;math.html\u0026#34; . }} {{ end }} To enable KaTex globally set the parameter math to true in a project\u0026rsquo;s configuration To enable KaTex on a per page basis include the parameter math: true in content files Note: Use the online reference of Supported TeX Functions\nExamples Block math: $$ \\varphi = 1+\\frac{1} {1+\\frac{1} {1+\\frac{1} {1+\\cdots} } } $$\n","date":"2019-03-08T00:00:00Z","permalink":"https://note.laurance.ml/p/math-typesetting/","title":"Math Typesetting"},{"content":"Emoji can be enabled in a Hugo project in a number of ways.\nThe emojify function can be called directly in templates or Inline Shortcodes.\nTo enable emoji globally, set enableEmoji to true in your site\u0026rsquo;s configuration and then you can type emoji shorthand codes directly in content files; e.g.\n🙈 :see_no_evil: 🙉 :hear_no_evil: 🙊 :speak_no_evil:\nThe Emoji cheat sheet is a useful reference for emoji shorthand codes.\nN.B. The above steps enable Unicode Standard emoji characters and sequences in Hugo, however the rendering of these glyphs depends on the browser and the platform. To style the emoji you can either use a third party emoji font or a font stack; e.g.\n.emoji { font-family: Apple Color Emoji, Segoe UI Emoji, NotoColorEmoji, Segoe UI Symbol, Android Emoji, EmojiSymbols; }","date":"2019-03-05T00:00:00Z","image":"https://note.laurance.ml/p/emoji-support/the-creative-exchange-d2zvqp3fpro-unsplash_huf941de4769045cdfa8c9ee7036519a2a_35369_120x120_fill_q75_box_smart1.jpg","permalink":"https://note.laurance.ml/p/emoji-support/","title":"Emoji Support"}]